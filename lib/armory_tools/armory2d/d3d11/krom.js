(function(e,t){"use strict";function n(e,t){var n=Object.create(e);for(var i in t)n[i]=t[i];return t.toString!==Object.prototype.toString&&(n.toString=t.toString),n}function d(e){return e instanceof Array?_.iter(e):e.iterator()}function r(e,n){if(null==n)return null;null==n.__id__&&(n.__id__=t.$haxeUID++);var i;return null==e.hx__closures__?e.hx__closures__={}:i=e.hx__closures__[n.__id__],null==i&&(i=n.bind(e),e.hx__closures__[n.__id__]=i),i}e.kha=e.kha||{},e.kha.input=e.kha.input||{};var s={},o=function(){return G.__string_rec(this,"")},A=A||{},u=function(e){if(this.lastCanvasH=0,this.lastCanvasW=0,this.lastH=0,this.lastW=0,this.hwin=Tn.global.nest(0,null),this.selectedElem=null,this.selectedFrame=0,this.rotationSteps=.261799386,this.gridSize=20,this.useRotationSteps=!1,this.gridUseRelative=!0,this.gridSnapPos=!0,this.gridSnapBounds=!1,this.filesDone=null,this.foldersOnly=!1,this.showFiles=!1,this.zoom=1,this.resizeCanvas=!1,this.dragAsset=null,this.assetNames=[""],this.rotate=!1,this.grabY=!1,this.grabX=!1,this.grab=!1,this.dragBottom=!1,this.dragRight=!1,this.dragTop=!1,this.dragLeft=!1,this.drag=!1,this.transformStartedMouse=!1,this.isManipulating=!1,this.currentOperation="",this.dropPath="",this.canvas=e,0<e.assets.length){var t=e.assets;e.assets=[];for(var n=0,i;n<t.length;)i=t[n],++n,this.importAsset(i.file)}q.loadEverything(r(this,this.loaded))},l;s.Elements=u,u.__name__=!0,u.get_uiw=function(){return 0|u.windowW*g.prefs.scaleFactor},u.toRelative=function(e,t){e=H.normalize(e),t=H.normalize(t);for(var n=[],i=e.split("/"),d=t.split("/"),a=0;i[a]==d[a];)++a;for(var r=0,s=d.length-a;r<s;){r++;n.push("..")}for(var o=a,A=i.length;o<A;){var u=o++;n.push(i[u])}return n.join("/")},u.toAbsolute=function(e,t){return H.normalize(t+"/"+e)},u.toDegrees=function(e){return 57.29578*e},u.toRadians=function(e){return .0174532924*e},u.prototype={ui:null,cui:null,canvas:null,toolbarw:null,get_toolbarw:function(){return 0|140*this.ui.SCALE},handleSize:null,get_handleSize:function(){return 0|8*this.ui.SCALE},dropPath:null,currentOperation:null,isManipulating:null,transformInitInput:null,transformInitPos:null,transformInitRot:null,transformInitSize:null,transformStartedMouse:null,drag:null,dragLeft:null,dragTop:null,dragRight:null,dragBottom:null,grab:null,grabX:null,grabY:null,rotate:null,assetNames:null,dragAsset:null,resizeCanvas:null,zoom:null,showFiles:null,foldersOnly:null,filesDone:null,uimodal:null,gridSnapBounds:null,gridSnapPos:null,gridUseRelative:null,useRotationSteps:null,gridSize:null,rotationSteps:null,selectedFrame:null,selectedElem:null,hwin:null,lastW:null,lastH:null,lastCanvasW:null,lastCanvasH:null,loaded:function(){var e=this,n=p.copy(kn.dark);n.FILL_WINDOW_BG=!0,this.ui=new vn({scaleFactor:g.prefs.scaleFactor,font:q.fonts.font_default,theme:n,color_wheel:q.images.color_wheel}),this.cui=new vn({scaleFactor:1,font:q.fonts.font_default,autoNotifyInput:!0,theme:kn.light}),this.uimodal=new vn({font:q.fonts.font_default,scaleFactor:g.prefs.scaleFactor}),pe.notifyOnDropFiles(function(t){e.dropPath=m.rtrim(t),e.dropPath=u.toRelative(e.dropPath,g.cwd)}),pe.notifyOnFrames(r(this,this.onFrames)),_e.addTimeTask(r(this,this.update),0,.016666666666666666)},importAsset:function(e){var t=this,n=m.endsWith(e,".jpg")||m.endsWith(e,".png")||m.endsWith(e,".k")||m.endsWith(e,".hdr"),i=m.endsWith(e,".ttf"),d=u.toAbsolute(e,g.cwd);d="Windows"==pe.get_systemId()?m.replace(d,"/","\\"):d,n?q.loadImageFromPath(d,!1,function(n){var i=e.split("/"),d=i[i.length-1],a=Cn.getAssetId(t.canvas),r={name:d,file:e,id:a};t.canvas.assets.push(r),Cn.assetMap.h[r.id]=n,t.assetNames.push(d),t.hwin.redraws=2},null,{fileName:"Elements.hx",lineNumber:147,className:"Elements",methodName:"importAsset"}):i&&q.loadFontFromPath(d,function(n){var i=e.split("/"),d=i[i.length-1],a=Cn.getAssetId(t.canvas),r={name:d,file:e,id:a};t.canvas.assets.push(r),Cn.assetMap.h[r.id]=n,t.assetNames.push(d),t.hwin.redraws=2},null,{fileName:"Elements.hx",lineNumber:159,className:"Elements",methodName:"importAsset"})},unique:function(e){return e},makeElem:function(e){var t="",n=this.cui.t.ELEMENT_H,i=0;0===e?t=this.unique("Text"):1===e?(t=this.unique("Image"),n=100):2===e?(t=this.unique("Button"),i=1):3===e?(t=this.unique("Empty"),n=100):6===e?t=this.unique("Check"):7===e?t=this.unique("Radio"):8===e?t=this.unique("Combo"):9===e?(t=this.unique("Slider"),i=2):10===e?t=this.unique("TextInput"):11===e?t=this.unique("KeyInput"):12===e?(t=this.unique("Filled_Rectangle"),n=100):13===e?(t=this.unique("Rectangle"),n=100):14===e?t=this.unique("Filled_Circle"):15===e?t=this.unique("Circle"):16===e?t=this.unique("Filled_Triangle"):17===e?t=this.unique("Triangle"):18===e?t=this.unique("Progress_bar"):19===e?t=this.unique("CProgress_bar"):void 0;var d={id:Cn.getElementId(this.canvas),type:e,name:t,event:"",x:0,y:0,width:150,height:n,rotation:0,text:"My "+t,asset:"",color:-12040120,color_text:-1513499,color_hover:-12895429,color_press:-15000805,color_progress:-1513499,progress_at:0,progress_total:100,strength:1,alignment:G.__cast(i,Ln),anchor:0,parent:null,children:[],visible:!0};return this.canvas.elements.push(d),d},unparent:function(e){var t=this.elemById(e.parent);null!=t&&(e.x+=this.absx(t),e.y+=this.absy(t),e.parent=null,_.remove(t.children,e.id))},setParent:function(e,t){var n=this.elemById(e.parent);n==t||(this.unparent(e),null!=t&&(null==t.children&&(e.children=[]),t.children.push(e.id),e.parent=t.id,e.x-=this.absx(t),e.y-=this.absy(t)))},duplicateElem:function(e,t){if(null!=e){null==t&&(t=e.parent);var n={id:Cn.getElementId(this.canvas),type:e.type,name:e.name,event:e.event,x:e.x+10,y:e.y+10,width:e.width,height:e.height,rotation:e.rotation,text:e.text,asset:e.asset,color:e.color,color_text:e.color_text,color_hover:e.color_hover,color_press:e.color_press,color_progress:e.color_progress,progress_at:e.progress_at,progress_total:e.progress_total,strength:e.strength,anchor:e.anchor,parent:t,children:[],visible:e.visible};if(this.canvas.elements.push(n),null!=t){var i=this.elemById(t);i.children.push(n.id),e.parent!=t&&(n.x=e.x,n.y=e.y)}for(var d=0,a=e.children,r;d<a.length;)r=a[d],++d,this.duplicateElem(this.elemById(r),n.id);return n}return null},getEnumTexts:function(){return 0<this.assetNames.length?this.assetNames:[""]},getAssetIndex:function(e){for(var t=0,n=this.canvas.assets.length;t<n;){var d=t++;if(e==this.canvas.assets[d].name)return d+1}return 0},resize:function(){null!=u.grid&&(u.grid.unload(),u.grid=null),null!=u.timeline&&(u.timeline.unload(),u.timeline=null)},drawGrid:function(){var e=2*this.gridSize,t=pe.windowWidth(),n=pe.windowHeight(),d=t+2*e,a=n+2*e;u.grid=ae.createRenderTarget(d,a),u.grid.get_g2().begin(!0,-14408668);for(var r=0;r<(0|a/e)+1;){var s=r++;u.grid.get_g2().set_color(-14145496),u.grid.get_g2().drawLine(0,s*e,d,s*e),u.grid.get_g2().set_color(-13487566),u.grid.get_g2().drawLine(0,s*e+this.gridSize,d,s*e+this.gridSize)}for(var i=0;i<(0|d/e)+1;){var o=i++;u.grid.get_g2().set_color(-14145496),u.grid.get_g2().drawLine(o*e,0,o*e,a),u.grid.get_g2().set_color(-13487566),u.grid.get_g2().drawLine(o*e+this.gridSize,0,o*e+this.gridSize,a)}u.grid.get_g2().end()},drawTimeline:function(e,t){var n=this.ui.SCALE,d=e+t;u.timeline=ae.createRenderTarget(pe.windowWidth()-u.get_uiw()-this.get_toolbarw(),d);var a=u.timeline.get_g2();a.begin(!0,-14540254),a.set_font(q.fonts.font_default),a.set_fontSize(0|16*n);for(var r=0|u.timeline.get_width()/(11*n),s=0;s<(0|r/5)+1;){var o=s++,i=5*o,A=q.fonts.font_default.width(a.get_fontSize(),i+"");a.drawString(i+"",55*o*n+5*n-A/2,e/2-a.get_fontSize()/2)}for(var l=0;l<r;){var _=l++;a.set_color(0==_%5?-12303292:-13421773),a.fillRect(11*_*n,d-t,10*n,t)}a.end()},onFrames:function(e){var t=this,n=e[0];""!=this.dropPath&&(this.importAsset(this.dropPath),this.dropPath="");var i=this.ui.SCALE,d=0|30*i,r=0|40*i;null==u.grid&&this.drawGrid(),(null==u.timeline||u.timeline.get_height()!=d+r)&&this.drawTimeline(d,r);var s=n.get_g2();if(s.begin(),s.set_color(-1),s.drawImage(u.grid,u.coffX%40-40,u.coffY%40-40),this.canvas.x=u.coffX,this.canvas.y=u.coffY,s.drawRect(this.canvas.x,this.canvas.y,0|this.canvas.width*this.cui.SCALE,0|this.canvas.height*this.cui.SCALE,1),s.drawRect(this.canvas.x+(0|this.canvas.width*this.cui.SCALE)-3,this.canvas.y+(0|this.canvas.height*this.cui.SCALE)-3,6,6,1),Cn.screenW=this.canvas.width,Cn.screenH=this.canvas.height,Cn.draw(this.cui,this.canvas,s),null!=this.selectedElem){s.set_color(-1);var o=0|this.absx(this.selectedElem)*this.cui.SCALE,A=0|this.absy(this.selectedElem)*this.cui.SCALE,l=0|this.selectedElem.width*this.cui.SCALE,f=0|this.selectedElem.height*this.cui.SCALE,c=this.canvas.x+o+l/2,p=this.canvas.y+A+f/2;s.pushRotation(this.selectedElem.rotation,c,p),s.drawRect(this.canvas.x+o,this.canvas.y+A,l,f),s.set_color(-16777216),s.drawRect(this.canvas.x+o+1,this.canvas.y+A+1,l,f),s.set_color(-1);for(var b=this.rotatePoint(this.ui.inputX,this.ui.inputY,c,p,-this.selectedElem.rotation),S=0;3>S;)for(var E=S++,T=E/2,C=0;3>C;){var I=C++,B=I/2;if(.5!=T||.5!=B){var k=this.canvas.x+o+l*T-(0|8*this.ui.SCALE)/2,v=this.canvas.y+A+f*B-(0|8*this.ui.SCALE)/2,O=!1;0==T&&this.dragLeft?0==B&&this.dragTop?O=!0:.5!=B||this.dragTop||this.dragBottom?1==B&&this.dragBottom&&(O=!0):O=!0:.5!=T||this.dragLeft||this.dragRight?1==T&&this.dragRight&&(0==B&&this.dragTop?O=!0:.5!=B||this.dragTop||this.dragBottom?1==B&&this.dragBottom&&(O=!0):O=!0):0==B&&this.dragTop?O=!0:1==B&&this.dragBottom&&(O=!0),O=O&&this.drag,(b.x>k&&b.x<k+(0|8*this.ui.SCALE)||O)&&(b.y>v&&b.y<v+(0|8*this.ui.SCALE)||O)&&(s.set_color(-14656100),s.fillRect(k,v,0|8*this.ui.SCALE,0|8*this.ui.SCALE),s.set_color(-1)),s.drawRect(k,v,0|8*this.ui.SCALE,0|8*this.ui.SCALE)}}s.drawLine(c,this.canvas.y+A,c,this.canvas.y+A-2*(0|8*this.ui.SCALE));var N=c,P=this.canvas.y+A-2*(0|8*this.ui.SCALE);null==P&&(P=0),null==N&&(N=0);var R=N,V=P,D=b.x-R,F=b.y-V;null==F&&(F=0),null==D&&(D=0);var M=D,U=F;(Math.sqrt(M*M+U*U)<=(0|8*this.ui.SCALE)/2||this.rotate)&&(s.set_color(-14656100),ut.fillCircle(s,R,V,(0|8*this.ui.SCALE)/2),s.set_color(-1)),ut.drawCircle(s,R,V,(0|8*this.ui.SCALE)/2),s.popTransformation()}""!=this.currentOperation&&(s.set_fontSize(0|14*this.ui.SCALE),s.set_color(-5592406),s.drawString(this.currentOperation,this.get_toolbarw(),pe.windowHeight()-u.timeline.get_height()-s.get_fontSize()));s.set_color(-1);var H=pe.windowHeight()-u.timeline.get_height();s.drawImage(u.timeline,this.get_toolbarw(),H),s.set_color(-14656100),s.fillRect(this.get_toolbarw()+11*this.selectedFrame*i,H+d,10*i,r),s.set_font(q.fonts.font_default),s.set_fontSize(0|16*i);var W=4*i,G=4*i,z=30*i,Y=q.fonts.font_default.width(s.get_fontSize(),""+this.selectedFrame);if(Y>z+G&&(z=Y+G),s.fillRect(this.get_toolbarw()+11*this.selectedFrame*i+5*i-z/2,H+W,z,d-2*W),s.set_color(-1),s.drawString(""+this.selectedFrame,this.get_toolbarw()+11*this.selectedFrame*i+5*i-Y/2,H+d/2-s.get_fontSize()/2),(s.end(),this.ui.begin(s),this.ui.window(Tn.global.nest(1,null),0,0,this.get_toolbarw(),pe.windowHeight())&&(this.ui.text("Add Elements:"),this.ui.panel(Tn.global.nest(2,{selected:!0}),"Basic")&&(this.ui.indent(),this.ui.button("Empty")&&(this.selectedElem=this.makeElem(3)),this.ui.isHovered&&this.ui.tooltip("Creates empty element"),this.ui.button("Text")&&(this.selectedElem=this.makeElem(0)),this.ui.isHovered&&this.ui.tooltip("Create text element"),this.ui.button("Image")&&(this.selectedElem=this.makeElem(1)),this.ui.isHovered&&this.ui.tooltip("Creates image element"),this.ui.unindent()),this.ui.panel(Tn.global.nest(3,{selected:!0}),"Buttons")&&(this.ui.indent(),this.ui.button("Button")&&(this.selectedElem=this.makeElem(2)),this.ui.isHovered&&this.ui.tooltip("Creates button element"),this.ui.button("Check")&&(this.selectedElem=this.makeElem(6)),this.ui.isHovered&&this.ui.tooltip("Creates check box element"),this.ui.button("Radio")&&(this.selectedElem=this.makeElem(7)),this.ui.isHovered&&this.ui.tooltip("Creates inline-radio element"),this.ui.unindent()),this.ui.panel(Tn.global.nest(4,{selected:!0}),"Inputs")&&(this.ui.indent(),this.ui.button("Text Input")&&(this.selectedElem=this.makeElem(10)),this.ui.isHovered&&this.ui.tooltip("Creates text input element"),this.ui.button("Key Input")&&(this.selectedElem=this.makeElem(11)),this.ui.isHovered&&this.ui.tooltip("Creates key input element"),this.ui.button("Combo Box")&&(this.selectedElem=this.makeElem(8)),this.ui.isHovered&&this.ui.tooltip("Creates combo box element"),this.ui.button("Slider")&&(this.selectedElem=this.makeElem(9)),this.ui.isHovered&&this.ui.tooltip("Creates slider element"),this.ui.unindent()),this.ui.panel(Tn.global.nest(5,{selected:!0}),"Shapes")&&(this.ui.indent(),this.ui.button("Rect")&&(this.selectedElem=this.makeElem(13)),this.ui.isHovered&&this.ui.tooltip("Creates rectangle shaped element"),this.ui.button("Fill Rect")&&(this.selectedElem=this.makeElem(12)),this.ui.isHovered&&this.ui.tooltip("Creates filled rectangle shaped element"),this.ui.button("Circle")&&(this.selectedElem=this.makeElem(15)),this.ui.isHovered&&this.ui.tooltip("Creates circle shaped element"),this.ui.button("Fill Circle")&&(this.selectedElem=this.makeElem(14)),this.ui.isHovered&&this.ui.tooltip("Creates filled circle shaped element"),this.ui.button("Triangle")&&(this.selectedElem=this.makeElem(17)),this.ui.isHovered&&this.ui.tooltip("Creates triangle shaped element"),this.ui.button("Fill Triangle")&&(this.selectedElem=this.makeElem(16)),this.ui.isHovered&&this.ui.tooltip("Creates filled triangle shaped element"),this.ui.unindent()),this.ui.panel(Tn.global.nest(6,{selected:!0}),"ProgressBars")&&(this.ui.indent(),this.ui.button("RectPB")&&(this.selectedElem=this.makeElem(18)),this.ui.isHovered&&this.ui.tooltip("Creates rectangular progress bar"),this.ui.button("CircularPB")&&(this.selectedElem=this.makeElem(19)),this.ui.isHovered&&this.ui.tooltip("Creates circular progress bar"),this.ui.unindent())),this.ui.window(Tn.global.nest(7,null),this.get_toolbarw(),0,pe.windowWidth()-u.get_uiw()-this.get_toolbarw(),0|(this.ui.t.ELEMENT_H+2)*this.ui.SCALE)&&this.ui.tab(Tn.global.nest(8,null),this.canvas.name),this.ui.window(this.hwin,pe.windowWidth()-u.get_uiw(),0,u.get_uiw(),pe.windowHeight()))){var X=Tn.global.nest(9,null);if(this.ui.tab(X,"Project")){if(this.ui.button("Save")){this.canvas.x=0,this.canvas.y=0,Krom.fileSaveBytes(g.prefs.path,L.ofString(JSON.stringify(this.canvas)).b.bufferValue);var Q=_.substr(g.prefs.path,0,g.prefs.path.length-5);Q+=".files";for(var j="",K=0,Z=this.canvas.assets,J;K<Z.length;)J=Z[K],++K,j+=J.file+"\n";Krom.fileSaveBytes(Q,L.ofString(j).b.bufferValue),this.canvas.x=u.coffX,this.canvas.y=u.coffY}if(this.ui.panel(Tn.global.nest(10,{selected:!1}),"Canvas")){this.ui.indent(),this.ui.button("New")&&(this.canvas.elements=[],this.selectedElem=null),this.ui.isHovered&&this.ui.tooltip("Create new canvas");var $=this.ui,ee=Tn.global.nest(11,{text:this.canvas.name});this.canvas.name=$.textInput(ee,"Name",2),this.ui.row([.5,.5]);var te=Tn.global.nest(12,{text:this.canvas.width+""}),ne=Tn.global.nest(13,{text:this.canvas.height+""});te.text=this.canvas.width+"",ne.text=this.canvas.height+"";var ie=this.ui.textInput(te,"Width",2),de=this.ui.textInput(ne,"Height",2);this.canvas.width=h.parseInt(ie),this.canvas.height=h.parseInt(de),this.ui.unindent()}if(this.ui.panel(Tn.global.nest(14,{selected:!0}),"Outliner")){this.ui.indent();var ae=null;ae=function(e,n){var d=!1;t.selectedElem==n&&(t.ui.g.set_color(-14656100),t.ui.g.fillRect(0,t.ui._y,t.ui._windowW,t.ui.t.ELEMENT_H*t.ui.SCALE),t.ui.g.set_color(-1));var a=t.ui.getStarted();if(a&&!t.ui.inputDownR&&(t.selectedElem=n),a&&t.ui.inputDownR&&(n==t.selectedElem?t.unparent(n):t.setParent(t.selectedElem,n)),null!=n.children&&0<n.children.length?(t.ui.row([.07692307692307693,.9230769230769231]),d=t.ui.panel(e.nest(n.id,{selected:!0}),"",0,!0),t.ui.text(n.name)):(t.ui._x+=18,t.ui.text(n.name),t.ui._x-=18),d)for(var r=n.children.length;0<r;){--r;var s=n.children[n.children.length-1-r];t.ui.indent();var o=t.elemById(s);ae(e,o),t.ui.unindent()}};for(var re=0,se=this.canvas.elements.length;re<se;){var oe=re++,Ae=this.canvas.elements[this.canvas.elements.length-1-oe];if(null==Ae.parent){var ue=Tn.global.nest(15,null);ae(ue,Ae)}}this.ui.row([.25,.25,.25,.25]);this.canvas.elements;this.ui.button("Up")&&null!=this.selectedElem&&this.moveElem(1),this.ui.isHovered&&this.ui.tooltip("Move element up"),this.ui.button("Down")&&null!=this.selectedElem&&this.moveElem(-1),this.ui.isHovered&&this.ui.tooltip("Move element down"),this.ui.button("Remove")&&null!=this.selectedElem&&this.removeSelectedElem(),this.ui.isHovered&&this.ui.tooltip("Delete element"),this.ui.button("Duplicate")&&null!=this.selectedElem&&(this.selectedElem=this.duplicateElem(this.selectedElem)),this.ui.isHovered&&this.ui.tooltip("Create duplicate of element"),this.ui.unindent()}if(null!=this.selectedElem){var le=this.selectedElem,_e=le.id;if(this.ui.panel(Tn.global.nest(16,{selected:!0}),"Properties")){this.ui.indent();var fe=null==le.visible||le.visible;le.visible=this.ui.check(Tn.global.nest(17,null).nest(_e,{selected:fe}),"Visible"),le.name=this.ui.textInput(Tn.global.nest(18,null).nest(_e,{text:le.name}),"Name",2),le.text=this.ui.textInput(Tn.global.nest(19,null).nest(_e,{text:le.text}),"Text",2),this.ui.row([.25,.25,.25,.25]);var ce=le.x+"",ge=Tn.global.nest(20,null).nest(_e,{text:ce}),he=le.y+"",me=Tn.global.nest(21,null).nest(_e,{text:he});ge.text=le.x+"",me.text=le.y+"";var be=this.ui.textInput(ge,"X",2),xe=this.ui.textInput(me,"Y",2);le.x=parseFloat(be),le.y=parseFloat(xe);var Se=le.width+"",ye=Tn.global.nest(22,null).nest(_e,{text:Se}),we=le.height+"",Ee=Tn.global.nest(23,null).nest(_e,{text:we});ye.text=le.width+"",Ee.text=le.height+"";var Te=this.ui.textInput(ye,"W",2),Ce=this.ui.textInput(Ee,"H",2);if(le.width=0|parseFloat(Te),le.height=0|parseFloat(Ce),13==le.type||15==le.type||17==le.type||18==le.type||19==le.type){var Ie=le.strength+"",Be=Tn.global.nest(24,null).nest(_e,{text:Ie}),ke=this.ui.textInput(Be,"Line Strength",2);le.strength=0|parseFloat(ke)}if(18==le.type||19==le.type){var ve=le.progress_at+"",Le=Tn.global.nest(25,null).nest(_e,{text:ve}),Oe=this.ui.textInput(Le,"Progress",2),Ne=le.progress_total+"",Pe=Tn.global.nest(26,null).nest(_e,{text:Ne}),Re=this.ui.textInput(Pe,"Total Progress",2);le.progress_total=0|parseFloat(Re),le.progress_at=0|parseFloat(Oe)}var Ve=Tn.global.nest(27,null).nest(_e,{value:this.roundPrecision(57.29578*(null==le.rotation?0:le.rotation),2)});Ve.value=this.roundPrecision(57.29578*le.rotation,2),360<=Ve.value&&(Ve.value=0),le.rotation=.0174532924*this.ui.slider(Ve,"Rotation",0,360,!0);var De=this.ui.combo(Tn.global.nest(28,null).nest(_e,{position:this.getAssetIndex(le.asset)}),this.getEnumTexts(),"Asset",!0,2);le.asset=this.getEnumTexts()[De],this.ui.unindent()}if(this.ui.panel(Tn.global.nest(29,{selected:!1}),"Color")&&(this.ui.indent(),0==le.type?(this.ui.text("Text:"),le.color_text=In.colorWheel(this.ui,Tn.global.nest(30,null).nest(_e,{color:le.color_text}),!0,null,!0)):2==le.type?(this.ui.text("Text:"),le.color_text=In.colorWheel(this.ui,Tn.global.nest(31,null).nest(_e,{color:le.color_text}),!0,null,!0),this.ui.text("Background:"),le.color=In.colorWheel(this.ui,Tn.global.nest(32,null).nest(_e,{color:le.color}),!0,null,!0),this.ui.text("On Hover:"),le.color_hover=In.colorWheel(this.ui,Tn.global.nest(33,null).nest(_e,{color:le.color_hover}),!0,null,!0),this.ui.text("On Pressed:"),le.color_press=In.colorWheel(this.ui,Tn.global.nest(34,null).nest(_e,{color:le.color_press}),!0,null,!0)):12==le.type||14==le.type||13==le.type||15==le.type||17==le.type||16==le.type?(this.ui.text("Color:"),le.color=In.colorWheel(this.ui,Tn.global.nest(35,null).nest(_e,{color:le.color}),!0,null,!0)):18==le.type||19==le.type?(this.ui.text("Progress:"),le.color_progress=In.colorWheel(this.ui,Tn.global.nest(36,null).nest(_e,{color:le.color_progress}),!0,null,!0),this.ui.text("Background:"),le.color=In.colorWheel(this.ui,Tn.global.nest(37,null).nest(_e,{color:le.color}),!0,null,!0)):3==le.type?this.ui.text("No color for element type empty"):(this.ui.text("Text:"),le.color_text=In.colorWheel(this.ui,Tn.global.nest(38,null).nest(_e,{color:le.color_text}),!0,null,!0),this.ui.text("Background:"),le.color=In.colorWheel(this.ui,Tn.global.nest(39,null).nest(_e,{color:le.color}),!0,null,!0),this.ui.text("On Hover:"),le.color_hover=In.colorWheel(this.ui,Tn.global.nest(40,null).nest(_e,{color:le.color_hover}),!0,null,!0)),this.ui.unindent()),this.ui.panel(Tn.global.nest(41,{selected:!1}),"Align")){this.ui.indent();var Fe=Tn.global.nest(42,null).nest(_e,{position:le.alignment});this.ui.row([.3333333333333333,.3333333333333333,.3333333333333333]),this.ui.radio(Fe,0,"Left"),this.ui.radio(Fe,1,"Center"),this.ui.radio(Fe,2,"Right"),this.selectedElem.alignment=Fe.position,this.ui.unindent()}if(this.ui.panel(Tn.global.nest(43,{selected:!1}),"Anchor")){this.ui.indent();var Me=Tn.global.nest(44,null).nest(_e,{position:le.anchor});this.ui.row([.36363636363636365,.2727272727272727,.36363636363636365]),this.ui.radio(Me,0,"Top-Left"),this.ui.radio(Me,1,"Top"),this.ui.radio(Me,2,"Top-Right"),this.ui.row([.36363636363636365,.2727272727272727,.36363636363636365]),this.ui.radio(Me,3,"Left"),this.ui.radio(Me,4,"Center"),this.ui.radio(Me,5,"Right"),this.ui.row([.36363636363636365,.2727272727272727,.36363636363636365]),this.ui.radio(Me,6,"Bot-Left"),this.ui.radio(Me,7,"Bottom"),this.ui.radio(Me,8,"Bot-Right"),le.anchor=Me.position,this.ui.unindent()}this.ui.panel(Tn.global.nest(45,{selected:!1}),"Script")&&(this.ui.indent(),le.event=this.ui.textInput(Tn.global.nest(46,null).nest(_e,{text:le.event}),"Event",2),this.ui.unindent());this.ui.panel(Tn.global.nest(47,{selected:!1}),"Timeline")}}if(this.ui.tab(X,"Assets"))if(this.ui.button("Import Asset")&&(this.showFiles=!0,this.foldersOnly=!1,this.filesDone=function(e){e=m.rtrim(e),e=u.toRelative(e,g.cwd),t.importAsset(e)}),0<this.canvas.assets.length){this.ui.text("(Drag and drop assets to canvas)",1);for(var Ue=this.canvas.assets.length-1;0<=Ue;){var He=this.canvas.assets[Ue],We=m.endsWith(He.name,".ttf");We||1!=this.ui.image(this.getImage(He))||(this.dragAsset=He),this.ui.row([.875,.125]),He.name=this.ui.textInput(Tn.global.nest(48,null).nest(He.id,{text:He.name}),"",2),this.assetNames[Ue+1]=He.name,this.ui.button("X")&&(this.getImage(He).unload(),this.canvas.assets.splice(Ue,1),this.assetNames.splice(Ue+1,1)),--Ue}}else this.ui.text("(Drag and drop images and fonts here)",1);if(this.ui.tab(X,"Preferences")){if(this.ui.panel(Tn.global.nest(49,{selected:!0}),"Application")){this.ui.indent();var Ge=Tn.global.nest(50,{value:1});this.ui.slider(Ge,"UI Scale",.5,4,!0),Ge.changed&&!this.ui.inputDown&&(this.ui.setScale(Ge.value),u.windowW=0|u.defaultWindowW*Ge.value);var ze=this.ui,Ye=Tn.global.nest(51,{selected:!0});g.prefs.window_vsync=ze.check(Ye,"VSync"),this.ui.unindent()}if(this.ui.panel(Tn.global.nest(52,{selected:!0}),"Grid")){this.ui.indent();var Xe=Tn.global.nest(53,{value:20});this.ui.slider(Xe,"Grid Size",1,128,!0,1),this.gridSnapPos=this.ui.check(Tn.global.nest(54,{selected:!0}),"Grid Snap Position"),this.ui.isHovered&&this.ui.tooltip("Snap the element's position to the grid"),this.gridSnapBounds=this.ui.check(Tn.global.nest(55,{selected:!1}),"Grid Snap Bounds"),this.ui.isHovered&&this.ui.tooltip("Snap the element's bounds to the grid"),this.gridUseRelative=this.ui.check(Tn.global.nest(56,{selected:!0}),"Use Relative Grid"),this.ui.isHovered&&this.ui.tooltip("Use a grid that's relative to the selected element"),Xe.changed&&!this.ui.inputDown&&(this.gridSize=0|Xe.value),this.useRotationSteps=this.ui.check(Tn.global.nest(57,{selected:!1}),"Use Fixed Rotation Steps"),this.ui.isHovered&&this.ui.tooltip("Rotate elements by a fixed step size");var Qe=Tn.global.nest(58,{value:15});this.useRotationSteps&&this.ui.slider(Qe,"Rotation Step Size",1,180,!0,1),Qe.changed&&!this.ui.inputDown&&(this.rotationSteps=.0174532924*Qe.value),this.ui.unindent()}if(this.ui.panel(Tn.global.nest(59,{selected:!0}),"Shortcuts")){this.ui.indent(),this.ui.row([.5,.5]),this.ui.text("Select");var je=Tn.global.nest(60,{position:0});this.ui.combo(je,["Left Click","Right Click"],""),this.ui.isHovered&&this.ui.tooltip("Mouse button used for element selection."),je.changed&&(g.prefs.keyMap.selectMouseButton=["Left","Right"][je.position]),this.ui.separator(8,!1),this.ui.row([.5,.5]),this.ui.text("Grab");var Ke=this.ui,qe=Tn.global.nest(61,{value:71});g.prefs.keyMap.grabKey=In.keyInput(Ke,qe,"Key"),this.ui.isHovered&&this.ui.tooltip("Key used for grabbing elements"),this.ui.row([.5,.5]),this.ui.text("Rotate");var Ze=this.ui,Je=Tn.global.nest(62,{value:82});g.prefs.keyMap.rotateKey=In.keyInput(Ze,Je,"Key"),this.ui.isHovered&&this.ui.tooltip("Key used for rotating elements"),this.ui.row([.5,.5]),this.ui.text("Size");var $e=this.ui,et=Tn.global.nest(63,{value:83});g.prefs.keyMap.sizeKey=In.keyInput($e,et,"Key"),this.ui.isHovered&&this.ui.tooltip("Key used for resizing elements"),this.ui.separator(8,!1),this.ui.row([.5,.5]),this.ui.text("Precision Transform");var tt=this.ui,nt=Tn.global.nest(64,{value:16});g.prefs.keyMap.slowMovement=In.keyInput(tt,nt,"Key"),this.ui.isHovered&&this.ui.tooltip("More precise transformations"),this.ui.row([.5,.5]),this.ui.text("Invert Grid");var it=this.ui,dt=Tn.global.nest(65,{value:17});g.prefs.keyMap.gridInvert=In.keyInput(it,dt,"Key"),this.ui.isHovered&&this.ui.tooltip("Invert the grid setting"),this.ui.row([.5,.5]),this.ui.text("Invert Rel. Grid");var at=this.ui,rt=Tn.global.nest(66,{value:18});g.prefs.keyMap.gridInvertRelative=In.keyInput(at,rt,"Key"),this.ui.isHovered&&this.ui.tooltip("Invert the relative grid setting"),this.ui.unindent()}this.ui.panel(Tn.global.nest(67,{selected:!1}),"Console")&&(this.ui.indent(),this.ui.text("Mouse X: "+this.ui.inputX),this.ui.text("Mouse Y: "+this.ui.inputY),this.ui.unindent())}}if(this.ui.end(),this.ui.changed&&!this.ui.inputDown&&this.drawGrid(),s.begin(!1),null!=this.dragAsset){var st=Math.min(128,this.getImage(this.dragAsset).get_width()),w=st/this.getImage(this.dragAsset).get_width(),ot=this.getImage(this.dragAsset).get_height()*w;s.drawScaledImage(this.getImage(this.dragAsset),this.ui.inputX,this.ui.inputY,st,ot)}s.end(),0<this.lastW&&(this.lastW!=pe.windowWidth()||this.lastH!=pe.windowHeight())?this.resize():0<this.lastCanvasW&&(this.lastCanvasW!=this.canvas.width||this.lastCanvasH!=this.canvas.height)&&this.resize(),this.lastW=pe.windowWidth(),this.lastH=pe.windowHeight(),this.lastCanvasW=this.canvas.width,this.lastCanvasH=this.canvas.height,this.showFiles&&this.renderFiles(s)},elemById:function(t){for(var n=0,i=this.canvas.elements,d;n<i.length;)if(d=i[n],++n,d.id==t)return d;return null},moveElem:function(e){for(var t=this.canvas.elements,n=t.indexOf(this.selectedElem),d=this.selectedElem.parent;n+=e,!(0>n||n>=t.length);)if(t[n].parent==d){_.remove(t,this.selectedElem),t.splice(n,0,this.selectedElem);break}},getImage:function(e){return Cn.assetMap.h[e.id]},removeElem:function(e){if(null!=e.children)for(var t=0,n=e.children,i;t<n.length;)i=n[t],++t,this.removeElem(this.elemById(i));_.remove(this.canvas.elements,e),null!=e.parent&&(_.remove(this.elemById(e.parent).children,e.id),e.parent=null)},removeSelectedElem:function(){this.removeElem(this.selectedElem),this.selectedElem=null},acceptDrag:function(e){var t=this.makeElem(1);t.asset=this.assetNames[e+1],t.x=this.ui.inputX-this.canvas.x,t.y=this.ui.inputY-this.canvas.y,t.width=this.getImage(this.canvas.assets[e]).get_width(),t.height=this.getImage(this.canvas.assets[e]).get_height(),this.selectedElem=t},hitbox:function(e,t,n,i,d){var a=this.rotatePoint(this.ui.inputX,this.ui.inputY,e+n/2,t+i/2,-d);return!!(a.x>e&&a.x<e+n&&a.y>t)&&a.y<t+i},update:function(){if(this.ui.inputReleased&&null!=this.dragAsset){if(this.ui.inputX<pe.windowWidth()-u.get_uiw()){for(var e=0,t=0,n=this.canvas.assets.length,d;t<n;)if(d=t++,this.canvas.assets[d]==this.dragAsset){e=d;break}this.acceptDrag(e)}this.dragAsset=null}if(null==this.dragAsset){if(this.updateCanvas(),null!=u.timeline){var a=pe.windowHeight()-u.timeline.get_height();this.ui.inputDown&&this.ui.inputY>a&&this.ui.inputX<pe.windowWidth()-u.get_uiw()&&this.ui.inputX>this.get_toolbarw()&&(this.selectedFrame=0|(this.ui.inputX-this.get_toolbarw())/11/this.ui.SCALE)}if(null!=this.selectedElem){var r=this.selectedElem,s=0|this.absx(r)*this.cui.SCALE,o=0|this.absy(r)*this.cui.SCALE,A=0|r.width*this.cui.SCALE,l=0|r.height*this.cui.SCALE,_=this.rotatePoint(this.ui.inputX,this.ui.inputY,this.canvas.x+s+A/2,this.canvas.y+o+l/2,-r.rotation);if(this.ui.inputStarted&&this.ui.inputDown)if(this.hitbox(this.canvas.x+s-(0|8*this.ui.SCALE)/2,this.canvas.y+o-(0|8*this.ui.SCALE)/2,A+(0|8*this.ui.SCALE),l+(0|8*this.ui.SCALE),this.selectedElem.rotation))this.drag=!0,this.dragLeft=this.dragRight=this.dragTop=this.dragBottom=!1,_.x>this.canvas.x+s+A-(0|8*this.ui.SCALE)?this.dragRight=!0:_.x<this.canvas.x+s+(0|8*this.ui.SCALE)&&(this.dragLeft=!0),_.y>this.canvas.y+o+l-(0|8*this.ui.SCALE)?this.dragBottom=!0:_.y<this.canvas.y+o+(0|8*this.ui.SCALE)&&(this.dragTop=!0),this.startElementManipulation(!0);else{var f=this.canvas.x+s+A/2,c=this.canvas.y+o-2*(0|8*this.ui.SCALE);null==c&&(c=0),null==f&&(f=0);var p=f,h=c,m=_.x-p,b=_.y-h;null==b&&(b=0),null==m&&(m=0);var S=m,w=b;Math.sqrt(S*S+w*w)<=(0|8*this.ui.SCALE)&&(this.rotate=!0,this.startElementManipulation(!0))}if(this.isManipulating)if(this.hwin.redraws=2,this.transformStartedMouse&&this.ui.inputReleased||!this.transformStartedMouse&&this.ui.inputStarted)this.endElementManipulation();else if(this.ui.isKeyPressed&&this.ui.isEscapeDown||this.ui.inputStartedR)this.endElementManipulation(!0);else if(this.drag){var E=this.ui.inputX,T=this.ui.inputY;null==T&&(T=0),null==E&&(E=0);var C=E,I=T,B=this.transformInitInput,k=C-B.x,v=I-B.y;null==v&&(v=0),null==k&&(k=0);var L=k,O=v;this.transformStartedMouse||(this.ui.isKeyPressed&&88==this.ui.key&&(r.width=0|this.transformInitSize.x,r.height=0|this.transformInitSize.y,this.dragRight=!0,this.dragBottom=!this.dragBottom),this.ui.isKeyPressed&&89==this.ui.key&&(r.width=0|this.transformInitSize.x,r.height=0|this.transformInitSize.y,this.dragBottom=!0,this.dragRight=!this.dragRight)),this.dragRight?(L=this.calculateTransformDelta(L,this.transformInitPos.x+this.transformInitSize.x),r.width=0|this.transformInitSize.x+L):this.dragLeft&&(L=this.calculateTransformDelta(L,this.transformInitPos.x),r.x=this.transformInitPos.x+L,r.width=0|this.transformInitSize.x-L),this.dragBottom?(O=this.calculateTransformDelta(O,this.transformInitPos.y+this.transformInitSize.y),r.height=0|this.transformInitSize.y+O):this.dragTop&&(O=this.calculateTransformDelta(O,this.transformInitPos.y),r.y=this.transformInitPos.y+O,r.height=0|this.transformInitSize.y-O),1!=r.type&&(1>r.width&&(r.width=1),1>r.height&&(r.height=1)),this.dragLeft||this.dragRight||this.dragBottom||this.dragTop?(this.dragBottom||this.dragTop?!this.dragLeft&&!this.dragRight&&(O=0):O=0,this.currentOperation=" x: "+r.x+"  y: "+r.y+"  w: "+r.width+"  h: "+r.height+"  (dx: "+L+"  dy: "+O+")"):(this.grab=!0,this.grabX=!0,this.grabY=!0,this.drag=!1)}else if(this.grab){var N=this.ui.inputX,P=this.ui.inputY;null==P&&(P=0),null==N&&(N=0);var R=N,V=P,D=this.transformInitInput,F=R-D.x,M=V-D.y;null==M&&(M=0),null==F&&(F=0);var U=F,H=M;this.ui.isKeyPressed&&88==this.ui.key&&(r.x=this.transformInitPos.x,r.y=this.transformInitPos.y,this.grabX=!0,this.grabY=!this.grabY),this.ui.isKeyPressed&&89==this.ui.key&&(r.x=this.transformInitPos.x,r.y=this.transformInitPos.y,this.grabY=!0,this.grabX=!this.grabX),this.grabX&&(U=this.calculateTransformDelta(U,this.transformInitPos.x),r.x=0|this.transformInitPos.x+U),this.grabY&&(H=this.calculateTransformDelta(H,this.transformInitPos.y),r.y=0|this.transformInitPos.y+H),this.grabX?!this.grabY&&(H=0):U=0,this.currentOperation=" x: "+r.x+"  y: "+r.y+"  (dx: "+U+"  dy: "+H+")"}else if(this.rotate){var W=this.canvas.x+s+A/2,G=this.canvas.y+o+l/2;null==G&&(G=0),null==W&&(W=0);var z=W,Y=G,X=this.ui.inputX,Q=this.ui.inputY;null==Q&&(Q=0),null==X&&(X=0);var j=X,K=Q,q=j-z,Z=K-Y;null==Z&&(Z=0),null==q&&(q=0);var J=q,$=Z,ee=-Math.atan2(J,$)+Math.PI;(this.ui.isKeyDown&&this.ui.key==g.prefs.keyMap.gridInvert)!=this.useRotationSteps&&(ee=Math.round(ee/this.rotationSteps)*this.rotationSteps),r.rotation=ee,this.currentOperation=" Rot: "+this.roundPrecision(57.29578*ee,2)+"deg"}this.ui.isKeyPressed&&!this.ui.isTyping&&(!this.grab&&this.ui.key==g.prefs.keyMap.grabKey&&(this.startElementManipulation(),this.grab=!0,this.grabX=!0,this.grabY=!0),!this.drag&&this.ui.key==g.prefs.keyMap.sizeKey&&(this.startElementManipulation(),this.drag=!0,this.dragLeft=!1,this.dragTop=!1,this.dragRight=!0,this.dragBottom=!0),!this.rotate&&this.ui.key==g.prefs.keyMap.rotateKey&&(this.startElementManipulation(),this.rotate=!0),!this.isManipulating&&(37==this.ui.key&&(this.gridSnapPos?r.x-=this.gridSize:r.x--),39==this.ui.key&&(this.gridSnapPos?r.x+=this.gridSize:r.x++),38==this.ui.key&&(this.gridSnapPos?r.y-=this.gridSize:r.y--),40==this.ui.key&&(this.gridSnapPos?r.y+=this.gridSize:r.y++),this.ui.isBackspaceDown||this.ui.isDeleteDown?this.removeSelectedElem():68==this.ui.key&&(this.selectedElem=this.duplicateElem(r))))}else this.endElementManipulation();this.updateFiles()}},startElementManipulation:function(e){null==e&&(e=!1),this.isManipulating&&this.endElementManipulation(!0),this.transformInitInput=new cn(this.ui.inputX,this.ui.inputY),this.transformInitPos=new cn(this.selectedElem.x,this.selectedElem.y),this.transformInitSize=new cn(this.selectedElem.width,this.selectedElem.height),this.transformInitRot=this.selectedElem.rotation,this.transformStartedMouse=e,this.isManipulating=!0},endElementManipulation:function(e){null==e&&(e=!1),e&&(this.selectedElem.x=this.transformInitPos.x,this.selectedElem.y=this.transformInitPos.y,this.selectedElem.width=0|this.transformInitSize.x,this.selectedElem.height=0|this.transformInitSize.y,this.selectedElem.rotation=this.transformInitRot),this.isManipulating=!1,this.grab=!1,this.drag=!1,this.rotate=!1,this.transformStartedMouse=!1,this.currentOperation=""},updateCanvas:function(){if(!(this.showFiles||this.ui.inputX>pe.windowWidth()-u.get_uiw())){var e=g.prefs.keyMap.selectMouseButton;if("Left"==e&&this.ui.inputStarted&&this.ui.inputDown||"Right"==e&&this.ui.inputStartedR&&this.ui.inputDownR)for(var t=this.canvas.elements.length,n=0,i=this.canvas.elements,d;n<i.length;){d=i[n],++n;var a=0|this.absx(d)*this.cui.SCALE,r=0|this.absy(d)*this.cui.SCALE,s=0|d.width*this.cui.SCALE,o=0|d.height*this.cui.SCALE;if(this.hitbox(this.canvas.x+a,this.canvas.y+r,s,o,d.rotation)&&this.selectedElem!=d){this.selectedElem=d;break}}this.isManipulating||(this.ui.inputDownR&&(u.coffX+=0|this.ui.inputDX,u.coffY+=0|this.ui.inputDY),0!=this.ui.inputWheelDelta&&(this.zoom+=-this.ui.inputWheelDelta/10,.4>this.zoom?this.zoom=.4:1<this.zoom&&(this.zoom=1),this.zoom=Math.round(10*this.zoom)/10,this.cui.SCALE=this.cui.ops.scaleFactor*this.zoom)),this.ui.inputStarted&&this.hitbox(this.canvas.x+(0|this.canvas.width*this.cui.SCALE)-3,this.canvas.y+(0|this.canvas.height*this.cui.SCALE)-3,6,6)&&(this.resizeCanvas=!0),this.ui.inputReleased&&this.resizeCanvas&&(this.resizeCanvas=!1),this.resizeCanvas&&(this.canvas.width+=0|this.ui.inputDX,this.canvas.height+=0|this.ui.inputDY,1>this.canvas.width&&(this.canvas.width=1),1>this.canvas.height&&(this.canvas.height=1))}},updateFiles:function(){if(this.showFiles&&this.ui.inputReleased){var e=pe.windowWidth(),t=pe.windowHeight(),n=e/2-u.modalRectW/2,i=e/2+u.modalRectW/2,d=t/2-u.modalRectH/2,a=t/2+u.modalRectH/2;(this.ui.inputX<n||this.ui.inputX>i||this.ui.inputY<d+u.modalHeaderH||this.ui.inputY>a)&&(this.showFiles=!1)}},renderFiles:function(e){var t=pe.windowWidth(),n=pe.windowHeight(),i=t/2-u.modalW/2,d=n/2-u.modalH/2;e.begin(!1),e.set_color(-14671840),e.fillRect(i,d,u.modalW,u.modalH),e.end();var a=0|t/2-u.modalRectW/2,r=0|t/2+u.modalRectW/2,s=0|n/2-u.modalRectH/2,o=0|n/2+u.modalRectH/2;if(s+=u.modalHeaderH,this.uimodal.begin(e),this.uimodal.window(Tn.global.nest(68,null),a,s,u.modalRectW,u.modalRectH-100)){var A=Tn.global.nest(69,null);A.text=this.uimodal.textInput(A),u.path=In.fileBrowser(this.uimodal,A,this.foldersOnly)}this.uimodal.end(!1),e.begin(!1),this.uimodal.beginLayout(e,r-100,o-30,100),this.uimodal.button("OK")&&(this.showFiles=!1,this.filesDone(u.path)),this.uimodal.endLayout(!1),this.uimodal.beginLayout(e,r-200,o-30,100),this.uimodal.button("Cancel")&&(this.showFiles=!1),this.uimodal.endLayout(),e.end()},absx:function(t){return null==t?0:t.x+this.absx(this.elemById(t.parent))},absy:function(t){return null==t?0:t.y+this.absy(this.elemById(t.parent))},roundPrecision:function(e,t){return null==t&&(t=0),e*=Math.pow(10,t),e=1*(0|e),e/=Math.pow(10,t),e},rotatePoint:function(e,t,n,i,d){e-=n,t-=i;var a=e*Math.cos(d)-t*Math.sin(d),r=e*Math.sin(d)+t*Math.cos(d);return new cn(n+a,i+r)},calculateTransformDelta:function(e,t){null==t&&(t=0);var n=this.ui.isKeyDown&&this.ui.key==g.prefs.keyMap.slowMovement,i=this.gridSnapPos!=(this.ui.isKeyDown&&this.ui.key==g.prefs.keyMap.gridInvert),d=this.gridUseRelative!=(this.ui.isKeyDown&&this.ui.key==g.prefs.keyMap.gridInvertRelative);return i?(e=Math.round(e/this.gridSize)*this.gridSize,n&&(e/=2),d&&0!=t&&(t%=this.gridSize,t>this.gridSize/2&&(t=-(this.gridSize-t)),e-=t),e):n?e/2:e},scaled:function(e){return 0|e*this.cui.SCALE},__class__:u};var _=function(){};s.HxOverrides=_,_.__name__=!0,_.strDate=function(e){switch(e.length){case 8:var n=e.split(":"),i=new Date;return i.setTime(0),i.setUTCHours(n[0]),i.setUTCMinutes(n[1]),i.setUTCSeconds(n[2]),i;case 10:var d=e.split("-");return new Date(d[0],d[1]-1,d[2],0,0,0);case 19:var a=e.split(" "),r=a[0].split("-"),s=a[1].split(":");return new Date(r[0],r[1]-1,r[2],s[0],s[1],s[2]);default:throw new W("Invalid date format : "+e);}},_.cca=function(e,t){var n=e.charCodeAt(t);return n==n?n:void 0},_.substr=function(e,t,n){if(null==n)n=e.length;else if(0>n)if(0==t)n=e.length+n;else return"";return e.substr(t,n)},_.remove=function(e,t){var n=e.indexOf(t);return-1!=n&&(e.splice(n,1),!0)},_.iter=function(e){return{cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var f=function(){};s.Lambda=f,f.__name__=!0,f.array=function(e){for(var t=[],n=d(e);n.hasNext();){var i=n.next();t.push(i)}return t};var g=function(){};s.Main=g,g.__name__=!0,g.main=function(){var e=1600,t=900;null!=$.get_primary()&&(e>$.get_primary().get_width()&&(e=$.get_primary().get_width()),t>$.get_primary().get_height()-30&&(t=$.get_primary().get_height()-30)),pe.start(new ge("Armory2D",e,t,null,new ie(null,null,null,null,null,2)),g.initialized)},g.initialized=function(){g.prefs={path:"",scaleFactor:1,keyMap:{selectMouseButton:"Left",grabKey:71,rotateKey:82,sizeKey:83,slowMovement:16,gridInvert:17,gridInvertRelative:18}};var e=Krom.getArgCount();if(4<e&&(g.prefs.path=Krom.getArg(3)),5<e){var t=parseFloat(Krom.getArg(4));g.prefs.scaleFactor=t}var n=g.prefs.path.split("/");n.pop(),g.cwd=n.join("/");var i="Windows"==pe.get_systemId()?m.replace(g.prefs.path,"/","\\"):g.prefs.path;q.loadBlobFromPath(i,function(e){var t=JSON.parse(e.toString());g.inst=new u(t)},null,{fileName:"Main.hx",lineNumber:51,className:"Main",methodName:"initialized"})},g.loadDefaultKeyMap=function(){g.prefs.keyMap.grabKey=71,g.prefs.keyMap.rotateKey=82,g.prefs.keyMap.sizeKey=83,g.prefs.keyMap.slowMovement=16,g.prefs.keyMap.gridInvert=17,g.prefs.keyMap.gridInvertRelative=18},Math.__name__=!0;var p=function(){};s.Reflect=p,p.__name__=!0,p.field=function(e,t){try{return e[t]}catch(t){t instanceof W?t.val:t;return null}},p.fields=function(e){var t=[];if(null!=e){var n=Object.prototype.hasOwnProperty;for(var i in e)"__id__"!=i&&"hx__closures__"!=i&&n.call(e,i)&&t.push(i)}return t},p.isFunction=function(e){return!("function"!=typeof e)&&!(e.__name__||e.__ename__)},p.copy=function(e){if(null==e)return null;for(var t={},n=0,i=p.fields(e);n<i.length;){var d=i[n];++n,t[d]=p.field(e,d)}return t};var h=function(){};s.Std=h,h.__name__=!0,h.string=function(e){return G.__string_rec(e,"")},h.parseInt=function(e){var t=parseInt(e,e&&"0"==e[0]&&("x"==e[1]||"X"==e[1])?16:10);return isNaN(t)?null:t};var m=function(){};s.StringTools=m,m.__name__=!0,m.endsWith=function(e,t){var n=t.length,i=e.length;return!!(i>=n)&&e.indexOf(t,i-n)==i-n},m.isSpace=function(e,t){var n=_.cca(e,t);return!!(8<n&&14>n)||32==n},m.rtrim=function(e){for(var t=e.length,n=0;n<t&&m.isSpace(e,t-n-1);)++n;return 0<n?_.substr(e,0,t-n):e},m.replace=function(e,t,n){return e.split(t).join(n)};var b=function(){};s.Type=b,b.__name__=!0,b.createEnum=function(t,e,n){var i=p.field(t,e);if(null==i)throw new W("No such constructor "+e);if(p.isFunction(i)){if(null==n)throw new W("Constructor "+e+" need parameters");return i.apply(t,n)}if(null!=n&&0!=n.length)throw new W("Constructor "+e+" does not need parameters");return i},b.getInstanceFields=function(e){var t=[];for(var n in e.prototype)t.push(n);return _.remove(t,"__class__"),_.remove(t,"__properties__"),t};var S={};s["_UInt.UInt_Impl_"]=S,S.__name__=!0,S.gt=function(e,t){var n=0>e;return n==0>t?e>t:n},S.gte=function(e,t){var n=0>e;return n==0>t?e>=t:n},S.toFloat=function(e){var t=e;return 0>t?4294967296+t:t+0};var y=function(){};s["haxe.IMap"]=y,y.__name__=!0,y.__isInterface__=!0;var w=function(){};s["haxe.Log"]=w,w.__name__=!0,w.formatOutput=function(e,t){var n=h.string(e);if(null==t)return n;var i=t.fileName+":"+t.lineNumber;if(null!=t.customParams)for(var d=0,a=t.customParams,r;d<a.length;)r=a[d],++d,n+=", "+h.string(r);return i+": "+n},w.trace=function(e,t){var n=w.formatOutput(e,t);"undefined"!=typeof console&&null!=console.log&&console.log(n)};var E=function(){};s["haxe._Unserializer.DefaultResolver"]=E,E.__name__=!0,E.prototype={resolveClass:function(e){return s[e]},resolveEnum:function(e){return A[e]},__class__:E};var T=function(e){this.buf=e,this.length=e.length,this.pos=0,this.scache=[],this.cache=[];var t=T.DEFAULT_RESOLVER;null==t&&(t=new E,T.DEFAULT_RESOLVER=t),this.resolver=t};s["haxe.Unserializer"]=T,T.__name__=!0,T.initCodes=function(){for(var e=[],t=0,n=T.BASE64.length;t<n;){var d=t++;e[T.BASE64.charCodeAt(d)]=d}return e},T.run=function(e){return new T(e).unserialize()},T.prototype={buf:null,pos:null,length:null,cache:null,scache:null,resolver:null,readDigits:function(){for(var e=0,t=!1,n=this.pos,i;i=this.buf.charCodeAt(this.pos),i==i;){if(45==i){if(this.pos!=n)break;t=!0,this.pos++;continue}if(48>i||57<i)break;e=10*e+(i-48),this.pos++}return t&&(e*=-1),e},readFloat:function(){for(var e=this.pos;;){var t=this.buf.charCodeAt(this.pos);if(t!=t)break;if(43<=t&&58>t||101==t||69==t)this.pos++;else break}return parseFloat(_.substr(this.buf,e,this.pos-e))},unserializeObject:function(e){for(;;){if(this.pos>=this.length)throw new W("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var t=this.unserialize();if("string"!=typeof t)throw new W("Invalid object key");var n=this.unserialize();e[t]=n}this.pos++},unserializeEnum:function(e,t){if(58!=this.buf.charCodeAt(this.pos++))throw new W("Invalid enum format");var n=this.readDigits();if(0==n)return b.createEnum(e,t);for(var i=[];0<n--;)i.push(this.unserialize());return b.createEnum(e,t,i)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var t=this.unserialize(),r=this.resolver.resolveClass(t);if(null==r)throw new W("Class not found "+t);return r;case 66:var A=this.unserialize(),u=this.resolver.resolveEnum(A);if(null==u)throw new W("Enum not found "+A);return u;case 67:var e=this.unserialize(),f=this.resolver.resolveClass(e);if(null==f)throw new W("Class not found "+e);var g=Object.create(f.prototype);if(this.cache.push(g),g.hxUnserialize(this),103!=this.buf.charCodeAt(this.pos++))throw new W("Invalid custom data");return g;case 77:var o=new k;this.cache.push(o);for(var p=this.buf,h;104!=this.buf.charCodeAt(this.pos);)h=this.unserialize(),o.set(h,this.unserialize());return this.pos++,o;case 82:var m=this.readDigits();if(0>m||m>=this.scache.length)throw new W("Invalid string reference");return this.scache[m];case 97:var n=this.buf,b=[];for(this.cache.push(b);;){var a=this.buf.charCodeAt(this.pos);if(104==a){this.pos++;break}if(117==a){this.pos++;var c=this.readDigits();b[b.length+c-1]=null}else b.push(this.unserialize())}return b;case 98:var x=new v;this.cache.push(x);for(this.buf;104!=this.buf.charCodeAt(this.pos);){var S=this.unserialize(),y=this.unserialize();null==Dn[S]?x.h[S]=y:x.setReserved(S,y)}return this.pos++,x;case 99:var w=this.unserialize(),E=this.resolver.resolveClass(w);if(null==E)throw new W("Class not found "+w);var B=Object.create(E.prototype);return this.cache.push(B),this.unserializeObject(B),B;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:var O=this.unserialize(),N=this.resolver.resolveEnum(O);if(null==N)throw new W("Enum not found "+O);this.pos++;var P=this.readDigits(),R=N.__constructs__.slice()[P];if(null==R)throw new W("Unknown enum index "+O+"@"+P);var V=this.unserializeEnum(N,R);return this.cache.push(V),V;case 107:return NaN;case 108:var D=new I;this.cache.push(D);for(this.buf;104!=this.buf.charCodeAt(this.pos);)D.add(this.unserialize());return this.pos++,D;case 109:return-Infinity;case 110:return null;case 111:var l={};return this.cache.push(l),this.unserializeObject(l),l;case 112:return 1/0;case 113:var F=new C;this.cache.push(F);for(var M=this.buf,U=this.buf.charCodeAt(this.pos++);58==U;){var H=this.readDigits(),i=this.unserialize();F.h[H]=i,U=this.buf.charCodeAt(this.pos++)}if(104!=U)throw new W("Invalid IntMap format");return F;case 114:var G=this.readDigits();if(0>G||G>=this.cache.length)throw new W("Invalid reference");return this.cache[G];case 115:var z=this.readDigits(),Y=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<z)throw new W("Invalid bytes length");var X=T.CODES;null==X&&(X=T.initCodes(),T.CODES=X);for(var Q=this.pos,j=3&z,K=3*(z>>2)+(2<=j?j-1:0),q=Q+(z-j),Z=new L(new ArrayBuffer(K)),J=0;Q<q;){var $=X[Y.charCodeAt(Q++)],ee=X[Y.charCodeAt(Q++)];Z.b[J++]=$<<2|ee>>4;var te=X[Y.charCodeAt(Q++)];Z.b[J++]=ee<<4|te>>2;var ne=X[Y.charCodeAt(Q++)];Z.b[J++]=te<<6|ne}if(2<=j){var ie=X[Y.charCodeAt(Q++)],de=X[Y.charCodeAt(Q++)];if(Z.b[J++]=ie<<2|de>>4,3==j){var ae=X[Y.charCodeAt(Q++)];Z.b[J++]=de<<4|ae>>2}}return this.pos+=z,this.cache.push(Z),Z;case 116:return!0;case 118:var re;return 48<=this.buf.charCodeAt(this.pos)&&57>=this.buf.charCodeAt(this.pos)&&48<=this.buf.charCodeAt(this.pos+1)&&57>=this.buf.charCodeAt(this.pos+1)&&48<=this.buf.charCodeAt(this.pos+2)&&57>=this.buf.charCodeAt(this.pos+2)&&48<=this.buf.charCodeAt(this.pos+3)&&57>=this.buf.charCodeAt(this.pos+3)&&45==this.buf.charCodeAt(this.pos+4)?(re=_.strDate(_.substr(this.buf,this.pos,19)),this.pos+=19):re=new Date(this.readFloat()),this.cache.push(re),re;case 119:var se=this.unserialize(),oe=this.resolver.resolveEnum(se);if(null==oe)throw new W("Enum not found "+se);var Ae=this.unserializeEnum(oe,this.unserialize());return this.cache.push(Ae),Ae;case 120:throw W.wrap(this.unserialize());case 121:var ue=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<ue)throw new W("Invalid string length");var le=_.substr(this.buf,this.pos,ue);return this.pos+=ue,le=decodeURIComponent(le.split("+").join(" ")),this.scache.push(le),le;case 122:return 0;default:}throw this.pos--,new W("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:T};var C=function(){this.h={}};s["haxe.ds.IntMap"]=C,C.__name__=!0,C.__interfaces__=[y],C.prototype={h:null,keys:function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)?e.push(0|t):null;return _.iter(e)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var e=this.it.next();return this.ref[e]}}},__class__:C};var I=function(){this.length=0};s["haxe.ds.List"]=I,I.__name__=!0,I.prototype={h:null,q:null,length:null,add:function(e){var t=new B(e,null);null==this.h?this.h=t:this.q.next=t,this.q=t,this.length++},__class__:I};var B=function(e,t){this.item=e,this.next=t};s["haxe.ds._List.ListNode"]=B,B.__name__=!0,B.prototype={item:null,next:null,__class__:B};var k=function(){this.h={__keys__:{}}};s["haxe.ds.ObjectMap"]=k,k.__name__=!0,k.__interfaces__=[y],k.prototype={h:null,set:function(e,n){var i=e.__id__||(e.__id__=t.$haxeUID++);this.h[i]=n,this.h.__keys__[i]=e},__class__:k};var v=function(){this.h={}};s["haxe.ds.StringMap"]=v,v.__name__=!0,v.__interfaces__=[y],v.prototype={h:null,rh:null,setReserved:function(e,t){null==this.rh&&(this.rh={}),this.rh["$"+e]=t},getReserved:function(e){return null==this.rh?null:this.rh["$"+e]},existsReserved:function(e){return null!=this.rh&&this.rh.hasOwnProperty("$"+e)},__class__:v};var L=function(e){this.length=e.byteLength,this.b=new Uint8Array(e),this.b.bufferValue=e,e.hxBytes=this,e.bytes=this.b};s["haxe.io.Bytes"]=L,L.__name__=!0,L.ofString=function(e,t){if(t==D.RawNative){for(var n=new Uint8Array(e.length<<1),d=0,r=e.length;d<r;){var s=d++,i=e.charCodeAt(s);n[s<<1]=255&i,n[1|s<<1]=i>>8}return new L(n.buffer)}for(var o=[],a=0;a<e.length;){var A=e.charCodeAt(a++);55296<=A&&56319>=A&&(A=A-55232<<10|1023&e.charCodeAt(a++)),127>=A?o.push(A):2047>=A?(o.push(192|A>>6),o.push(128|63&A)):65535>=A?(o.push(224|A>>12),o.push(128|63&A>>6),o.push(128|63&A)):(o.push(240|A>>18),o.push(128|63&A>>12),o.push(128|63&A>>6),o.push(128|63&A))}return new L(new Uint8Array(o).buffer)},L.ofData=function(e){var t=e.hxBytes;return null==t?new L(e):t},L.prototype={length:null,b:null,data:null,blit:function(e,t,n,i){if(0>e||0>n||0>i||e+i>this.length||n+i>t.length)throw new W(M.OutsideBounds);0==n&&i==t.b.byteLength?this.b.set(t.b,e):this.b.set(t.b.subarray(n,n+i),e)},sub:function(e,t){if(0>e||0>t||e+t>this.length)throw new W(M.OutsideBounds);return new L(this.b.buffer.slice(e+this.b.byteOffset,e+this.b.byteOffset+t))},getDouble:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getFloat64(e,!0)},getFloat:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getFloat32(e,!0)},setDouble:function(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setFloat64(e,t,!0)},setFloat:function(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setFloat32(e,t,!0)},getUInt16:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getUint16(e,!0)},getInt32:function(e){return null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.getInt32(e,!0)},setInt32:function(e,t){null==this.data&&(this.data=new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength)),this.data.setInt32(e,t,!0)},getString:function(e,t,n){if(0>e||0>t||e+t>this.length)throw new W(M.OutsideBounds);null==n&&(n=D.UTF8);var d="",a=this.b,r=e,o=e+t;switch(n._hx_index){case 0:for(;r<o;){var A=a[r++];if(128>A){if(0==A)break;d+=String.fromCodePoint(A)}else if(224>A){var l=(63&A)<<6|127&a[r++];d+=String.fromCodePoint(l)}else if(240>A){var _=a[r++],f=(31&A)<<12|(127&_)<<6|127&a[r++];d+=String.fromCodePoint(f)}else{var c=a[r++],g=a[r++],p=(15&A)<<18|(127&c)<<12|(127&g)<<6|127&a[r++];d+=String.fromCodePoint(p)}}break;case 1:for(;r<o;){var u=a[r++]|a[r++]<<8;d+=String.fromCodePoint(u)}}return d},toString:function(){return this.getString(0,this.length)},__class__:L};var O=function(){this.pos=0,this.size=0};s["haxe.io.BytesBuffer"]=O,O.__name__=!0,O.prototype={buffer:null,view:null,u8:null,pos:null,size:null,addByte:function(e){this.pos==this.size&&this.grow(1),this.view.setUint8(this.pos++,e)},addBytes:function(e,t,n){if(0>t||0>n||t+n>e.length)throw new W(M.OutsideBounds);if(this.pos+n>this.size&&this.grow(n),0!=this.size){var i=new Uint8Array(e.b.buffer,e.b.byteOffset+t,n);this.u8.set(i,this.pos),this.pos+=n}},grow:function(e){for(var t=this.pos+e,n=0==this.size?16:this.size;n<t;)n=3*n>>1;var i=new ArrayBuffer(n),d=new Uint8Array(i);0<this.size&&d.set(this.u8),this.size=n,this.buffer=i,this.u8=d,this.view=new DataView(this.buffer)},getBytes:function(){if(0==this.size)return new L(new ArrayBuffer(0));var e=new L(this.buffer);return e.length=this.pos,e},__class__:O};var N=function(){};s["haxe.io.Input"]=N,N.__name__=!0,N.prototype={bigEndian:null,readByte:function(){throw new W("Not implemented")},readBytes:function(e,t,n){var i=n,d=e.b;if(0>t||0>n||t+n>e.length)throw new W(M.OutsideBounds);try{for(;0<i;)d[t]=this.readByte(),++t,--i}catch(e){var a=e instanceof W?e.val:e;if(a instanceof F);else throw e}return n-i},readFullBytes:function(e,t,n){for(;0<n;){var i=this.readBytes(e,t,n);if(0==i)throw new W(M.Blocked);t+=i,n-=i}},read:function(e){for(var t=new L(new ArrayBuffer(e)),n=0;0<e;){var i=this.readBytes(t,n,e);if(0==i)throw new W(M.Blocked);n+=i,e-=i}return t},readInt32:function(){var e=this.readByte(),t=this.readByte(),n=this.readByte(),i=this.readByte();return this.bigEndian?i|n<<8|t<<16|e<<24:e|t<<8|n<<16|i<<24},readString:function(e,t){var n=new L(new ArrayBuffer(e));return this.readFullBytes(n,0,e),n.getString(0,e,t)},__class__:N};var P=function(e,t,n){if(null==t&&(t=0),null==n&&(n=e.length-t),0>t||0>n||t+n>e.length)throw new W(M.OutsideBounds);this.b=e.b,this.pos=t,this.len=n,this.totlen=n};s["haxe.io.BytesInput"]=P,P.__name__=!0,P.__super__=N,P.prototype=n(N.prototype,{b:null,pos:null,len:null,totlen:null,set_position:function(e){return 0>e?e=0:e>this.totlen&&(e=this.totlen),this.len=this.totlen-e,this.pos=e},readByte:function(){if(0==this.len)throw new W(new F());return this.len--,this.b[this.pos++]},readBytes:function(e,t,n){if(0>t||0>n||t+n>e.length)throw new W(M.OutsideBounds);if(0==this.len&&0<n)throw new W(new F());this.len<n&&(n=this.len);for(var d=this.b,a=e.b,r=0,s=n,o;r<s;)o=r++,a[t+o]=d[this.pos+o];return this.pos+=n,this.len-=n,n},__class__:P});var R=function(){};s["haxe.io.Output"]=R,R.__name__=!0,R.prototype={bigEndian:null,writeByte:function(){throw new W("Not implemented")},writeBytes:function(e,t,n){if(0>t||0>n||t+n>e.length)throw new W(M.OutsideBounds);for(var i=e.b,d=n;0<d;)this.writeByte(i[t]),++t,--d;return n},write:function(e){for(var t=e.length,n=0;0<t;){var i=this.writeBytes(e,n,t);if(0==i)throw new W(M.Blocked);n+=i,t-=i}},writeFloat:function(e){this.writeInt32(U.floatToI32(e))},writeInt32:function(e){this.bigEndian?(this.writeByte(e>>>24),this.writeByte(255&e>>16),this.writeByte(255&e>>8),this.writeByte(255&e)):(this.writeByte(255&e),this.writeByte(255&e>>8),this.writeByte(255&e>>16),this.writeByte(e>>>24))},__class__:R};var V=function(){this.b=new O};s["haxe.io.BytesOutput"]=V,V.__name__=!0,V.__super__=R,V.prototype=n(R.prototype,{b:null,writeByte:function(e){this.b.addByte(e)},writeBytes:function(e,t,n){return this.b.addBytes(e,t,n),n},getBytes:function(){return this.b.getBytes()},__class__:V});var D=A["haxe.io.Encoding"]={__ename__:!0,__constructs__:["UTF8","RawNative"],UTF8:{_hx_index:0,__enum__:"haxe.io.Encoding",toString:o},RawNative:{_hx_index:1,__enum__:"haxe.io.Encoding",toString:o}},F=function(){};s["haxe.io.Eof"]=F,F.__name__=!0,F.prototype={toString:function(){return"Eof"},__class__:F};var M=A["haxe.io.Error"]={__ename__:!0,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"],Blocked:{_hx_index:0,__enum__:"haxe.io.Error",toString:o},Overflow:{_hx_index:1,__enum__:"haxe.io.Error",toString:o},OutsideBounds:{_hx_index:2,__enum__:"haxe.io.Error",toString:o},Custom:(l=function(t){return{_hx_index:3,e:t,__enum__:"haxe.io.Error",toString:o}},l.__params__=["e"],l)},U=function(){};s["haxe.io.FPHelper"]=U,U.__name__=!0,U.floatToI32=function(e){return U.helper.setFloat32(0,e,!0),U.helper.getInt32(0,!0)};var H=function(){};s["haxe.io.Path"]=H,H.__name__=!0,H.normalize=function(e){if(e=e.split("\\").join("/"),"/"==e)return"/";for(var t=[],n=0,i=e.split("/"),d;n<i.length;)d=i[n],++n,".."==d&&0<t.length&&".."!=t[t.length-1]?t.pop():""==d?(0<t.length||47==_.cca(e,0))&&t.push(d):"."!=d&&t.push(d);for(var a=t.join("/"),r="",o=!1,A=!1,u=0,l=a;u<l.length;){var f=l,s=u++,g=f.charCodeAt(s);55296<=g&&56319>=g&&(g=g-55232<<10|1023&f.charCodeAt(s+1));var p=g;65536<=p&&++u;var h=p;switch(h){case 47:if(!o)A=!0;else{o=!1,A&&(r+="/",A=!1),r+=String.fromCodePoint(h)}break;case 58:r+=":",o=!0;break;default:o=!1,A&&(r+="/",A=!1),r+=String.fromCodePoint(h);}}return r};var W=function(e){Error.call(this),this.val=e,Error.captureStackTrace&&Error.captureStackTrace(this,W)};s["js._Boot.HaxeError"]=W,W.__name__=!0,W.wrap=function(e){return e instanceof Error?e:new W(e)},W.__super__=Error,W.prototype=n(Error.prototype,{val:null,__class__:W});var G=function(){};s["js.Boot"]=G,G.__name__=!0,G.getClass=function(e){if(null==e)return null;if(e instanceof Array)return Array;var t=e.__class__;if(null!=t)return t;var n=G.__nativeClassName(e);return null==n?null:G.__resolveNativeClass(n)},G.__string_rec=function(d,a){if(null==d)return"null";if(5<=a.length)return"<...>";var r=typeof d;switch("function"==r&&(d.__name__||d.__ename__)&&(r="object"),r){case"function":return"<function>";case"object":if(d.__enum__){var o=A[d.__enum__],e=o.__constructs__[d._hx_index],n=o[e];return n.__params__?(a+="\t",e+"("+function(){for(var e=[],t=0,i=n.__params__,r,s;!!(t<i.length);)s=i[t],++t,e.push(G.__string_rec(d[s],a));return r=e,r}(this).join(",")+")"):e}if(d instanceof Array){var u="[";a+="\t";for(var l=0,_=d.length,f;l<_;)f=l++,u+=(0<f?",":"")+G.__string_rec(d[f],a);return u+="]",u}var c;try{c=d.toString}catch(e){e instanceof W?e.val:e;return"???"}if(null!=c&&c!=Object.toString&&"function"==typeof c){var g=d.toString();if("[object Object]"!=g)return g}var p="{\n";a+="\t";var h=null!=d.hasOwnProperty,m=null;for(m in d)(!h||d.hasOwnProperty(m))&&"prototype"!=m&&"__class__"!=m&&"__super__"!=m&&"__interfaces__"!=m&&"__properties__"!=m&&(2!=p.length&&(p+=", \n"),p+=a+m+" : "+G.__string_rec(d[m],a));return a=a.substring(1),p+="\n"+a+"}",p;case"string":return d;default:return d+"";}},G.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;if(Object.prototype.hasOwnProperty.call(e,"__interfaces__"))for(var n=e.__interfaces__,d=0,a=n.length;d<a;){var r=d++,i=n[r];if(i==t||G.__interfLoop(i,t))return!0}return G.__interfLoop(e.__super__,t)},G.__instanceof=function(e,t){if(null==t)return!1;switch(t){case Array:return e instanceof Array;case Pn:return"boolean"==typeof e;case On:return null!=e;case Nn:return"number"==typeof e;case Ln:return!("number"!=typeof e)&&(0|e)==e;break;case String:return"string"==typeof e;default:if(!(null!=e))return!1;else if("function"==typeof t){if(G.__downcastCheck(e,t))return!0;}else if("object"==typeof t&&G.__isNativeObj(t)&&e instanceof t)return!0;return t==Rn&&null!=e.__name__||t==Vn&&null!=e.__ename__||null!=e.__enum__&&A[e.__enum__]==t;}},G.__downcastCheck=function(e,t){return!!(e instanceof t)||!!t.__isInterface__&&G.__interfLoop(G.getClass(e),t)},G.__cast=function(e,n){if(null==e||G.__instanceof(e,n))return e;throw new W("Cannot cast "+h.string(e)+" to "+h.string(n))},G.__nativeClassName=function(e){var t=G.__toStr.call(e).slice(8,-1);return"Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t},G.__isNativeObj=function(e){return null!=G.__nativeClassName(e)},G.__resolveNativeClass=function(e){return t[e]};var z=function(){};s["js.lib._ArrayBuffer.ArrayBufferCompat"]=z,z.__name__=!0,z.sliceImpl=function(e,t){var n=new Uint8Array(this,e,null==t?null:t-e),i=new Uint8Array(n.byteLength);return i.set(n),i.buffer};var Y=function(){this.names=["color_wheel"],this.color_wheelDescription={name:"color_wheel",original_height:270,original_width:360,files:["color_wheel.png"],type:"image"},this.color_wheelName="color_wheel",this.color_wheel=null};s["kha._Assets.ImageList"]=Y,Y.__name__=!0,Y.prototype={get:function(e){return p.field(this,e)},color_wheel:null,color_wheelName:null,color_wheelDescription:null,color_wheelLoad:function(e,t){q.loadImage("color_wheel",function(){e()},t,{fileName:"kha/internal/AssetsBuilder.hx",lineNumber:126,className:"kha._Assets.ImageList",methodName:"color_wheelLoad"})},color_wheelUnload:function(){this.color_wheel.unload(),this.color_wheel=null},names:null,__class__:Y};var X=function(){this.names=[]};s["kha._Assets.SoundList"]=X,X.__name__=!0,X.prototype={get:function(e){return p.field(this,e)},names:null,__class__:X};var Q=function(){this.names=[]};s["kha._Assets.BlobList"]=Q,Q.__name__=!0,Q.prototype={get:function(e){return p.field(this,e)},names:null,__class__:Q};var j=function(){this.names=["font_default"],this.font_defaultDescription={name:"font_default",files:["font_default.ttf"],type:"font"},this.font_defaultName="font_default",this.font_default=null};s["kha._Assets.FontList"]=j,j.__name__=!0,j.prototype={get:function(e){return p.field(this,e)},font_default:null,font_defaultName:null,font_defaultDescription:null,font_defaultLoad:function(e,t){q.loadFont("font_default",function(){e()},t,{fileName:"kha/internal/AssetsBuilder.hx",lineNumber:138,className:"kha._Assets.FontList",methodName:"font_defaultLoad"})},font_defaultUnload:function(){this.font_default.unload(),this.font_default=null},names:null,__class__:j};var K=function(){this.names=[]};s["kha._Assets.VideoList"]=K,K.__name__=!0,K.prototype={get:function(e){return p.field(this,e)},names:null,__class__:K};var q=function(){};s["kha.Assets"]=q,q.__name__=!0,q.loadEverything=function(e,t,n,d){for(var a=[Y,X,Q,j,K],r=[q.images,q.sounds,q.blobs,q.fonts,q.videos],s=0,o=0;o<a.length;){var A=a[o];++o;for(var u=0,l=b.getInstanceFields(A);u<l.length;){var _=l[u];++u,m.endsWith(_,"Description")&&(s+=1)}}if(0==s)return void e();for(var f=s,c=function(e,t,i){var d=e.name;switch(e.type){case"blob":q.loadBlob(d,function(){t()},i,{fileName:"kha/Assets.hx",lineNumber:122,className:"kha.Assets",methodName:"loadEverything"});break;case"font":q.loadFont(d,function(){t()},i,{fileName:"kha/Assets.hx",lineNumber:124,className:"kha.Assets",methodName:"loadEverything"});break;case"image":q.loadImage(d,function(){t()},i,{fileName:"kha/Assets.hx",lineNumber:113,className:"kha.Assets",methodName:"loadEverything"});break;case"sound":q.loadSound(d,function(i){null==n||n(e)?i.uncompress(t):t()},i,{fileName:"kha/Assets.hx",lineNumber:115,className:"kha.Assets",methodName:"loadEverything"});break;case"video":q.loadVideo(d,function(){t()},i,{fileName:"kha/Assets.hx",lineNumber:126,className:"kha.Assets",methodName:"loadEverything"});}},g=function(){f-=1,q.progress=1-f/s,0==f&&e()},h=function(e){q.reporter(d,{fileName:"kha/Assets.hx",lineNumber:137,className:"kha.Assets",methodName:"loadEverything"})(e),g()},x=0,S=a.length;x<S;)for(var y=x++,i=a[y],w=r[y],E=0,T=b.getInstanceFields(i),C;E<T.length;)if(C=T[E],++E,!!m.endsWith(C,"Description")){var I=p.field(w,C);null==t||t(I)?c(I,g,h):g()}},q.loadImage=function(e,t,n,i){var d=p.field(q.images,e+"Description");Ae.loadImageFromDescription(d,function(n){q.images[e]=n,t(n)},q.reporter(n,i))},q.loadImageFromPath=function(e,t,n,i,d){Ae.loadImageFromDescription({files:[e],readable:t},n,q.reporter(i,d))},q.get_imageFormats=function(){return Ae.getImageFormats()},q.loadBlob=function(e,t,n,i){var d=p.field(q.blobs,e+"Description");Ae.loadBlobFromDescription(d,function(n){q.blobs[e]=n,t(n)},q.reporter(n,i))},q.loadBlobFromPath=function(e,t,n,i){Ae.loadBlobFromDescription({files:[e]},t,q.reporter(n,i))},q.loadSound=function(e,t,n,i){var d=p.field(q.sounds,e+"Description");Ae.loadSoundFromDescription(d,function(n){q.sounds[e]=n,t(n)},q.reporter(n,i))},q.loadSoundFromPath=function(e,t,n,i){Ae.loadSoundFromDescription({files:[e]},t,q.reporter(n,i))},q.get_soundFormats=function(){return Ae.getSoundFormats()},q.loadFont=function(e,t,n,i){var d=p.field(q.fonts,e+"Description");Ae.loadFontFromDescription(d,function(n){q.fonts[e]=n,t(n)},q.reporter(n,i))},q.loadFontFromPath=function(e,t,n,i){Ae.loadFontFromDescription({files:[e]},t,q.reporter(n,i))},q.get_fontFormats=function(){return["ttf"]},q.loadVideo=function(e,t,n,i){var d=p.field(q.videos,e+"Description");Ae.loadVideoFromDescription(d,function(n){q.videos[e]=n,t(n)},q.reporter(n,i))},q.loadVideoFromPath=function(e,t,n,i){Ae.loadVideoFromDescription({files:[e]},t,q.reporter(n,i))},q.get_videoFormats=function(){return Ae.getVideoFormats()},q.reporter=function(e,t){if(null!=e)return e;var n=w.trace;return function(e){n(e,t)}};var Z=function(){};s["kha.Canvas"]=Z,Z.__name__=!0,Z.__isInterface__=!0,Z.prototype={get_width:null,get_height:null,get_g1:null,get_g2:null,get_g4:null,width:null,height:null,g1:null,g2:null,g4:null,__class__:Z};var J={};s["kha._Color.Color_Impl_"]=J,J.__name__=!0,J.fromValue=function(e){return J._new(e)},J.fromBytes=function(e,t,n,i){return null==i&&(i=255),J._new(i<<24|e<<16|t<<8|n)},J.fromFloats=function(e,t,n,i){return null==i&&(i=1),J._new((0|255*i)<<24|(0|255*e)<<16|(0|255*t)<<8|(0|255*n))},J.fromString=function(e){if((7==e.length||9==e.length)&&35==e.charCodeAt(0)){var t=h.parseInt("0x"+_.substr(e,1,null));return 7==e.length&&(t+=-16777216),J._new(t)}throw new W("Invalid Color string: '"+e+"'")},J._new=function(e){return e},J.get_value=function(e){return e},J.set_value=function(e,t){return e=t,e},J.get_Rb=function(e){return(16711680&e)>>>16},J.get_Gb=function(e){return(65280&e)>>>8},J.get_Bb=function(e){return 255&e},J.get_Ab=function(e){return e>>>24},J.set_Rb=function(e,t){return e=e>>>24<<24|t<<16|(65280&e)>>>8<<8|255&e,t},J.set_Gb=function(e,t){return e=e>>>24<<24|(16711680&e)>>>16<<16|t<<8|255&e,t},J.set_Bb=function(e,t){return e=e>>>24<<24|(16711680&e)>>>16<<16|(65280&e)>>>8<<8|t,t},J.set_Ab=function(e,t){return e=t<<24|(16711680&e)>>>16<<16|(65280&e)>>>8<<8|255&e,t},J.get_R=function(e){return .00392156862745098*((16711680&e)>>>16)},J.get_G=function(e){return .00392156862745098*((65280&e)>>>8)},J.get_B=function(e){return .00392156862745098*(255&e)},J.get_A=function(e){return .00392156862745098*(e>>>24)},J.set_R=function(e,t){return e=(0|255*(.00392156862745098*(e>>>24)))<<24|(0|255*t)<<16|(0|255*(.00392156862745098*((65280&e)>>>8)))<<8|(0|255*(.00392156862745098*(255&e))),t},J.set_G=function(e,t){return e=(0|255*(.00392156862745098*(e>>>24)))<<24|(0|255*(.00392156862745098*((16711680&e)>>>16)))<<16|(0|255*t)<<8|(0|255*(.00392156862745098*(255&e))),t},J.set_B=function(e,t){return e=(0|255*(.00392156862745098*(e>>>24)))<<24|(0|255*(.00392156862745098*((16711680&e)>>>16)))<<16|(0|255*(.00392156862745098*((65280&e)>>>8)))<<8|(0|255*t),t},J.set_A=function(e,t){return e=(0|255*t)<<24|(0|255*(.00392156862745098*((16711680&e)>>>16)))<<16|(0|255*(.00392156862745098*((65280&e)>>>8)))<<8|(0|255*(.00392156862745098*(255&e))),t};var $=function(e,t){this.num=e,this.isPrimary=t};s["kha.Display"]=$,$.__name__=!0,$.init=function(){for(var e=0,t=Krom.displayCount();e<t;){var n=e++;$.displays.push(new $(n,Krom.displayIsPrimary(n)))}},$.get_primary=function(){$.init();for(var e=0,t=$.displays,n;e<t.length;)if(n=t[e],++e,n.isPrimary)return n;return null},$.get_all=function(){return $.init(),$.displays},$.prototype={num:null,isPrimary:null,get_available:function(){return!0},get_name:function(){return"Display"},get_x:function(){return Krom.displayX(this.num)},get_y:function(){return Krom.displayY(this.num)},get_width:function(){return Krom.displayWidth(this.num)},get_height:function(){return Krom.displayHeight(this.num)},get_frequency:function(){return 60},get_pixelsPerInch:function(){return Krom.screenDpi()},get_modes:function(){return[]},__class__:$};var ee=function(e,t,n,i){this.width=e,this.height=t,this.frequency=n,this.bitsPerPixel=i};s["kha.DisplayMode"]=ee,ee.__name__=!0,ee.prototype={width:null,height:null,frequency:null,bitsPerPixel:null,__class__:ee};var te=function(e,t,n){this.bold=e,this.italic=t,this.underlined=n};s["kha.FontStyle"]=te,te.__name__=!0,te.prototype={bold:null,italic:null,underlined:null,getBold:function(){return this.bold},getItalic:function(){return this.italic},getUnderlined:function(){return this.underlined},__class__:te};var ne=function(e,t,n,i){this.window=e,this.graphics1=t,this.graphics2=n,this.graphics4=i};s["kha.Framebuffer"]=ne,ne.__name__=!0,ne.__interfaces__=[Z],ne.prototype={window:null,graphics1:null,graphics2:null,graphics4:null,init:function(e,t,n){this.graphics1=e,this.graphics2=t,this.graphics4=n},get_g1:function(){return this.graphics1},get_g2:function(){return this.graphics2},get_g4:function(){return this.graphics4},width:null,get_width:function(){return pe.windowWidth(this.window)},height:null,get_height:function(){return pe.windowHeight(this.window)},__class__:ne};var ie=function(e,t,n,i,d,a){null==a&&(a=1),null==d&&(d=8),null==i&&(i=16),null==n&&(n=32),null==t&&(t=!0),null==e&&(e=60),this.samplesPerPixel=1,this.stencilBufferBits=8,this.depthBufferBits=16,this.colorBufferBits=32,this.verticalSync=!0,this.frequency=60,this.frequency=e,this.verticalSync=t,this.colorBufferBits=n,this.depthBufferBits=i,this.stencilBufferBits=d,this.samplesPerPixel=a};s["kha.FramebufferOptions"]=ie,ie.__name__=!0,ie.prototype={frequency:null,verticalSync:null,colorBufferBits:null,depthBufferBits:null,stencilBufferBits:null,samplesPerPixel:null,__class__:ie};var de=function(){};s["kha.Resource"]=de,de.__name__=!0,de.__isInterface__=!0,de.prototype={unload:null,__class__:de};var ae=function(e){this.pixels=null,this.texture_=e};s["kha.Image"]=ae,ae.__name__=!0,ae.__interfaces__=[de,Z],ae.getRenderTargetFormat=function(e){return 0===e?0:1===e?5:2===e?3:3===e?4:4===e?1:5===e?2:6===e?6:0},ae.getDepthBufferBits=function(e){return 0===e?-1:1===e?24:2===e?24:3===e?24:4===e?32:5===e?16:void 0},ae.getStencilBufferBits=function(e){return 0===e?-1:1===e?-1:2===e?8:3===e?8:4===e?8:5===e?0:void 0},ae.getTextureFormat=function(e){return 0===e?0:2===e?3:4===e?4:5===e?5:6===e?7:1},ae._fromTexture=function(e){return new ae(e)},ae.fromBytes=function(e,t,n,i){null==i&&(i=0);var d=new ae(null);return d.format=i,d.texture_=Krom.createTextureFromBytes(e.b.bufferValue,t,n,ae.getTextureFormat(i),!0),d},ae.fromBytes3D=function(e,t,n,i,d){null==d&&(d=0);var a=new ae(null);return a.format=d,a.texture_=Krom.createTextureFromBytes3D(e.b.bufferValue,t,n,i,ae.getTextureFormat(d),!0),a},ae.fromEncodedBytes=function(e,t,n,i,d){null==d&&(d=!1);var a=new ae(null);a.texture_=Krom.createTextureFromEncodedBytes(e.b.bufferValue,t,d),n(a)},ae.create=function(e,t,n){null==n&&(n=0);var i=new ae(null);return i.format=n,i.texture_=Krom.createTexture(e,t,ae.getTextureFormat(n)),i},ae.create3D=function(e,t,n,i){null==i&&(i=0);var d=new ae(null);return d.format=i,d.texture_=Krom.createTexture3D(e,t,n,ae.getTextureFormat(i)),d},ae.createRenderTarget=function(e,t,n,i,d,a){null==a&&(a=0),null==d&&(d=1),null==i&&(i=0),null==n&&(n=0);var r=new ae(null);return r.format=n,r.renderTarget_=Krom.createRenderTarget(e,t,ae.getDepthBufferBits(i),ae.getRenderTargetFormat(n),ae.getStencilBufferBits(i),a),r},ae.get_maxSize=function(){return 4096},ae.get_nonPow2Supported=function(){return!0},ae.renderTargetsInvertedY=function(){return Krom.renderTargetsInvertedY()},ae.formatByteSize=function(e){return 0===e?4:1===e?1:2===e?16:3===e?2:4===e?8:5===e?4:6===e?2:4},ae.prototype={texture_:null,renderTarget_:null,format:null,readable:null,graphics1:null,graphics2:null,graphics4:null,isOpaque:function(){return!1},at:function(){return-16777216},unload:function(){Krom.unloadImage(this),this.texture_=null,this.renderTarget_=null},lock:function(e){return null==e&&(e=0),L.ofData(Krom.lockTexture(this.texture_,e))},unlock:function(){Krom.unlockTexture(this.texture_)},pixels:null,getPixels:function(){return null==this.renderTarget_?L.ofData(Krom.getTexturePixels(this.texture_)):(null==this.pixels&&(this.pixels=new L(new ArrayBuffer(ae.formatByteSize(this.format)*this.get_width()*this.get_height()))),Krom.getRenderTargetPixels(this.renderTarget_,this.pixels.b.bufferValue),this.pixels)},generateMipmaps:function(e){null==this.texture_?Krom.generateRenderTargetMipmaps(this.renderTarget_,e):Krom.generateTextureMipmaps(this.texture_,e)},setMipmaps:function(e){Krom.setMipmaps(this.texture_,e)},setDepthStencilFrom:function(e){Krom.setDepthStencilFrom(this.renderTarget_,e.renderTarget_)},clear:function(e,t,n,i,d,a,r){Krom.clearTexture(this.texture_,e,t,n,i,d,a,r)},width:null,get_width:function(){return null==this.texture_?this.renderTarget_.width:this.texture_.width},height:null,get_height:function(){return null==this.texture_?this.renderTarget_.height:this.texture_.height},depth:null,get_depth:function(){return null==this.texture_?1:this.texture_.depth},realWidth:null,get_realWidth:function(){return null==this.texture_?this.renderTarget_.width:this.texture_.realWidth},realHeight:null,get_realHeight:function(){return null==this.texture_?this.renderTarget_.height:this.texture_.realHeight},g1:null,get_g1:function(){return null==this.graphics1&&(this.graphics1=new At(this)),this.graphics1},g2:null,get_g2:function(){return null==this.graphics2&&(this.graphics2=new Dt(this)),this.graphics2},g4:null,get_g4:function(){return null==this.graphics4&&(this.graphics4=new an(this)),this.graphics4},__class__:ae};var re=function(){};s["kha.AlignedQuad"]=re,re.__name__=!0,re.prototype={x0:null,y0:null,s0:null,t0:null,x1:null,y1:null,s1:null,t1:null,xadvance:null,__class__:re};var se=function(e,t,n,i,d,a,r,s){this.mySize=e,this.width=d,this.height=a,this.chars=r,this.baseline=t;for(var o=0;o<r.length;){var A=r[o];++o,A.yoff+=this.baseline}this.texture=ae.fromBytes(s.toBytes(),d,a,1)};s["kha.KravurImage"]=se,se.__name__=!0,se.prototype={mySize:null,chars:null,texture:null,width:null,height:null,baseline:null,getTexture:function(){return this.texture},getBakedQuad:function(e,t,n,i){if(t>=this.chars.length)return null;var d=1/this.width,a=1/this.height,r=this.chars[t];if(null==r)return null;var s=Math.round(n+r.xoff),o=Math.round(i+r.yoff);return e.x0=s,e.y0=o,e.x1=s+r.x1-r.x0,e.y1=o+r.y1-r.y0,e.s0=r.x0*d,e.t0=r.y0*a,e.s1=r.x1*d,e.t1=r.y1*a,e.xadvance=r.xadvance,e},getCharWidth:function(e){if(0==this.chars.length)return 0;var t=se.charBlocks[0];if(e<t)return this.chars[0].xadvance;for(var n=1,d=0|se.charBlocks.length/2;n<d;){var a=n++,i=se.charBlocks[2*a-1],r=se.charBlocks[2*a];e>r-1&&(t+=r-1-i)}return e-t>=this.chars.length?this.chars[0].xadvance:this.chars[e-t].xadvance},getHeight:function(){return this.mySize},stringWidth:function(e){for(var t=0,n=0,i=e.length;n<i;){var d=n++;t+=this.getCharWidth(_.cca(e,d))}return t},charactersWidth:function(e,t,n){for(var d=0,a=t;a<t+n;){var r=a++;d+=this.getCharWidth(e[r])}return d},getBaselinePosition:function(){return this.baseline},__class__:se};var oe=function(e){this.images=new C,this.blob=e};s["kha.Kravur"]=oe,oe.__name__=!0,oe.__interfaces__=[de],oe.fromBytes=function(e){return new oe(dn.fromBytes(e))},oe.prototype={oldGlyphs:null,blob:null,images:null,_get:function(e){var t=ot.fontGlyphs;if(t!=this.oldGlyphs){this.oldGlyphs=t,se.charBlocks=[t[0]];for(var n=se.charBlocks[0]+1,d=1,a=t.length;d<a;){var r=d++;t[r]==n?++n:(se.charBlocks.push(t[r-1]),se.charBlocks.push(t[r]),n=t[r]+1)}se.charBlocks.push(t[t.length-1])}var i=1e4*e+t.length;if(!this.images.h.hasOwnProperty(i)){for(var s=64,o=32,A=Array(t.length),u=A,l=0,_=u.length,f;l<_;)f=l++,u[f]=new pt;for(var c=null,g=-1;0>=g;)o<s?o*=2:s*=2,c=dn.alloc(s*o),g=It.stbtt_BakeFontBitmap(this.blob,0,e,c,s,o,t,u);var p=new St;It.stbtt_InitFont(p,this.blob,0);var h=It.stbtt_GetFontVMetrics(p),m=It.stbtt_ScaleForPixelHeight(p,e),b=Math.round(h.ascent*m),x=Math.round(h.descent*m),S=Math.round(h.lineGap*m),y=new se(0|e,b,x,S,s,o,u,c);return this.images.h[i]=y,y}return this.images.h[i]},height:function(e){return this._get(e).getHeight()},width:function(e,t){return this._get(e).stringWidth(t)},widthOfCharacters:function(e,t,n,i){return this._get(e).charactersWidth(t,n,i)},baseline:function(e){return this._get(e).getBaselinePosition()},unload:function(){this.blob=null,this.images=null},__class__:oe};var Ae=function(){};s["kha.LoaderImpl"]=Ae,Ae.__name__=!0,Ae.getImageFormats=function(){return["png","jpg"]},Ae.loadImageFromDescription=function(e,t){var n=Object.prototype.hasOwnProperty.call(e,"readable")&&e.readable;t(ae._fromTexture(Krom.loadImage(e.files[0],n)))},Ae.getSoundFormats=function(){return["wav","ogg"]},Ae.loadSoundFromDescription=function(e,t){t(new rn(L.ofData(Krom.loadSound(e.files[0]))))},Ae.getVideoFormats=function(){return["webm"]},Ae.loadVideoFromDescription=function(){},Ae.loadBlobFromDescription=function(e,t){t(new dn(L.ofData(Krom.loadBlob(e.files[0]))))},Ae.loadFontFromDescription=function(e,t,n){Ae.loadBlobFromDescription(e,function(e){t(new oe(e))},n)};var ue=function(){};s["kha.TimeTask"]=ue,ue.__name__=!0,ue.prototype={task:null,start:null,period:null,duration:null,next:null,id:null,groupId:null,active:null,paused:null,__class__:ue};var le=function(e,t,n){this.task=e,this.priority=t,this.id=n,this.active=!0,this.paused=!1};s["kha.FrameTask"]=le,le.__name__=!0,le.prototype={task:null,priority:null,id:null,active:null,paused:null,__class__:le};var _e=function(){};s["kha.Scheduler"]=_e,_e.__name__=!0,_e.init=function(){_e.deltas=[];for(var e=0,t=_e.DIF_COUNT;e<t;){var n=e++;_e.deltas[n]=0}_e.stopped=!0,_e.frame_tasks_sorted=!0,_e.current=_e.lastTime=_e.realTime(),_e.currentFrameTaskId=0,_e.currentTimeTaskId=0,_e.currentGroupId=0,_e.timeTasks=[],_e.pausedTimeTasks=[],_e.outdatedTimeTasks=[],_e.timeTasksScratchpad=[],_e.frameTasks=[],_e.toDeleteFrame=[]},_e.start=function(e){null==e&&(e=!1),_e.vsync=be.get(0).get_vSynced();var t=$.get_primary().get_frequency();57<=t&&63>=t&&(t=60),_e.onedifhz=1/t,_e.stopped=!1,_e.resetTime(),_e.lastTime=_e.realTime()-_e.startTime;for(var n=0,d=_e.DIF_COUNT;n<d;){var a=n++;_e.deltas[a]=0}if(e){for(var i=0,r=_e.timeTasks;i<r.length;){var s=r[i];++i,s.paused=!1}for(var o=0,A=_e.frameTasks;o<A.length;){var u=A[o];++o,u.paused=!1}}},_e.stop=function(){_e.stopped=!0},_e.isStopped=function(){return _e.stopped},_e.warpTimeTasksBack=function(e,t){for(var n=0,i;n<t.length;)if(i=t[n],++n,i.start>=e)i.next=i.start;else if(0<i.period){var d=e-i.start,a=Math.ceil(d/i.period);i.next=i.start+a*i.period}},_e.warp=function(e){if(e<_e.lastTime){_e.current=e,_e.lastTime=e,_e.warpTimeTasksBack(e,_e.outdatedTimeTasks),_e.warpTimeTasksBack(e,_e.timeTasks);for(var t=0,n=_e.outdatedTimeTasks;t<n.length;){var i=n[t];++t,i.next>=e&&_e.timeTasksScratchpad.push(i)}for(var d=0,a=_e.timeTasksScratchpad;d<a.length;){var r=a[d];++d,_.remove(_e.outdatedTimeTasks,r)}for(var s=0,o=_e.timeTasksScratchpad;s<o.length;){var A=o[s];++s,_e.insertSorted(_e.timeTasks,A)}for(;0<_e.timeTasksScratchpad.length;)_.remove(_e.timeTasksScratchpad,_e.timeTasksScratchpad[0])}else e>_e.lastTime&&(_e.startTime-=e-_e.lastTime,_e.current=e,_e.lastTime=e,_e.executeTimeTasks(e))},_e.executeFrame=function(){var e=_e.realTime()-_e.startTime,t=e-_e.lastTime,n=_e.current;if(0<=t){if(!(null==yn.the()))n+=t;else if(t>_e.maxframetime)_e.startTime+=t-_e.maxframetime,t=_e.maxframetime,n+=t;else if(_e.vsync){for(var d=_e.onedifhz;d<t-_e.onedifhz;)d+=_e.onedifhz;t=d;for(var a=0,r=_e.DIF_COUNT-2,s;a<r;)s=a++,t+=_e.deltas[s],_e.deltas[s]=_e.deltas[s+1];t+=_e.deltas[_e.DIF_COUNT-2],t/=_e.DIF_COUNT,_e.deltas[_e.DIF_COUNT-2]=d,n+=t}else{for(var o=0,A=_e.DIF_COUNT-1,u;o<A;)u=o++,_e.deltas[u]=_e.deltas[u+1];_e.deltas[_e.DIF_COUNT-1]=t;for(var l=0,f=0,c=_e.DIF_COUNT,g;f<c;)g=f++,l+=_e.deltas[g];l/=_e.DIF_COUNT,n+=l}_e.lastTime=n,_e.stopped||(_e.current=n);for(var p=0,h=_e.pausedTimeTasks;p<h.length;){var m=h[p];++p,m.next+=t}if(_e.stopped)for(var b=0,x=_e.timeTasks,S;b<x.length;)S=x[b],++b,S.next+=t;_e.executeTimeTasks(n);for(var y=0,w=_e.outdatedTimeTasks;y<w.length;){var E=w[y];++y,E.next<n-10&&_e.timeTasksScratchpad.push(E)}for(var T=0,C=_e.timeTasksScratchpad;T<C.length;){var I=C[T];++T,_.remove(_e.outdatedTimeTasks,I)}for(;0<_e.timeTasksScratchpad.length;)_.remove(_e.timeTasksScratchpad,_e.timeTasksScratchpad[0])}_e.sortFrameTasks();for(var B=0,k=_e.frameTasks;B<k.length;){var v=k[B];++B,_e.stopped||v.paused||!v.active||v.task()||(v.active=!1)}for(var L=0,O=_e.frameTasks;L<O.length;){var N=O[L];++L,N.active||_e.toDeleteFrame.push(N)}for(;0<_e.toDeleteFrame.length;)_.remove(_e.frameTasks,_e.toDeleteFrame.pop())},_e.executeTimeTasks=function(e){for(;0<_e.timeTasks.length&&(_e.activeTimeTask=_e.timeTasks[0],_e.activeTimeTask.next<=e);)_e.activeTimeTask.next+=_e.activeTimeTask.period,_.remove(_e.timeTasks,_e.activeTimeTask),_e.activeTimeTask.active&&_e.activeTimeTask.task()?0<_e.activeTimeTask.period&&(0==_e.activeTimeTask.duration||_e.activeTimeTask.duration>=_e.activeTimeTask.start+_e.activeTimeTask.next)?_e.insertSorted(_e.timeTasks,_e.activeTimeTask):_e.archiveTimeTask(_e.activeTimeTask,e):(_e.activeTimeTask.active=!1,_e.archiveTimeTask(_e.activeTimeTask,e));_e.activeTimeTask=null},_e.archiveTimeTask=function(){},_e.time=function(){return _e.current},_e.realTime=function(){return pe.get_time()},_e.resetTime=function(){var e=pe.get_time(),t=e-_e.startTime;_e.startTime=e;for(var n=0,d=_e.timeTasks;n<d.length;){var a=d[n];++n,a.start-=t,a.next-=t}for(var r=0,s=_e.DIF_COUNT;r<s;){var o=r++;_e.deltas[o]=0}_e.current=0,_e.lastTime=0},_e.addBreakableFrameTask=function(e,t){return _e.frameTasks.push(new le(e,t,++_e.currentFrameTaskId)),_e.frame_tasks_sorted=!1,_e.currentFrameTaskId},_e.addFrameTask=function(e,t){return _e.addBreakableFrameTask(function(){return e(),!0},t)},_e.pauseFrameTask=function(e,t){for(var n=0,i=_e.frameTasks,d;n<i.length;)if(d=i[n],++n,d.id==e){d.paused=t;break}},_e.removeFrameTask=function(e){for(var t=0,n=_e.frameTasks,i;t<n.length;)if(i=n[t],++t,i.id==e){i.active=!1;break}},_e.generateGroupId=function(){return++_e.currentGroupId},_e.addBreakableTimeTaskToGroup=function(e,n,i,d,a){null==a&&(a=0),null==d&&(d=0);var r=new ue;return r.active=!0,r.task=n,r.id=++_e.currentTimeTaskId,r.groupId=e,r.start=_e.current+i,r.period=0,0!=d&&(r.period=d),r.duration=0,0!=a&&(r.duration=r.start+a),r.next=r.start,_e.insertSorted(_e.timeTasks,r),r.id},_e.addTimeTaskToGroup=function(e,t,n,i,d){return null==d&&(d=0),null==i&&(i=0),_e.addBreakableTimeTaskToGroup(e,function(){return t(),!0},n,i,d)},_e.addBreakableTimeTask=function(e,t,n,i){return null==i&&(i=0),null==n&&(n=0),_e.addBreakableTimeTaskToGroup(0,e,t,n,i)},_e.addTimeTask=function(e,t,n,i){return null==i&&(i=0),null==n&&(n=0),_e.addTimeTaskToGroup(0,e,t,n,i)},_e.getTimeTask=function(e){if(null!=_e.activeTimeTask&&_e.activeTimeTask.id==e)return _e.activeTimeTask;for(var t=0,n=_e.timeTasks,i;t<n.length;)if(i=n[t],++t,i.id==e)return i;for(var d=0,a=_e.pausedTimeTasks,r;d<a.length;)if(r=a[d],++d,r.id==e)return r;return null},_e.pauseTimeTask=function(e,t){var n=_e.getTimeTask(e);null!=n&&_e.pauseRunningTimeTask(n,t),null!=_e.activeTimeTask&&_e.activeTimeTask.id==e&&(_e.activeTimeTask.paused=t)},_e.pauseRunningTimeTask=function(e,t){e.paused=t,t?(_.remove(_e.timeTasks,e),_e.pausedTimeTasks.push(e)):(_e.insertSorted(_e.timeTasks,e),_.remove(_e.pausedTimeTasks,e))},_e.pauseTimeTasks=function(e,t){for(var n=0,i=_e.timeTasks;n<i.length;){var d=i[n];++n,d.groupId==e&&_e.pauseRunningTimeTask(d,t)}null!=_e.activeTimeTask&&_e.activeTimeTask.groupId==e&&(_e.activeTimeTask.paused=t)},_e.removeTimeTask=function(e){var t=_e.getTimeTask(e);null!=t&&(t.active=!1,_.remove(_e.timeTasks,t))},_e.removeTimeTasks=function(e){for(var t=0,n=_e.timeTasks;t<n.length;){var i=n[t];++t,i.groupId==e&&(i.active=!1,_e.timeTasksScratchpad.push(i))}for(var d=0,a=_e.timeTasksScratchpad;d<a.length;){var r=a[d];++d,_.remove(_e.timeTasks,r)}for(;0<_e.timeTasksScratchpad.length;)_.remove(_e.timeTasksScratchpad,_e.timeTasksScratchpad[0]);null!=_e.activeTimeTask&&_e.activeTimeTask.groupId==e&&(_e.activeTimeTask.active=!1)},_e.numTasksInSchedule=function(){return _e.timeTasks.length+_e.frameTasks.length},_e.insertSorted=function(e,t){for(var n=0,d=e.length;n<d;){var a=n++;if(e[a].next>t.next)return void e.splice(a,0,t)}e.push(t)},_e.sortFrameTasks=function(){_e.frame_tasks_sorted||(_e.frameTasks.sort(function(e,t){return e.priority>t.priority?1:e.priority<t.priority?-1:0}),_e.frame_tasks_sorted=!0)};var fe=function(){};s["kha.Shaders"]=fe,fe.__name__=!0,fe.init=function(){var e=[],t=p.field(fe,"painter_colored_fragData0"),n=T.run(t);e.push(dn.fromBytes(n)),fe.painter_colored_frag=new vt(e,["painter-colored.frag.d3d11"]);var i=[],d=p.field(fe,"painter_colored_vertData0"),a=T.run(d);i.push(dn.fromBytes(a)),fe.painter_colored_vert=new Qt(i,["painter-colored.vert.d3d11"]);var r=[],s=p.field(fe,"painter_image_fragData0"),o=T.run(s);r.push(dn.fromBytes(o)),fe.painter_image_frag=new vt(r,["painter-image.frag.d3d11"]);var A=[],u=p.field(fe,"painter_image_vertData0"),l=T.run(u);A.push(dn.fromBytes(l)),fe.painter_image_vert=new Qt(A,["painter-image.vert.d3d11"]);var _=[],f=p.field(fe,"painter_text_fragData0"),c=T.run(f);_.push(dn.fromBytes(c)),fe.painter_text_frag=new vt(_,["painter-text.frag.d3d11"]);var g=[],h=p.field(fe,"painter_text_vertData0"),m=T.run(h);g.push(dn.fromBytes(m)),fe.painter_text_vert=new Qt(g,["painter-text.vert.d3d11"]);var b=[],x=p.field(fe,"painter_video_fragData0"),S=T.run(x);b.push(dn.fromBytes(S)),fe.painter_video_frag=new vt(b,["painter-video.frag.d3d11"]);var y=[],w=p.field(fe,"painter_video_vertData0"),E=T.run(w);y.push(dn.fromBytes(E)),fe.painter_video_vert=new Qt(y,["painter-video.vert.d3d11"])};var ce=function(){this.sampleRate=0,this.channels=0,this.length=0};s["kha.Sound"]=ce,ce.__name__=!0,ce.__interfaces__=[de],ce.prototype={compressedData:null,uncompressedData:null,length:null,channels:null,sampleRate:null,uncompress:function(e){if(null!=this.uncompressedData)return void e();var t=new V,n=De.readAll(this.compressedData,t,!0),d=t.getBytes(),a=0|d.length/4;if(1==n.channel){this.length=a/Be.samplesPerSecond;var r=new Float32Array(2*a);this.uncompressedData=r;for(var s=0;s<a;){var o=s++;this.uncompressedData[2*o]=d.getFloat(4*o),this.uncompressedData[2*o+1]=d.getFloat(4*o)}}else{this.length=a/2/Be.samplesPerSecond;var i=new Float32Array(a);this.uncompressedData=i;for(var A=0;A<a;){var u=A++;this.uncompressedData[u]=d.getFloat(4*u)}}this.channels=n.channel,this.sampleRate=n.sampleRate,this.compressedData=null,e()},unload:function(){this.compressedData=null,this.uncompressedData=null},__class__:ce};var ge=function(e,t,n,i,d){null==n&&(n=-1),null==t&&(t=-1),null==e&&(e="Kha"),this.framebuffer=null,this.window=null,this.height=-1,this.width=-1,this.title="Kha",this.title=e,this.window=null==i?new Se(null,null,null,null,null,null,null,null,null):i,0<t?(this.window.width=t,this.width=t):this.width=this.window.width,0<n?(this.window.height=n,this.height=n):this.height=this.window.height,null==this.window.title&&(this.window.title=e),this.framebuffer=null==d?new ie(null,null,null,null,null,null):d};s["kha.SystemOptions"]=ge,ge.__name__=!0,ge.prototype={title:null,width:null,height:null,window:null,framebuffer:null,__class__:ge};var pe=function(){};s["kha.System"]=pe,pe.__name__=!0,pe.init=function(e,t){var n=0;e.resizable&&(n|=1),e.maximizable&&(n|=4),e.minimizable&&(n|=2);var i=new ge(e.title,e.width,e.height,new Se(null,null,null,null,null,null,null,n,e.windowMode),new ie(null,e.vSync,null,null,null,e.samplesPerPixel));pe.start(i,function(){t()})},pe.start=function(e,t){pe.theTitle=e.title,he.init(e,t)},pe.get_title=function(){return pe.theTitle},pe.notifyOnRender=function(e,t){null==t&&(t=0),pe.renderListeners.push(function(n){t<n.length&&e(n[t])})},pe.notifyOnFrames=function(e){pe.renderListeners.push(e)},pe.removeFramesListener=function(e){_.remove(pe.renderListeners,e)},pe.notifyOnApplicationState=function(e,t,n,i,d){null!=e&&pe.foregroundListeners.push(e),null!=t&&pe.resumeListeners.push(t),null!=n&&pe.pauseListeners.push(n),null!=i&&pe.backgroundListeners.push(i),null!=d&&pe.shutdownListeners.push(d)},pe.notifyOnDropFiles=function(e){pe.dropFilesListeners.push(e)},pe.removeDropListerer=function(e){_.remove(pe.dropFilesListeners,e)},pe.notifyOnCutCopyPaste=function(e,t,n){pe.cutListener=e,pe.copyListener=t,pe.pasteListener=n},pe.notifyOnLoginLogout=function(e,t){pe.loginListener=e,pe.logoutListener=t},pe.login=function(){he.login()},pe.render=function(e){for(var t=0,n=pe.renderListeners;t<n.length;){var i=n[t];++t,i(e)}},pe.foreground=function(){for(var e=0,t=pe.foregroundListeners;e<t.length;){var n=t[e];++e,n()}},pe.resume=function(){for(var e=0,t=pe.resumeListeners;e<t.length;){var n=t[e];++e,n()}},pe.pause=function(){for(var e=0,t=pe.pauseListeners;e<t.length;){var n=t[e];++e,n()}},pe.background=function(){for(var e=0,t=pe.backgroundListeners;e<t.length;){var n=t[e];++e,n()}},pe.shutdown=function(){for(var e=0,t=pe.shutdownListeners;e<t.length;){var n=t[e];++e,n()}},pe.dropFiles=function(e){for(var t=0,n=pe.dropFilesListeners;t<n.length;){var i=n[t];++t,i(e)}},pe.get_time=function(){return he.getTime()},pe.windowWidth=function(e){return null==e&&(e=0),be.get(e).get_width()},pe.windowHeight=function(e){return null==e&&(e=0),be.get_all()[e].get_height()},pe.get_screenRotation=function(){return 0},pe.get_systemId=function(){return he.getSystemId()},pe.vibrate=function(e){he.vibrate(e)},pe.get_language=function(){return he.getLanguage()},pe.stop=function(){return he.requestShutdown()},pe.loadUrl=function(e){he.loadUrl(e)},pe.canSwitchFullscreen=function(){return!0},pe.isFullscreen=function(){return!(1!=be.get(0).get_mode())||2==be.get(0).get_mode()},pe.requestFullscreen=function(){be.get(0).set_mode(1)},pe.exitFullscreen=function(){be.get(0).set_mode(0)},pe.notifyOnFullscreenChange=function(){},pe.removeFullscreenListener=function(){},pe.changeResolution=function(){},pe.requestShutdown=function(){pe.stop()},pe.get_vsync=function(){return be.get(0).get_vSynced()},pe.get_refreshRate=function(){return $.get_primary().get_frequency()},pe.screenDpi=function(){return $.get_primary().get_pixelsPerInch()},pe.safeZone=function(){return he.safeZone()},pe.automaticSafeZone=function(){return he.automaticSafeZone()},pe.setSafeZone=function(e){he.setSafeZone(e)},pe.unlockAchievement=function(e){he.unlockAchievement(e)};var he=function(){};s["kha.SystemImpl"]=he,he.__name__=!0,he.renderCallback=function(){_e.executeFrame(),pe.render([he.framebuffer])},he.dropFilesCallback=function(e){pe.dropFiles(e)},he.copyCallback=function(){return null==pe.copyListener?null:pe.copyListener()},he.cutCallback=function(){return null==pe.cutListener?null:pe.cutListener()},he.pasteCallback=function(e){null!=pe.pasteListener&&pe.pasteListener(e)},he.foregroundCallback=function(){pe.foreground()},he.resumeCallback=function(){pe.resume()},he.pauseCallback=function(){pe.pause()},he.backgroundCallback=function(){pe.background()},he.shutdownCallback=function(){pe.shutdown()},he.keyboardDownCallback=function(e){he.keyboard.sendDownEvent(e)},he.keyboardUpCallback=function(e){he.keyboard.sendUpEvent(e)},he.keyboardPressCallback=function(e){he.keyboard.sendPressEvent(String.fromCodePoint(e))},he.mouseDownCallback=function(e,t,n){he.mouse.sendDownEvent(0,e,t,n)},he.mouseUpCallback=function(e,t,n){he.mouse.sendUpEvent(0,e,t,n)},he.mouseMoveCallback=function(e,t,n,i){he.mouse.sendMoveEvent(0,e,t,n,i)},he.mouseWheelCallback=function(e){he.mouse.sendWheelEvent(0,e)},he.penDownCallback=function(e,t,n){he.pen.sendDownEvent(0,e,t,n)},he.penUpCallback=function(e,t,n){he.pen.sendUpEvent(0,e,t,n)},he.penMoveCallback=function(e,t,n){he.pen.sendMoveEvent(0,e,t,n)},he.gamepadAxisCallback=function(e,t,n){he.gamepads[e].sendAxisEvent(t,n)},he.gamepadButtonCallback=function(e,t,n){he.gamepads[e].sendButtonEvent(t,n)},he.audioCallback=function(e){Be._callCallback(e);var t=Be.buffer;Krom.writeAudioBuffer(t.data.buffer,e)},he.init=function(e,t){Krom.init(e.title,e.width,e.height,e.framebuffer.samplesPerPixel,e.framebuffer.verticalSync,e.window.mode,e.window.windowFeatures,3),he.start=Krom.getTime(),w.trace=function(e,t){var n=null==t?h.string(e):t.className+":"+t.lineNumber+": "+h.string(e);Krom.log(_.substr(n,0,511))},new be(0),_e.init(),fe.init();var n=new an;he.framebuffer=new ne(0,null,null,n),he.framebuffer.init(new At(he.framebuffer),new Dt(he.framebuffer),n),Krom.setCallback(he.renderCallback),Krom.setDropFilesCallback(he.dropFilesCallback),Krom.setCutCopyPasteCallback(he.cutCallback,he.copyCallback,he.pasteCallback),Krom.setApplicationStateCallback(he.foregroundCallback,he.resumeCallback,he.pauseCallback,he.backgroundCallback,he.shutdownCallback),he.keyboard=new Jt,he.mouse=new en,he.pen=new tn,he.gamepads=[];for(var d=0,a=he.maxGamepads;d<a;){var r=d++;he.gamepads[r]=new Kt(r)}Krom.setKeyboardDownCallback(he.keyboardDownCallback),Krom.setKeyboardUpCallback(he.keyboardUpCallback),Krom.setKeyboardPressCallback(he.keyboardPressCallback),Krom.setMouseDownCallback(he.mouseDownCallback),Krom.setMouseUpCallback(he.mouseUpCallback),Krom.setMouseMoveCallback(he.mouseMoveCallback),Krom.setMouseWheelCallback(he.mouseWheelCallback),Krom.setPenDownCallback(he.penDownCallback),Krom.setPenUpCallback(he.penUpCallback),Krom.setPenMoveCallback(he.penMoveCallback),Krom.setGamepadAxisCallback(he.gamepadAxisCallback),Krom.setGamepadButtonCallback(he.gamepadButtonCallback),Be._init(),ke._init(),Krom.setAudioCallback(he.audioCallback),_e.start(),t(be.get(0))},he.initEx=function(){},he.translateWindowMode=function(e){if(null==e)return 0;return 0===e?0:1===e?1:2===e?2:void 0},he.getScreenRotation=function(){return 0},he.getTime=function(){return Krom.getTime()-he.start},he.getVsync=function(){return!0},he.getRefreshRate=function(){return 60},he.getSystemId=function(){return Krom.systemId()},he.vibrate=function(){},he.getLanguage=function(){return"en"},he.requestShutdown=function(){return Krom.requestShutdown(),!0},he.getMouse=function(){return he.mouse},he.getPen=function(){return he.pen},he.getKeyboard=function(){return he.keyboard},he.lockMouse=function(){if(!he.isMouseLocked()){Krom.lockMouse();for(var e=0,t=he.mouseLockListeners;e<t.length;){var n=t[e];++e,n()}}},he.unlockMouse=function(){if(he.isMouseLocked()){Krom.unlockMouse();for(var e=0,t=he.mouseLockListeners;e<t.length;){var n=t[e];++e,n()}}},he.canLockMouse=function(){return Krom.canLockMouse()},he.isMouseLocked=function(){return Krom.isMouseLocked()},he.notifyOfMouseLockChange=function(e){he.canLockMouse()&&null!=e&&he.mouseLockListeners.push(e)},he.removeFromMouseLockChange=function(e){he.canLockMouse()&&null!=e&&_.remove(he.mouseLockListeners,e)},he.hideSystemCursor=function(){Krom.showMouse(!1)},he.showSystemCursor=function(){Krom.showMouse(!0)},he.unload=function(){},he.canSwitchFullscreen=function(){return!1},he.isFullscreen=function(){return!1},he.requestFullscreen=function(){},he.exitFullscreen=function(){},he.notifyOfFullscreenChange=function(){},he.removeFromFullscreenChange=function(){},he.changeResolution=function(){},he.setKeepScreenOn=function(){},he.loadUrl=function(){},he.getGamepadId=function(){return"unkown"},he.safeZone=function(){return 1},he.login=function(){},he.automaticSafeZone=function(){return!0},he.setSafeZone=function(){},he.unlockAchievement=function(){};var me=function(){};s["kha.Video"]=me,me.__name__=!0,me.__interfaces__=[de],me.prototype={width:function(){return 100},height:function(){return 100},play:function(e){null==e&&(e=!1)},pause:function(){},stop:function(){},getLength:function(){return 0},getCurrentPos:function(){return 0},get_position:function(){return 0},set_position:function(){return 0},getVolume:function(){return 1},setVolume:function(){},isFinished:function(){return this.getCurrentPos()>=this.getLength()},unload:function(){},__class__:me};var be=function(e){this.num=e,be.windows.push(this)};s["kha.Window"]=be,be.__name__=!0,be.create=function(){return null},be.destroy=function(){},be.get=function(e){return be.windows[e]},be.get_all=function(){return be.windows},be.prototype={num:null,windowTitle:null,resize:function(){},move:function(){},changeWindowFeatures:function(){},changeFramebuffer:function(){},get_x:function(){return 0},set_x:function(){return 0},get_y:function(){return 0},set_y:function(){return 0},get_width:function(){return Krom.windowWidth(this.num)},set_width:function(){return 800},get_height:function(){return Krom.windowHeight(this.num)},set_height:function(){return 600},get_mode:function(){return 0},set_mode:function(){return 0},get_visible:function(){return!0},set_visible:function(){return!0},get_title:function(){return this.windowTitle},set_title:function(e){return Krom.setWindowTitle(this.num,e),this.windowTitle=e,this.windowTitle},notifyOnResize:function(){},get_vSynced:function(){return!0},__class__:be};var xe={};s["kha._WindowOptions.WindowFeatures_Impl_"]=xe,xe.__name__=!0,xe._new=function(e){return e};var Se=function(e,t,n,i,d,a,r,s,o){null==o&&(o=0),null==r&&(r=!0),null==a&&(a=-1),null==d&&(d=600),null==i&&(i=800),null==n&&(n=-1),null==t&&(t=-1),this.mode=0,this.windowFeatures=7,this.visible=!0,this.display=-1,this.height=600,this.width=800,this.y=-1,this.x=-1,this.title=null,this.title=e,this.x=t,this.y=n,this.width=i,this.height=d,this.display=a,this.visible=r,this.windowFeatures=null==s?7:s,this.mode=o};s["kha.WindowOptions"]=Se,Se.__name__=!0,Se.prototype={title:null,x:null,y:null,width:null,height:null,display:null,visible:null,windowFeatures:null,mode:null,__class__:Se};var ye={};s["kha.arrays._Float32Array.Float32Array_Impl_"]=ye,ye.__name__=!0,ye._new=function(e){var t=new Float32Array(e);return t},ye.get_buffer=function(e){return e.buffer},ye.get_length=function(e){return e.length},ye.set=function(e,t,n){return e[t]=n},ye.get=function(e,t){return e[t]},ye.data=function(e){return e},ye.subarray=function(e,t,n){return e.subarray(t,n)};var we={};s["kha.arrays._Int16Array.Int16Array_Impl_"]=we,we.__name__=!0,we._new=function(e){var t=new Int16Array(e);return t},we.get_length=function(e){return e.length},we.set=function(e,t,n){return e[t]=n},we.get=function(e,t){return e[t]},we.data=function(e){return e},we.arrayRead=function(e,t){return e[t]},we.arrayWrite=function(e,t,n){return e[t]=n},we.subarray=function(e,t,n){return e.subarray(t,n)};var Ee={};s["kha.arrays._Int32Array.Int32Array_Impl_"]=Ee,Ee.__name__=!0,Ee._new=function(e){var t=new Int32Array(e);return t},Ee.get_length=function(e){return e.length},Ee.set=function(e,t,n){return e[t]=n},Ee.get=function(e,t){return e[t]},Ee.data=function(e){return e},Ee.arrayRead=function(e,t){return e[t]},Ee.arrayWrite=function(e,t,n){return e[t]=n},Ee.subarray=function(e,t,n){return e.subarray(t,n)};var Te={};s["kha.arrays._Uint32Array.Uint32Array_Impl_"]=Te,Te.__name__=!0,Te._new=function(e){var t=new Uint32Array(e);return t},Te.get_length=function(e){return e.length},Te.set=function(e,t,n){return e[t]=n},Te.get=function(e,t){return e[t]},Te.data=function(e){return e},Te.arrayRead=function(e,t){return e[t]},Te.arrayWrite=function(e,t,n){return e[t]=n},Te.subarray=function(e,t,n){return e.subarray(t,n)};var Ce=function(){};s["kha.audio1.AudioChannel"]=Ce,Ce.__name__=!0,Ce.__isInterface__=!0,Ce.prototype={play:null,pause:null,stop:null,length:null,get_length:null,get_position:null,set_position:null,get_volume:null,set_volume:null,finished:null,get_finished:null,__class__:Ce};var Ie=function(e){this.value=e};s["kha.internal.IntBox"]=Ie,Ie.__name__=!0,Ie.prototype={value:null,__class__:Ie};var Be=function(){};s["kha.audio2.Audio"]=Be,Be.__name__=!0,Be._init=function(){Be.buffer=new Le(8192,2,44100),Be.samplesPerSecond=44100},Be._callCallback=function(e){if(null!=Be.buffer)if(null!=Be.audioCallback)Be.intBox.value=e,Be.audioCallback(Be.intBox,Be.buffer);else for(var t=0,n;t<e;)n=t++,Be.buffer.data[Be.buffer.writeLocation]=0,Be.buffer.writeLocation+=1,Be.buffer.writeLocation>=Be.buffer.size&&(Be.buffer.writeLocation=0)},Be._readSample=function(){if(null==Be.buffer)return 0;var e=Be.buffer.data[Be.buffer.readLocation];return Be.buffer.readLocation+=1,Be.buffer.readLocation>=Be.buffer.size&&(Be.buffer.readLocation=0),e},Be.play=function(e,t){return null==t&&(t=!1),null},Be.stream=function(e,t){return null==t&&(t=!1),null};var ke=function(){};s["kha.audio2.Audio1"]=ke,ke.__name__=!0,ke._init=function(){var e=Array(32);ke.soundChannels=e;var t=Array(32);ke.streamChannels=t;var n=Array(32);ke.internalSoundChannels=n;var i=Array(32);ke.internalStreamChannels=i;var d=new Float32Array(512);ke.sampleCache1=d;var a=new Float32Array(512);ke.sampleCache2=a,ke.lastAllocationCount=0,Be.audioCallback=ke.mix},ke.max=function(e,t){return e>t?e:t},ke.min=function(e,t){return e<t?e:t},ke.mix=function(e,t){var n=e.value;if(ke.sampleCache1.length<n){if(Be.disableGcInteractions){w.trace("Unexpected allocation request in audio thread.",{fileName:"kha/audio2/Audio1.hx",lineNumber:45,className:"kha.audio2.Audio1",methodName:"mix"});for(var d=0,r;d<n;)r=d++,t.data[t.writeLocation]=0,t.writeLocation+=1,t.writeLocation>=t.size&&(t.writeLocation=0);return ke.lastAllocationCount=0,void(Be.disableGcInteractions=!1)}var s=new Float32Array(2*n);ke.sampleCache1=s;var o=new Float32Array(2*n);ke.sampleCache2=o,ke.lastAllocationCount=0}else 100<ke.lastAllocationCount?Be.disableGcInteractions=!0:ke.lastAllocationCount+=1;for(var A=0;A<n;){var u=A++;ke.sampleCache2[u]=0}for(var l=0;32>l;){var _=l++;ke.internalSoundChannels[_]=ke.soundChannels[_]}for(var f=0;32>f;){var c=f++;ke.internalStreamChannels[c]=ke.streamChannels[c]}for(var g=0,p=ke.internalSoundChannels,h;g<p.length;)if(h=p[g],++g,!(null==h||h.get_finished())){h.nextSamples(ke.sampleCache1,n,t.samplesPerSecond);for(var m=0,b;m<n;)b=m++,ke.sampleCache2[b]+=ke.sampleCache1[b]*h.get_volume()}for(var x=0,S=ke.internalStreamChannels,y;x<S.length;)if(y=S[x],++x,!(null==y||y.get_finished())){y.nextSamples(ke.sampleCache1,n,t.samplesPerSecond);for(var E=0,T;E<n;)T=E++,ke.sampleCache2[T]+=ke.sampleCache1[T]*y.get_volume()}for(var C=0;C<n;){var I=C++,B=ke.sampleCache2[I],a=1>B?B:1;t.data[t.writeLocation]=-1<a?a:-1,t.writeLocation+=1,t.writeLocation>=t.size&&(t.writeLocation=0)}},ke.play=function(e,t){null==t&&(t=!1);var n=null;n=Be.samplesPerSecond==e.sampleRate?new ve(t):new Oe(t,e.sampleRate),n.data=e.uncompressedData;for(var d=!1,a=0;32>a;){var r=a++;if(null==ke.soundChannels[r]||ke.soundChannels[r].get_finished()){ke.soundChannels[r]=n,d=!0;break}}return d?n:null},ke._playAgain=function(e){for(var t=0;32>t;){var n=t++;ke.soundChannels[n]==e&&(ke.soundChannels[n]=null)}for(var i=0;32>i;){var d=i++;if(null==ke.soundChannels[d]||ke.soundChannels[d].get_finished()||ke.soundChannels[d]==e){ke.soundChannels[d]=e;break}}},ke.stream=function(e,t){null==t&&(t=!1);var n=Be.stream(e,t);if(null!=n)return n;for(var d=new Ne(e.compressedData,t),a=!1,r=0;32>r;){var s=r++;if(null==ke.streamChannels[s]||ke.streamChannels[s].get_finished()){ke.streamChannels[s]=d,a=!0;break}}return a?d:null};var ve=function(e){this.looping=!1,this.stopped=!1,this.paused=!1,this.myPosition=0,this.myVolume=1,this.data=null,this.looping=e};s["kha.audio2.AudioChannel"]=ve,ve.__name__=!0,ve.__interfaces__=[Ce],ve.max=function(e,t){return e>t?e:t},ve.min=function(e,t){return e<t?e:t},ve.prototype={data:null,myVolume:null,myPosition:null,paused:null,stopped:null,looping:null,nextSamples:function(e,t){if(this.paused||this.stopped){for(var n=0;n<t;){var d=n++;e[d]=0}return}for(var i=0;i<t;){for(var r=0,s=this.data.length-this.myPosition,a=t-i,o=s<a?s:a;r<o;){r++;e[i++]=this.data[this.myPosition++]}if(this.myPosition>=this.data.length&&(this.myPosition=0,!this.looping)){this.stopped=!0;break}}for(;i<t;)e[i++]=0},play:function(){this.paused=!1,this.stopped=!1,ke._playAgain(this)},pause:function(){this.paused=!0},stop:function(){this.myPosition=0,this.stopped=!0},length:null,get_length:function(){return this.data.length/Be.samplesPerSecond/2},get_position:function(){return this.myPosition/Be.samplesPerSecond/2},set_position:function(e){this.myPosition=Math.round(2*(e*Be.samplesPerSecond));var t=this.myPosition,n=this.data.length,i=t<n?t:n;return this.myPosition=0<i?i:0,e},get_volume:function(){return this.myVolume},set_volume:function(e){return this.myVolume=e},finished:null,get_finished:function(){return this.stopped},__class__:ve};var Le=function(e,t,n){this.size=e;var i=new Float32Array(e);this.data=i,this.channels=t,this.samplesPerSecond=n,this.readLocation=0,this.writeLocation=0};s["kha.audio2.Buffer"]=Le,Le.__name__=!0,Le.prototype={channels:null,samplesPerSecond:null,data:null,size:null,readLocation:null,writeLocation:null,__class__:Le};var Oe=function(e,t){ve.call(this,e),this.sampleRate=t};s["kha.audio2.ResamplingAudioChannel"]=Oe,Oe.__name__=!0,Oe.max=function(e,t){return e>t?e:t},Oe.min=function(e,t){return e<t?e:t},Oe.__super__=ve,Oe.prototype=n(ve.prototype,{sampleRate:null,nextSamples:function(e,n,d){if(this.paused||this.stopped){for(var r=0;r<n;){var s=r++;e[s]=0}return}for(var i=0;i<n;){for(var o=0,A=Math.ceil(this.data.length*(d/this.sampleRate)),u=(0==A%2?A:A+1)-this.myPosition,a=n-i,l=u<a?u:a;o<l;){var _=o++,f=i++,c=this.myPosition++,g=0==c%2,p=this.sampleRate/d,h;if(g){c=0|c/2;var m=p*c,b=Math.floor(m),x=Math.floor(m+1);b*=2,x*=2;var S=this.data.length-1;0==S%2?S=S:--S;var y=b<0||b>S?0:this.data[b],w=x<0||x>S?0:this.data[x],E=m-Math.floor(m);h=(1-E)*y+E*w}else{c=0|c/2;var t=p*c,T=Math.floor(t),C=Math.floor(t+1);T=2*T+1,C=2*C+1;var I=this.data.length-1;0==I%2?--I:I=I;var B=T<1||T>I?0:this.data[T],k=C<1||C>I?0:this.data[C],v=t-Math.floor(t);h=(1-v)*B+v*k}e[f]=h}var L=Math.ceil(this.data.length*(d/this.sampleRate));if(this.myPosition>=(0==L%2?L:L+1)&&(this.myPosition=0,!this.looping)){this.stopped=!0;break}}for(;i<n;)e[i++]=0},sample:function(e,n){var i=0==e%2,d=this.sampleRate/n;if(i){e=0|e/2;var r=d*e,s=Math.floor(r),o=Math.floor(r+1);s*=2,o*=2;var A=this.data.length-1;0==A%2?A=A:--A;var u=s<0||s>A?0:this.data[s],a=o<0||o>A?0:this.data[o],l=r-Math.floor(r);return(1-l)*u+l*a}e=0|e/2;var t=d*e,_=Math.floor(t),f=Math.floor(t+1);_=2*_+1,f=2*f+1;var c=this.data.length-1;0==c%2?--c:c=c;var g=1>_||_>c?0:this.data[_],p=1>f||f>c?0:this.data[f],h=t-Math.floor(t);return(1-h)*g+h*p},lerp:function(e,n,i){return(1-i)*e+i*n},sampleLength:function(e){var t=Math.ceil(this.data.length*(e/this.sampleRate));return 0==t%2?t:t+1},play:function(){this.paused=!1,this.stopped=!1,ke._playAgain(this)},pause:function(){this.paused=!0},stop:function(){this.myPosition=0,this.stopped=!0},get_length:function(){return this.data.length/this.sampleRate/2},get_position:function(){return this.myPosition/this.sampleRate/2},set_position:function(e){this.myPosition=Math.round(2*(e*this.sampleRate));var t=this.myPosition,n=Math.ceil(this.data.length*(Be.samplesPerSecond/this.sampleRate)),i=0==n%2?n:n+1,d=t<i?t:i;return this.myPosition=0<d?d:0,e},get_volume:function(){return this.myVolume},set_volume:function(e){return this.myVolume=e},get_finished:function(){return this.stopped},__class__:Oe});var Ne=function(e,t){this.paused=!1,this.atend=!1,this.myVolume=1,this.loop=t,this.reader=De.openFromBytes(e)};s["kha.audio2.StreamChannel"]=Ne,Ne.__name__=!0,Ne.__interfaces__=[Ce],Ne.prototype={reader:null,atend:null,loop:null,myVolume:null,paused:null,nextSamples:function(e,t,n){if(this.paused){for(var d=0;d<t;){var a=d++;e[a]=0}return}var i=2*this.reader.read(e,0|t/2,2,n,!0);if(i<t){this.loop?this.reader.set_currentMillisecond(0):this.atend=!0;for(var r=i;r<t;){var s=r++;e[s]=0}}},play:function(){this.paused=!1},pause:function(){this.paused=!0},stop:function(){this.atend=!0},length:null,get_length:function(){return this.reader.get_totalMillisecond()/1e3},get_position:function(){return this.reader.get_currentMillisecond()/1e3},set_position:function(e){return e},get_volume:function(){return this.myVolume},set_volume:function(e){return this.myVolume=e},finished:null,get_finished:function(){return this.atend},__class__:Ne};var Pe=function(){};s["kha.audio2.ogg.tools.Crc32"]=Pe,Pe.__name__=!0,Pe.init=function(){if(null==Pe.table){var e=Array(256);Pe.table=e;for(var t=0;256>t;){var n=t++,i=n<<24;i=i<<1^(S.gte(i,-2147483648)?79764919:0),i=i<<1^(S.gte(i,-2147483648)?79764919:0),i=i<<1^(S.gte(i,-2147483648)?79764919:0),i=i<<1^(S.gte(i,-2147483648)?79764919:0),i=i<<1^(S.gte(i,-2147483648)?79764919:0),i=i<<1^(S.gte(i,-2147483648)?79764919:0),i=i<<1^(S.gte(i,-2147483648)?79764919:0),i=i<<1^(S.gte(i,-2147483648)?79764919:0),Pe.table[n]=i}}},Pe.update=function(e,t){return e<<8^Pe.table[t^e>>>24]};var Re=function(){};s["kha.audio2.ogg.tools.MathTools"]=Re,Re.__name__=!0,Re.ilog=function(e){var t=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];return 16384>e?16>e?t[e]:512>e?5+t[e>>5]:10+t[e>>10]:16777216>e?524288>e?15+t[e>>15]:20+t[e>>20]:536870912>e?25+t[e>>25]:-2147483648>e?30+t[e>>30]:0};var Ve=function(){};s["kha.audio2.ogg.tools.Mdct"]=Ve,Ve.__name__=!0,Ve.inverseTransform=function(e,t,n,d,a,s){for(var o=t>>1,A=t>>2,_=t>>3,f=Array(o),c=f,g=o-2,p=0,h=0;h!=o;)c[g+1]=e[h]*n[p]-e[h+2]*n[p+1],c[g]=e[h]*n[p+1]+e[h+2]*n[p],g-=2,p+=2,h+=4;for(h=o-3;0<=g;)c[g+1]=-e[h+2]*n[p]- -e[h]*n[p+1],c[g]=-e[h+2]*n[p+1]+-e[h]*n[p],g-=2,p+=2,h-=4;for(var m=e,u=c,b=o-8,x=A,S=0,y=A,w=0;0<=b;){var E=u[x+1]-u[S+1],T=u[x]-u[S];m[y+1]=u[x+1]+u[S+1],m[y]=u[x]+u[S],m[w+1]=E*n[b+4]-T*n[b+5],m[w]=T*n[b+4]+E*n[b+5],E=u[x+3]-u[S+3],T=u[x+2]-u[S+2],m[y+3]=u[x+3]+u[S+3],m[y+2]=u[x+2]+u[S+2],m[w+3]=E*n[b]-T*n[b+1],m[w+2]=T*n[b]+E*n[b+1],b-=8,y+=4,w+=4,x+=4,S+=4}for(var C=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],I=(16384>t?16>t?C[t]:512>t?5+C[t>>5]:10+C[t>>10]:16777216>t?524288>t?15+C[t>>15]:20+C[t>>20]:536870912>t?25+C[t>>25]:-2147483648>t?30+C[t>>30]:0)-1,B=o-1-0*A,k=B,v=B+-(t>>3),L=0,O=(t>>4>>2)+1;0<--O;){var N=m[k]-m[v],P=m[k+-1]-m[v+-1],R=k;m[R]+=m[v];var V=k+-1;m[V]+=m[v+-1],m[v]=N*n[L]-P*n[L+1],m[v+-1]=P*n[L]+N*n[L+1],L+=8,N=m[k+-2]-m[v+-2],P=m[k+-3]-m[v+-3];var D=k+-2;m[D]+=m[v+-2];var F=k+-3;m[F]+=m[v+-3],m[v+-2]=N*n[L]-P*n[L+1],m[v+-3]=P*n[L]+N*n[L+1],L+=8,N=m[k+-4]-m[v+-4],P=m[k+-5]-m[v+-5];var M=k+-4;m[M]+=m[v+-4];var U=k+-5;m[U]+=m[v+-5],m[v+-4]=N*n[L]-P*n[L+1],m[v+-5]=P*n[L]+N*n[L+1],L+=8,N=m[k+-6]-m[v+-6],P=m[k+-7]-m[v+-7];var H=k+-6;m[H]+=m[v+-6];var W=k+-7;m[W]+=m[v+-7],m[v+-6]=N*n[L]-P*n[L+1],m[v+-7]=P*n[L]+N*n[L+1],L+=8,k-=8,v-=8}for(var G=o-1-A,z=G,Y=G+-(t>>3),X=0,Q=(t>>4>>2)+1;0<--Q;){var j=m[z]-m[Y],K=m[z+-1]-m[Y+-1],q=z;m[q]+=m[Y];var Z=z+-1;m[Z]+=m[Y+-1],m[Y]=j*n[X]-K*n[X+1],m[Y+-1]=K*n[X]+j*n[X+1],X+=8,j=m[z+-2]-m[Y+-2],K=m[z+-3]-m[Y+-3];var J=z+-2;m[J]+=m[Y+-2];var $=z+-3;m[$]+=m[Y+-3],m[Y+-2]=j*n[X]-K*n[X+1],m[Y+-3]=K*n[X]+j*n[X+1],X+=8,j=m[z+-4]-m[Y+-4],K=m[z+-5]-m[Y+-5];var ee=z+-4;m[ee]+=m[Y+-4];var te=z+-5;m[te]+=m[Y+-5],m[Y+-4]=j*n[X]-K*n[X+1],m[Y+-5]=K*n[X]+j*n[X+1],X+=8,j=m[z+-6]-m[Y+-6],K=m[z+-7]-m[Y+-7];var ne=z+-6;m[ne]+=m[Y+-6];var ie=z+-7;m[ie]+=m[Y+-7],m[Y+-6]=j*n[X]-K*n[X+1],m[Y+-7]=K*n[X]+j*n[X+1],X+=8,z-=8,Y-=8}for(var de=o-1-0*_,ae=0,re=de,se=de+-(t>>4),oe=(t>>5>>2)+1;0<--oe;){var Ae=m[re]-m[se],ue=m[re+-1]-m[se+-1],le=re;m[le]+=m[se];var _e=re+-1;m[_e]+=m[se+-1],m[se]=Ae*n[ae]-ue*n[ae+1],m[se+-1]=ue*n[ae]+Ae*n[ae+1],ae+=16,Ae=m[re+-2]-m[se+-2],ue=m[re+-3]-m[se+-3];var fe=re+-2;m[fe]+=m[se+-2];var ce=re+-3;m[ce]+=m[se+-3],m[se+-2]=Ae*n[ae]-ue*n[ae+1],m[se+-3]=ue*n[ae]+Ae*n[ae+1],ae+=16,Ae=m[re+-4]-m[se+-4],ue=m[re+-5]-m[se+-5];var ge=re+-4;m[ge]+=m[se+-4];var pe=re+-5;m[pe]+=m[se+-5],m[se+-4]=Ae*n[ae]-ue*n[ae+1],m[se+-5]=ue*n[ae]+Ae*n[ae+1],ae+=16,Ae=m[re+-6]-m[se+-6],ue=m[re+-7]-m[se+-7];var he=re+-6;m[he]+=m[se+-6];var me=re+-7;m[me]+=m[se+-7],m[se+-6]=Ae*n[ae]-ue*n[ae+1],m[se+-7]=ue*n[ae]+Ae*n[ae+1],re-=8,se-=8,ae+=16}for(var be=o-1-_,xe=0,Se=be,ye=be+-(t>>4),we=(t>>5>>2)+1;0<--we;){var Ee=m[Se]-m[ye],Te=m[Se+-1]-m[ye+-1],Ce=Se;m[Ce]+=m[ye];var Ie=Se+-1;m[Ie]+=m[ye+-1],m[ye]=Ee*n[xe]-Te*n[xe+1],m[ye+-1]=Te*n[xe]+Ee*n[xe+1],xe+=16,Ee=m[Se+-2]-m[ye+-2],Te=m[Se+-3]-m[ye+-3];var Be=Se+-2;m[Be]+=m[ye+-2];var ke=Se+-3;m[ke]+=m[ye+-3],m[ye+-2]=Ee*n[xe]-Te*n[xe+1],m[ye+-3]=Te*n[xe]+Ee*n[xe+1],xe+=16,Ee=m[Se+-4]-m[ye+-4],Te=m[Se+-5]-m[ye+-5];var ve=Se+-4;m[ve]+=m[ye+-4];var Le=Se+-5;m[Le]+=m[ye+-5],m[ye+-4]=Ee*n[xe]-Te*n[xe+1],m[ye+-5]=Te*n[xe]+Ee*n[xe+1],xe+=16,Ee=m[Se+-6]-m[ye+-6],Te=m[Se+-7]-m[ye+-7];var Oe=Se+-6;m[Oe]+=m[ye+-6];var Ne=Se+-7;m[Ne]+=m[ye+-7],m[ye+-6]=Ee*n[xe]-Te*n[xe+1],m[ye+-7]=Te*n[xe]+Ee*n[xe+1],Se-=8,ye-=8,xe+=16}for(var Pe=o-1-2*_,Re=0,Ve=Pe,De=Pe+-(t>>4),Fe=(t>>5>>2)+1;0<--Fe;){var Me=m[Ve]-m[De],Ue=m[Ve+-1]-m[De+-1],He=Ve;m[He]+=m[De];var We=Ve+-1;m[We]+=m[De+-1],m[De]=Me*n[Re]-Ue*n[Re+1],m[De+-1]=Ue*n[Re]+Me*n[Re+1],Re+=16,Me=m[Ve+-2]-m[De+-2],Ue=m[Ve+-3]-m[De+-3];var Ge=Ve+-2;m[Ge]+=m[De+-2];var ze=Ve+-3;m[ze]+=m[De+-3],m[De+-2]=Me*n[Re]-Ue*n[Re+1],m[De+-3]=Ue*n[Re]+Me*n[Re+1],Re+=16,Me=m[Ve+-4]-m[De+-4],Ue=m[Ve+-5]-m[De+-5];var Ye=Ve+-4;m[Ye]+=m[De+-4];var Xe=Ve+-5;m[Xe]+=m[De+-5],m[De+-4]=Me*n[Re]-Ue*n[Re+1],m[De+-5]=Ue*n[Re]+Me*n[Re+1],Re+=16,Me=m[Ve+-6]-m[De+-6],Ue=m[Ve+-7]-m[De+-7];var Qe=Ve+-6;m[Qe]+=m[De+-6];var je=Ve+-7;m[je]+=m[De+-7],m[De+-6]=Me*n[Re]-Ue*n[Re+1],m[De+-7]=Ue*n[Re]+Me*n[Re+1],Ve-=8,De-=8,Re+=16}for(var Ke=o-1-3*_,qe=0,Ze=Ke,Je=Ke+-(t>>4),$e=(t>>5>>2)+1;0<--$e;){var et=m[Ze]-m[Je],tt=m[Ze+-1]-m[Je+-1],nt=Ze;m[nt]+=m[Je];var it=Ze+-1;m[it]+=m[Je+-1],m[Je]=et*n[qe]-tt*n[qe+1],m[Je+-1]=tt*n[qe]+et*n[qe+1],qe+=16,et=m[Ze+-2]-m[Je+-2],tt=m[Ze+-3]-m[Je+-3];var dt=Ze+-2;m[dt]+=m[Je+-2];var at=Ze+-3;m[at]+=m[Je+-3],m[Je+-2]=et*n[qe]-tt*n[qe+1],m[Je+-3]=tt*n[qe]+et*n[qe+1],qe+=16,et=m[Ze+-4]-m[Je+-4],tt=m[Ze+-5]-m[Je+-5];var rt=Ze+-4;m[rt]+=m[Je+-4];var st=Ze+-5;m[st]+=m[Je+-5],m[Je+-4]=et*n[qe]-tt*n[qe+1],m[Je+-5]=tt*n[qe]+et*n[qe+1],qe+=16,et=m[Ze+-6]-m[Je+-6],tt=m[Ze+-7]-m[Je+-7];var ot=Ze+-6;m[ot]+=m[Je+-6];var At=Ze+-7;m[At]+=m[Je+-7],m[Je+-6]=et*n[qe]-tt*n[qe+1],m[Je+-7]=tt*n[qe]+et*n[qe+1],Ze-=8,Je-=8,qe+=16}for(var ut=2;ut<I-3>>1;)for(var lt=ut++,l=t>>lt+2,_t=0;_t<1<<lt+1;)for(var ft=_t++,ct=o-1-l*ft,gt=1<<lt+3,pt=0,ht=ct,mt=ct+-(l>>1),bt=(t>>lt+4>>2)+1;0<--bt;){var xt=m[ht]-m[mt],St=m[ht+-1]-m[mt+-1],yt=ht;m[yt]+=m[mt];var wt=ht+-1;m[wt]+=m[mt+-1],m[mt]=xt*n[pt]-St*n[pt+1],m[mt+-1]=St*n[pt]+xt*n[pt+1],pt+=gt,xt=m[ht+-2]-m[mt+-2],St=m[ht+-3]-m[mt+-3];var Et=ht+-2;m[Et]+=m[mt+-2];var Tt=ht+-3;m[Tt]+=m[mt+-3],m[mt+-2]=xt*n[pt]-St*n[pt+1],m[mt+-3]=St*n[pt]+xt*n[pt+1],pt+=gt,xt=m[ht+-4]-m[mt+-4],St=m[ht+-5]-m[mt+-5];var Ct=ht+-4;m[Ct]+=m[mt+-4];var It=ht+-5;m[It]+=m[mt+-5],m[mt+-4]=xt*n[pt]-St*n[pt+1],m[mt+-5]=St*n[pt]+xt*n[pt+1],pt+=gt,xt=m[ht+-6]-m[mt+-6],St=m[ht+-7]-m[mt+-7];var Bt=ht+-6;m[Bt]+=m[mt+-6];var kt=ht+-7;m[kt]+=m[mt+-7],m[mt+-6]=xt*n[pt]-St*n[pt+1],m[mt+-7]=St*n[pt]+xt*n[pt+1],ht-=8,mt-=8,pt+=gt}for(var vt=I-3>>1;vt<I-6;)for(var Lt=vt++,Ot=t>>Lt+2,Nt=1<<Lt+3,Pt=0,Rt=o-1,Vt=(t>>Lt+6)+1;0<--Vt;){for(var Dt=n[Pt],Ft=n[Pt+1],Mt=n[Pt+Nt],Ut=n[Pt+Nt+1],Ht=n[Pt+2*Nt],Wt=n[Pt+2*Nt+1],Gt=n[Pt+3*Nt],zt=n[Pt+3*Nt+1],Yt=Rt,Xt=Rt+-(Ot>>1),Qt=(1<<Lt+1)+1;0<--Qt;){var jt=m[Yt]-m[Xt],Kt=m[Yt+-1]-m[Xt+-1];m[Yt]+=m[Xt],m[Yt+-1]=m[Yt+-1]+m[Xt+-1],m[Xt]=jt*Dt-Kt*Ft,m[Xt+-1]=Kt*Dt+jt*Ft,jt=m[Yt+-2]-m[Xt+-2],Kt=m[Yt+-3]-m[Xt+-3],m[Yt+-2]=m[Yt+-2]+m[Xt+-2],m[Yt+-3]=m[Yt+-3]+m[Xt+-3],m[Xt+-2]=jt*Mt-Kt*Ut,m[Xt+-3]=Kt*Mt+jt*Ut,jt=m[Yt+-4]-m[Xt+-4],Kt=m[Yt+-5]-m[Xt+-5],m[Yt+-4]=m[Yt+-4]+m[Xt+-4],m[Yt+-5]=m[Yt+-5]+m[Xt+-5],m[Xt+-4]=jt*Ht-Kt*Wt,m[Xt+-5]=Kt*Ht+jt*Wt,jt=m[Yt+-6]-m[Xt+-6],Kt=m[Yt+-7]-m[Xt+-7],m[Yt+-6]=m[Yt+-6]+m[Xt+-6],m[Yt+-7]=m[Yt+-7]+m[Xt+-7],m[Xt+-6]=jt*Gt-Kt*zt,m[Xt+-7]=Kt*Gt+jt*zt,Yt-=Ot,Xt-=Ot}Pt+=4*Nt,Rt-=8}for(var qt=o-1,Zt=n[t>>3],Jt=qt;Jt>qt-16*(t>>5);){var $t=m[Jt],en=m[Jt+-8];m[Jt+-8]=$t-en,m[Jt]=$t+en,$t=m[Jt+-1],en=m[Jt+-9],m[Jt+-9]=$t-en,m[Jt+-1]=$t+en,$t=m[Jt+-2],en=m[Jt+-10];var tn=$t-en;m[Jt+-2]=$t+en,$t=m[Jt+-3],en=m[Jt+-11];var nn=$t-en;m[Jt+-3]=$t+en,m[Jt+-10]=(tn+nn)*Zt,m[Jt+-11]=(nn-tn)*Zt,$t=m[Jt+-4],en=m[Jt+-12],tn=en-$t,m[Jt+-4]=$t+en,$t=m[Jt+-5],en=m[Jt+-13],nn=$t-en,m[Jt+-5]=$t+en,m[Jt+-12]=nn,m[Jt+-13]=tn,$t=m[Jt+-6],en=m[Jt+-14],tn=en-$t,m[Jt+-6]=$t+en,$t=m[Jt+-7],en=m[Jt+-15],nn=$t-en,m[Jt+-7]=$t+en,m[Jt+-14]=(tn+nn)*Zt,m[Jt+-15]=(tn-nn)*Zt;var dn=m[Jt],an=m[Jt+-4],rn=dn-an,sn=dn+an;dn=m[Jt+-2],an=m[Jt+-6];var on=dn+an,An=dn-an;m[Jt]=sn+on,m[Jt+-2]=sn-on;var un=m[Jt+-3]-m[Jt+-7];m[Jt+-4]=rn+un,m[Jt+-6]=rn-un,dn=m[Jt+-1],an=m[Jt+-5];var ln=dn-an,_n=dn+an,fn=m[Jt+-3]+m[Jt+-7];m[Jt+-1]=_n+fn,m[Jt+-3]=_n-fn,m[Jt+-5]=ln-An,m[Jt+-7]=ln+An;var cn=Jt-8,gn=m[cn],pn=m[cn+-4],hn=gn-pn,mn=gn+pn;gn=m[cn+-2],pn=m[cn+-6];var bn=gn+pn,xn=gn-pn;m[cn]=mn+bn,m[cn+-2]=mn-bn;var Sn=m[cn+-3]-m[cn+-7];m[cn+-4]=hn+Sn,m[cn+-6]=hn-Sn,gn=m[cn+-1],pn=m[cn+-5];var yn=gn-pn,wn=gn+pn,En=m[cn+-3]+m[cn+-7];m[cn+-1]=wn+En,m[cn+-3]=wn-En,m[cn+-5]=yn-xn,m[cn+-7]=yn+xn,Jt-=16}for(var Tn=0,Cn=A-4,In=o-4;0<=Cn;){var Bn=s[Tn];u[In+3]=m[Bn],u[In+2]=m[Bn+1],u[Cn+3]=m[Bn+2],u[Cn+2]=m[Bn+3],Bn=s[Tn+1],u[In+1]=m[Bn],u[In]=m[Bn+1],u[Cn+1]=m[Bn+2],u[Cn]=m[Bn+3],Cn-=4,In-=4,Tn+=2}for(var kn=0,vn=0,Ln=o-4;vn<Ln;){var On=u[vn]-u[Ln+2],Nn=u[vn+1]+u[Ln+3],Pn=a[kn+1]*On+a[kn]*Nn,Rn=a[kn+1]*Nn-a[kn]*On,Vn=u[vn]+u[Ln+2],Dn=u[vn+1]-u[Ln+3];u[vn]=Vn+Pn,u[vn+1]=Dn+Rn,u[Ln+2]=Vn-Pn,u[Ln+3]=Rn-Dn,On=u[vn+2]-u[Ln],Nn=u[vn+3]+u[Ln+1],Pn=a[kn+3]*On+a[kn+2]*Nn,Rn=a[kn+3]*Nn-a[kn+2]*On,Vn=u[vn+2]+u[Ln],Dn=u[vn+3]-u[Ln+1],u[vn+2]=Vn+Pn,u[vn+3]=Dn+Rn,u[Ln]=Vn-Pn,u[Ln+1]=Rn-Dn,kn+=4,vn+=4,Ln-=4}for(var Fn=o-8,Mn=o-8,Un=0,Hn=o-4,Wn=o,Gn=t-4;0<=Mn;){var zn=c[Mn+6]*d[Fn+7]-c[Mn+7]*d[Fn+6],Yn=-c[Mn+6]*d[Fn+6]-c[Mn+7]*d[Fn+7];e[Un]=zn,e[Hn+3]=-zn,e[Wn]=Yn,e[Gn+3]=Yn;var Xn=c[Mn+4]*d[Fn+5]-c[Mn+5]*d[Fn+4],Qn=-c[Mn+4]*d[Fn+4]-c[Mn+5]*d[Fn+5];e[Un+1]=Xn,e[Hn+2]=-Xn,e[Wn+1]=Qn,e[Gn+2]=Qn,zn=c[Mn+2]*d[Fn+3]-c[Mn+3]*d[Fn+2],Yn=-c[Mn+2]*d[Fn+2]-c[Mn+3]*d[Fn+3],e[Un+2]=zn,e[Hn+1]=-zn,e[Wn+2]=Yn,e[Gn+1]=Yn,Xn=c[Mn]*d[Fn+1]-c[Mn+1]*d[Fn],Qn=-c[Mn]*d[Fn]-c[Mn+1]*d[Fn+1],e[Un+3]=Xn,e[Hn]=-Xn,e[Wn+3]=Qn,e[Gn]=Qn,Fn-=8,Mn-=8,Un+=4,Wn+=4,Hn-=4,Gn-=4}},Ve.step3Iter0Loop=function(t,n,e,d,r){for(var a=e,s=e+d,o=0,A=(t>>2)+1;0<--A;){var u=n[a]-n[s],l=n[a+-1]-n[s+-1],_=a;n[_]+=n[s];var f=a+-1;n[f]+=n[s+-1],n[s]=u*r[o]-l*r[o+1],n[s+-1]=l*r[o]+u*r[o+1],o+=8,u=n[a+-2]-n[s+-2],l=n[a+-3]-n[s+-3];var c=a+-2;n[c]+=n[s+-2];var g=a+-3;n[g]+=n[s+-3],n[s+-2]=u*r[o]-l*r[o+1],n[s+-3]=l*r[o]+u*r[o+1],o+=8,u=n[a+-4]-n[s+-4],l=n[a+-5]-n[s+-5];var p=a+-4;n[p]+=n[s+-4];var h=a+-5;n[h]+=n[s+-5],n[s+-4]=u*r[o]-l*r[o+1],n[s+-5]=l*r[o]+u*r[o+1],o+=8,u=n[a+-6]-n[s+-6],l=n[a+-7]-n[s+-7];var m=a+-6;n[m]+=n[s+-6];var b=a+-7;n[b]+=n[s+-7],n[s+-6]=u*r[o]-l*r[o+1],n[s+-7]=l*r[o]+u*r[o+1],o+=8,a-=8,s-=8}},Ve.step3InnerRLoop=function(t,n,e,d,r,a){for(var s=0,o=e,A=e+d,u=(t>>2)+1;0<--u;){var l=n[o]-n[A],_=n[o+-1]-n[A+-1],f=o;n[f]+=n[A];var c=o+-1;n[c]+=n[A+-1],n[A]=l*r[s]-_*r[s+1],n[A+-1]=_*r[s]+l*r[s+1],s+=a,l=n[o+-2]-n[A+-2],_=n[o+-3]-n[A+-3];var g=o+-2;n[g]+=n[A+-2];var p=o+-3;n[p]+=n[A+-3],n[A+-2]=l*r[s]-_*r[s+1],n[A+-3]=_*r[s]+l*r[s+1],s+=a,l=n[o+-4]-n[A+-4],_=n[o+-5]-n[A+-5];var h=o+-4;n[h]+=n[A+-4];var m=o+-5;n[m]+=n[A+-5],n[A+-4]=l*r[s]-_*r[s+1],n[A+-5]=_*r[s]+l*r[s+1],s+=a,l=n[o+-6]-n[A+-6],_=n[o+-7]-n[A+-7];var b=o+-6;n[b]+=n[A+-6];var x=o+-7;n[x]+=n[A+-7],n[A+-6]=l*r[s]-_*r[s+1],n[A+-7]=_*r[s]+l*r[s+1],o-=8,A-=8,s+=a}},Ve.step3InnerSLoop=function(t,n,e,d,r,a,s,o){for(var A=r[a],u=r[a+1],l=r[a+s],_=r[a+s+1],f=r[a+2*s],c=r[a+2*s+1],g=r[a+3*s],p=r[a+3*s+1],h=e,m=e+d,b=t+1;0<--b;){var x=n[h]-n[m],S=n[h+-1]-n[m+-1];n[h]+=n[m],n[h+-1]=n[h+-1]+n[m+-1],n[m]=x*A-S*u,n[m+-1]=S*A+x*u,x=n[h+-2]-n[m+-2],S=n[h+-3]-n[m+-3],n[h+-2]=n[h+-2]+n[m+-2],n[h+-3]=n[h+-3]+n[m+-3],n[m+-2]=x*l-S*_,n[m+-3]=S*l+x*_,x=n[h+-4]-n[m+-4],S=n[h+-5]-n[m+-5],n[h+-4]=n[h+-4]+n[m+-4],n[h+-5]=n[h+-5]+n[m+-5],n[m+-4]=x*f-S*c,n[m+-5]=S*f+x*c,x=n[h+-6]-n[m+-6],S=n[h+-7]-n[m+-7],n[h+-6]=n[h+-6]+n[m+-6],n[h+-7]=n[h+-7]+n[m+-7],n[m+-6]=x*g-S*p,n[m+-7]=S*g+x*p,h-=o,m-=o}},Ve.iter54=function(t,e){var n=t[e],i=t[e+-4],d=n-i,a=n+i;n=t[e+-2],i=t[e+-6];var r=n+i,s=n-i;t[e]=a+r,t[e+-2]=a-r;var o=t[e+-3]-t[e+-7];t[e+-4]=d+o,t[e+-6]=d-o,n=t[e+-1],i=t[e+-5];var A=n-i,u=n+i,l=t[e+-3]+t[e+-7];t[e+-1]=u+l,t[e+-3]=u-l,t[e+-5]=A-s,t[e+-7]=A+s},Ve.step3InnerSLoopLd654=function(t,n,e,i,d){for(var a=i[d>>3],r=e;r>e-16*t;){var s=n[r],o=n[r+-8];n[r+-8]=s-o,n[r]=s+o,s=n[r+-1],o=n[r+-9],n[r+-9]=s-o,n[r+-1]=s+o,s=n[r+-2],o=n[r+-10];var A=s-o;n[r+-2]=s+o,s=n[r+-3],o=n[r+-11];var u=s-o;n[r+-3]=s+o,n[r+-10]=(A+u)*a,n[r+-11]=(u-A)*a,s=n[r+-4],o=n[r+-12],A=o-s,n[r+-4]=s+o,s=n[r+-5],o=n[r+-13],u=s-o,n[r+-5]=s+o,n[r+-12]=u,n[r+-13]=A,s=n[r+-6],o=n[r+-14],A=o-s,n[r+-6]=s+o,s=n[r+-7],o=n[r+-15],u=s-o,n[r+-7]=s+o,n[r+-14]=(A+u)*a,n[r+-15]=(A-u)*a;var l=n[r],_=n[r+-4],f=l-_,c=l+_;l=n[r+-2],_=n[r+-6];var g=l+_,p=l-_;n[r]=c+g,n[r+-2]=c-g;var h=n[r+-3]-n[r+-7];n[r+-4]=f+h,n[r+-6]=f-h,l=n[r+-1],_=n[r+-5];var m=l-_,b=l+_,x=n[r+-3]+n[r+-7];n[r+-1]=b+x,n[r+-3]=b-x,n[r+-5]=m-p,n[r+-7]=m+p;var S=r-8,y=n[S],w=n[S+-4],E=y-w,T=y+w;y=n[S+-2],w=n[S+-6];var C=y+w,I=y-w;n[S]=T+C,n[S+-2]=T-C;var B=n[S+-3]-n[S+-7];n[S+-4]=E+B,n[S+-6]=E-B,y=n[S+-1],w=n[S+-5];var k=y-w,v=y+w,L=n[S+-3]+n[S+-7];n[S+-1]=v+L,n[S+-3]=v-L,n[S+-5]=k-I,n[S+-7]=k+I,r-=16}};var De=function(e,t,n){this.seekFunc=t,this.inputLength=n,this.decoder=Ue.start(e),this.decoder.setupSampleNumber(t,n),this.loopStart=this.get_header().comment.get_loopStart(),this.loopLength=this.get_header().comment.get_loopLength()};s["kha.audio2.ogg.vorbis.Reader"]=De,De.__name__=!0,De.openFromBytes=function(e){var t=new P(e);return new De(t,function(e){De.seekBytes(t,e)},e.length)},De.seekBytes=function(e,t){e.set_position(t)},De.readAll=function(e,t,d){null==d&&(d=!1);var a=new P(e),r=Ue.start(a);r.setupSampleNumber(function(e){De.seekBytes(a,e)},e.length);for(var s=r.header,o=4096,A=new Float32Array(o*s.channel),u=A;;){for(var l=r.read(u,o,s.channel,s.sampleRate,d),n=0,_=l*s.channel;n<_;){var f=n++;t.writeFloat(u[f])}if(0==l)break}return r.header},De.prototype={decoder:null,get_header:function(){return this.decoder.header},get_totalSample:function(){return this.decoder.totalSample},get_totalMillisecond:function(){var e=this.decoder.totalSample,t=this.get_header().sampleRate;return 1e3*(S.toFloat(e)/S.toFloat(t))},get_currentSample:function(){return this.decoder.currentSample},set_currentSample:function(e){return this.decoder.seek(this.seekFunc,this.inputLength,e),this.decoder.currentSample},get_currentMillisecond:function(){var e=this.get_currentSample(),t=this.get_header().sampleRate;return 1e3*(S.toFloat(e)/S.toFloat(t))},set_currentMillisecond:function(e){return this.set_currentSample(Math.floor(S.toFloat(this.get_header().sampleRate)*(e/1e3))),this.get_currentMillisecond()},loopStart:null,loopLength:null,seekFunc:null,inputLength:null,read:function(e,t,n,i,d){return null==d&&(d=!1),this.decoder.ensurePosition(this.seekFunc),null==t&&(t=this.decoder.totalSample),null==n&&(n=this.get_header().channel),null==i&&(i=this.get_header().sampleRate),this.decoder.read(e,t,n,i,d)},clone:function(){var e=Object.create(De.prototype);return e.seekFunc=this.seekFunc,e.inputLength=this.inputLength,e.decoder=this.decoder.clone(this.seekFunc),e.loopStart=this.loopStart,e.loopLength=this.loopLength,e},sampleToMillisecond:function(e){var t=this.get_header().sampleRate;return 1e3*(S.toFloat(e)/S.toFloat(t))},millisecondToSample:function(e){return Math.floor(S.toFloat(this.get_header().sampleRate)*(e/1e3))},__class__:De};var Fe=function(e){this.nextSeg=0,this.firstDecode=!1,this.bytesInSeg=0,this.validBits=0,this.input=e,this.inputPosition=0,this.page=new Je,Pe.init()};s["kha.audio2.ogg.vorbis.VorbisDecodeState"]=Fe,Fe.__name__=!0,Fe.prototype={page:null,eof:null,pFirst:null,pLast:null,validBits:null,inputPosition:null,input:null,discardSamplesDeferred:null,segments:null,bytesInSeg:null,channelBuffers:null,channelBufferStart:null,channelBufferEnd:null,currentSample:null,previousWindow:null,previousLength:null,finalY:null,firstDecode:null,nextSeg:null,acc:null,lastSeg:null,lastSegWhich:null,endSegWithKnownLoc:null,knownLocForPacket:null,error:null,currentLoc:null,currentLocValid:null,firstAudioPageOffset:null,setup:function(e,t){this.inputPosition+=1;var n=this.input.readByte();this.inputPosition+=n;for(var d=Array(n),a=d,r=0,s;r<n;)s=r++,a[s]=this.input.readByte();if(this.segments=a,this.endSegWithKnownLoc=-2,-1!=e||-1!=t)for(var o=n-1;0<=o&&!(255>this.segments[o]);)0<=o&&(this.endSegWithKnownLoc=o,this.knownLocForPacket=e),--o;if(this.firstDecode){for(var A=0,u=new et,l=0,_;l<n;)_=l++,A+=this.segments[_];A+=27+n,u.pageStart=this.firstAudioPageOffset,u.pageEnd=u.pageStart+A,u.firstDecodedSample=0,u.lastDecodedSample=e,this.pFirst=u}this.nextSeg=0},clone:function(e){var t=Object.create(Fe.prototype);return e(this.inputPosition),t.input=this.input,t.eof=this.eof,t.validBits=this.validBits,t.discardSamplesDeferred=this.discardSamplesDeferred,t.firstDecode=this.firstDecode,t.nextSeg=this.nextSeg,t.bytesInSeg=this.bytesInSeg,t.acc=t.acc,t.lastSeg=this.lastSeg,t.lastSegWhich=this.lastSegWhich,t.currentLoc=this.currentLoc,t.currentLocValid=this.currentLocValid,t.inputPosition=this.inputPosition,t.firstAudioPageOffset=this.firstAudioPageOffset,t.error=this.error,t.segments=this.segments,t.pFirst=this.pFirst,t.pLast=this.pLast,t.page=this.page.clone(),t},next:function(){if(this.lastSeg)return 0;if(-1==this.nextSeg){this.lastSegWhich=this.segments.length-1;try{this.page.start(this)}catch(n){var t=n instanceof W?n.val:n;if(t instanceof tt)return this.lastSeg=!0,this.error=t,0;throw n}if(0==(1&this.page.flag))throw new W(new tt(nt.CONTINUED_PACKET_FLAG_INVALID,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:171,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"next"}))}var e=this.segments[this.nextSeg++];return 255>e&&(this.lastSeg=!0,this.lastSegWhich=this.nextSeg-1),this.nextSeg>=this.segments.length&&(this.nextSeg=-1),this.bytesInSeg=e,e},startPacket:function(){for(;-1==this.nextSeg;)if(this.page.start(this),0!=(1&this.page.flag))throw new W(new tt(nt.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:193,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"startPacket"}));this.lastSeg=!1,this.validBits=0,this.bytesInSeg=0},maybeStartPacket:function(){if(-1==this.nextSeg){var e=!1,t;try{this.inputPosition+=1,t=this.input.readByte()}catch(i){var n=i instanceof W?i.val:i;if(n instanceof F){e=!0,t=0}else throw i}if(e)return!1;var i,d,a;if(79==t?(this.inputPosition+=1,a=103!=this.input.readByte()):a=!0,a?d=!0:(this.inputPosition+=1,d=103!=this.input.readByte()),d?i=!0:(this.inputPosition+=1,i=83!=this.input.readByte()),i)throw new W(new tt(nt.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:218,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"maybeStartPacket"}));this.page.startWithoutCapturePattern(this)}return this.startPacket(),!0},readBits:function(e){if(0>this.validBits)return 0;if(this.validBits<e){if(24<e)return this.readBits(24)+(this.readBits(e-24)<<24);for(0==this.validBits&&(this.acc=0);;){if(0==this.bytesInSeg&&(this.lastSeg||0==this.next())){this.validBits=-1;break}else this.bytesInSeg--,this.inputPosition+=1,this.acc+=this.input.readByte()<<this.validBits,this.validBits+=8;if(!(this.validBits<e))break}if(0>this.validBits)return 0;var t=this.acc&(1<<e)-1;return this.acc>>>=e,this.validBits-=e,t}var n=this.acc&(1<<e)-1;return this.acc>>>=e,this.validBits-=e,n},readPacketRaw:function(){return 0==this.bytesInSeg&&(this.lastSeg||0==this.next())?-1:(this.bytesInSeg--,this.inputPosition+=1,this.input.readByte())},readPacket:function(){var e;return 0==this.bytesInSeg&&(this.lastSeg||0==this.next())?e=-1:(this.bytesInSeg--,this.inputPosition+=1,e=this.input.readByte()),this.validBits=0,e},flushPacket:function(){for(;0!=this.bytesInSeg||!this.lastSeg&&0!=this.next();)this.bytesInSeg--,this.inputPosition+=1,this.input.readByte()},vorbisValidate:function(){var e=new L(new ArrayBuffer(6)),t;0==this.bytesInSeg&&(this.lastSeg||0==this.next())?t=-1:(this.bytesInSeg--,this.inputPosition+=1,t=this.input.readByte()),this.validBits=0,e.b[0]=t;var n;0==this.bytesInSeg&&(this.lastSeg||0==this.next())?n=-1:(this.bytesInSeg--,this.inputPosition+=1,n=this.input.readByte()),this.validBits=0,e.b[1]=n;var i;0==this.bytesInSeg&&(this.lastSeg||0==this.next())?i=-1:(this.bytesInSeg--,this.inputPosition+=1,i=this.input.readByte()),this.validBits=0,e.b[2]=i;var d;0==this.bytesInSeg&&(this.lastSeg||0==this.next())?d=-1:(this.bytesInSeg--,this.inputPosition+=1,d=this.input.readByte()),this.validBits=0,e.b[3]=d;var a;0==this.bytesInSeg&&(this.lastSeg||0==this.next())?a=-1:(this.bytesInSeg--,this.inputPosition+=1,a=this.input.readByte()),this.validBits=0,e.b[4]=a;var r;if(0==this.bytesInSeg&&(this.lastSeg||0==this.next())?r=-1:(this.bytesInSeg--,this.inputPosition+=1,r=this.input.readByte()),this.validBits=0,e.b[5]=r,"vorbis"!=e.toString())throw new W(new tt(nt.INVALID_SETUP,"vorbis header",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:301,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"vorbisValidate"}))},firstPageValidate:function(){if(1!=this.segments.length)throw new W(new tt(nt.INVALID_FIRST_PAGE,"segmentCount",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:308,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"firstPageValidate"}));if(30!=this.segments[0])throw new W(new tt(nt.INVALID_FIRST_PAGE,"decodeState head",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:311,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"firstPageValidate"}))},startFirstDecode:function(){this.firstAudioPageOffset=this.inputPosition,this.firstDecode=!0},capturePattern:function(){var e,t,n;if(this.inputPosition+=1,79==this.input.readByte()?(this.inputPosition+=1,n=103!=this.input.readByte()):n=!0,n?t=!0:(this.inputPosition+=1,t=103!=this.input.readByte()),t?e=!0:(this.inputPosition+=1,e=83!=this.input.readByte()),e)throw new W(new tt(nt.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:324,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"capturePattern"}))},skip:function(e){this.inputPosition+=e;for(var t=Array(e),n=0;n<e;){var d=n++;t[d]=this.input.readByte()}},prepHuffman:function(){if(24>=this.validBits)for(0==this.validBits&&(this.acc=0);;){if(0==this.bytesInSeg&&(this.lastSeg||0==this.next()))return;if(this.bytesInSeg--,this.inputPosition+=1,this.acc+=this.input.readByte()<<this.validBits,this.validBits+=8,!(24>=this.validBits))break}},decode:function(e){10>this.validBits&&this.prepHuffman();var t=e.fastHuffman[1023&this.acc],n;if(0<=t){var i=e.codewordLengths[t];this.acc>>>=i,this.validBits-=i,0>this.validBits?(this.validBits=0,n=-1):n=t}else n=this.decodeScalarRaw(e);return e.sparse&&(n=e.sortedValues[n]),n},decodeRaw:function(e){10>this.validBits&&this.prepHuffman();var t=e.fastHuffman[1023&this.acc];if(0<=t){var n=e.codewordLengths[t];return this.acc>>>=n,this.validBits-=n,0>this.validBits?(this.validBits=0,-1):t}return this.decodeScalarRaw(e)},isLastByte:function(){return!(0!=this.bytesInSeg)&&this.lastSeg},finishDecodePacket:function(e,t,n){var i=n.left.start,d=!1,a=t>>1;if(this.firstDecode)this.currentLoc=-a,this.discardSamplesDeferred=t-n.right.end,d=!0,this.firstDecode=!1;else if(0!=this.discardSamplesDeferred)n.left.start+=this.discardSamplesDeferred,i=n.left.start,this.discardSamplesDeferred=0;else;if(this.lastSegWhich==this.endSegWithKnownLoc){if(d&&0!=(4&this.page.flag)){var r=this.knownLocForPacket-(t-n.right.end);if(r<this.currentLoc+n.right.end){var s=r<this.currentLoc?0:r-this.currentLoc;return s+=n.left.start,this.currentLoc+=s,{len:s,left:i,right:n.right.start}}}this.currentLoc=this.knownLocForPacket-(a-n.left.start),d=!0}return d&&(this.currentLoc+=n.right.start-n.left.start),{len:n.right.end,left:i,right:n.right.start}},readInt32:function(){return this.inputPosition+=4,this.input.readInt32()},readByte:function(){return this.inputPosition+=1,this.input.readByte()},read:function(e){this.inputPosition+=e;for(var t=Array(e),n=t,d=0;d<e;){var a=d++;n[a]=this.input.readByte()}return n},readBytes:function(e){return this.inputPosition+=e,this.input.read(e)},readString:function(e){return this.inputPosition+=e,this.input.readString(e)},getSampleNumber:function(t,n){var d=this.inputPosition,a=S.gte(n,65536)&&S.gte(n-65536,this.firstAudioPageOffset)?n-65536:this.firstAudioPageOffset;t(this.inputPosition=a);var r=0,s=!1,o=this.findPage(t,n);switch(o._hx_index){case 0:var A=o.last,u=o.end;r=u,s=A;break;case 1:throw new W(new tt(nt.CANT_FIND_LAST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:519,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"getSampleNumber"}));}var e=this.inputPosition;_hx_loop1:for(;!s;){t(this.inputPosition=r);var l=this.findPage(t,n);switch(l._hx_index){case 0:var _=l.last,f=l.end;r=f,s=_;break;case 1:break _hx_loop1;}a=e+1,e=this.inputPosition}t(this.inputPosition=e),this.inputPosition+=6;for(var c=[,,,,,,],g=c,p=0,h;p<6;)h=p++,g[h]=this.input.readByte();this.inputPosition+=4;var m=this.input.readInt32();this.inputPosition+=4;var b=this.input.readInt32();if(-1==m&&-1==b||0<b)throw new W(new tt(nt.CANT_FIND_LAST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:553,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"getSampleNumber"}));return this.pLast=new et,this.pLast.pageStart=e,this.pLast.pageEnd=r,this.pLast.lastDecodedSample=m,this.pLast.firstDecodedSample=null,this.pLast.afterPreviousPageStart=a,t(this.inputPosition=d),m},forcePageResync:function(){this.nextSeg=-1},setInputOffset:function(e,t){e(this.inputPosition=t)},findPage:function(e,t){try{for(;;){this.inputPosition+=1;var d=this.input.readByte();if(79==d){var n=this.inputPosition;if(n-25>t)return Me.NotFound;var a,r;if(this.inputPosition+=1,103==this.input.readByte()?(this.inputPosition+=1,r=103!=this.input.readByte()):r=!0,r?a=!0:(this.inputPosition+=1,a=83!=this.input.readByte()),a)continue;var o=Array(27),A=o;if(A[0]=79,A[1]=103,A[2]=103,A[3]=83,this.inputPosition+=1,A[4]=this.input.readByte(),this.inputPosition+=1,A[5]=this.input.readByte(),this.inputPosition+=1,A[6]=this.input.readByte(),this.inputPosition+=1,A[7]=this.input.readByte(),this.inputPosition+=1,A[8]=this.input.readByte(),this.inputPosition+=1,A[9]=this.input.readByte(),this.inputPosition+=1,A[10]=this.input.readByte(),this.inputPosition+=1,A[11]=this.input.readByte(),this.inputPosition+=1,A[12]=this.input.readByte(),this.inputPosition+=1,A[13]=this.input.readByte(),this.inputPosition+=1,A[14]=this.input.readByte(),this.inputPosition+=1,A[15]=this.input.readByte(),this.inputPosition+=1,A[16]=this.input.readByte(),this.inputPosition+=1,A[17]=this.input.readByte(),this.inputPosition+=1,A[18]=this.input.readByte(),this.inputPosition+=1,A[19]=this.input.readByte(),this.inputPosition+=1,A[20]=this.input.readByte(),this.inputPosition+=1,A[21]=this.input.readByte(),this.inputPosition+=1,A[22]=this.input.readByte(),this.inputPosition+=1,A[23]=this.input.readByte(),this.inputPosition+=1,A[24]=this.input.readByte(),this.inputPosition+=1,A[25]=this.input.readByte(),this.inputPosition+=1,A[26]=this.input.readByte(),0!=A[4]){e(this.inputPosition=n);continue}var u=A[22]+(A[23]<<8)+(A[24]<<16)+(A[25]<<24);A[22]=0,A[23]=0,A[24]=0,A[25]=0;for(var l=0,_=0,f;27>_;)f=_++,l=l<<8^Pe.table[A[f]^l>>>24];var c=0;try{for(var g=0,p=A[26],h;g<p;){h=g++,this.inputPosition+=1;var m=this.input.readByte();l=l<<8^Pe.table[m^l>>>24],c+=m}for(var s=0,b=c,x;s<b;){x=s++,this.inputPosition+=1;var S=this.input.readByte();l=l<<8^Pe.table[S^l>>>24]}}catch(t){var y=t instanceof W?t.val:t;if(y instanceof F){return Me.NotFound}throw t}if(l==u){var w=this.inputPosition;return e(this.inputPosition=n-1),Me.Found(w,0!=(4&A[5]))}}}}catch(e){var E=e instanceof W?e.val:e;if(E instanceof F){return Me.NotFound}throw e}},analyzePage:function(e,t){var d=new et,a=Array(255),r=a;d.pageStart=this.inputPosition,this.inputPosition+=27;for(var s=Array(27),o=s,A=0,u;A<27;)u=A++,o[u]=this.input.readByte();var l=o,_=l[26];this.inputPosition+=_;for(var n=Array(_),f=n,c=0,g;c<_;)g=c++,f[g]=this.input.readByte();for(var p=f,h=0,m=0,x=l[26],S;m<x;)S=m++,h+=p[S];if(d.pageEnd=d.pageStart+27+l[26]+h,d.lastDecodedSample=l[6]+(l[7]<<8)+(l[8]<<16)+(l[9]<<16),0!=(4&l[5]))return d.firstDecodedSample=null,e(this.inputPosition=d.pageStart),d;for(var y=0,w=0==(1&l[5]),E=t.modes.length,T=0,C=l[26],I;T<C;){if(I=T++,w){if(0==p[I])return e(this.inputPosition=d.pageStart),null;this.inputPosition+=1;var B=this.input.readByte();if(0!=(1&B))return e(this.inputPosition=d.pageStart),null;B>>=1;var k=E-1,v=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],L=16384>k?16>k?v[k]:512>k?5+v[k>>5]:10+v[k>>10]:16777216>k?524288>k?15+v[k>>15]:20+v[k>>20]:536870912>k?25+v[k>>25]:-2147483648>k?30+v[k>>30]:0;if(B&=(1<<L)-1,B>=E)return e(this.inputPosition=d.pageStart),null;r[y++]=t.modes[B].blockflag;var b=p[I]-1;this.inputPosition+=b;for(var O=Array(b),N=0,P;N<b;)P=N++,O[P]=this.input.readByte()}else{var R=p[I];this.inputPosition+=R;for(var V=Array(R),D=0,F;D<R;)F=D++,V[F]=this.input.readByte()}w=255>p[I]}var M=0;1<y&&(M+=r[y-1]?t.blocksize1:t.blocksize0);for(var U=y-2;1<=U;)--U,M+=r[U]?r[U+1]?t.blocksize1>>1:(t.blocksize1-t.blocksize0>>2)+(t.blocksize0>>1):t.blocksize0>>1,--U;return d.firstDecodedSample=d.lastDecodedSample-M,e(this.inputPosition=d.pageStart),d},decodeScalarRaw:function(e){this.prepHuffman();var t=e.codewordLengths,d=e.codewords,a=e.sortedCodewords;if(8<e.entries?null!=a:null!=d){var r=this.acc;r=(-1431655766&r)>>>1|(1431655765&r)<<1,r=(-858993460&r)>>>2|(858993459&r)<<2,r=(-252645136&r)>>>4|(252645135&r)<<4,r=(-16711936&r)>>>8|(16711935&r)<<8;for(var s=r>>>16|r<<16,o=0,A=e.sortedEntries,u;1<A;)u=o+(A>>1),S.gte(s,a[u])?(o=u,A-=A>>1):A>>=1;e.sparse||(o=e.sortedValues[o]);var l=t[o];return this.validBits>=l?(this.acc>>>=l,this.validBits-=l,o):(this.validBits=0,-1)}for(var _=0,f=e.entries;_<f;){var c=_++,i=t[c];if(255!=i&&d[c]==(this.acc&(1<<i)-1))return this.validBits>=i?(this.acc>>>=i,this.validBits-=i,c):(this.validBits=0,-1)}return this.error=new tt(nt.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:847,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"decodeScalarRaw"}),this.validBits=0,-1},__class__:Fe};var Me=A["kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult"]={__ename__:!0,__constructs__:["Found","NotFound"],Found:(l=function(e,t){return{_hx_index:0,end:e,last:t,__enum__:"kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult",toString:o}},l.__params__=["end","last"],l),NotFound:{_hx_index:1,__enum__:"kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult",toString:o}},Ue=function(e,t){this.header=e,this.decodeState=t,this.totalSample=null,this.currentSample=0,this.previousLength=0;var n=Array(e.channel);this.channelBuffers=n;var d=Array(e.channel);this.previousWindow=d;var a=Array(e.channel);this.finalY=a;for(var r=0,s=e.channel;r<s;){var o=r++,i=this.channelBuffers,A=Array(e.blocksize1);i[o]=A;var u=this.previousWindow,l=Array(0|e.blocksize1/2);u[o]=l,this.finalY[o]=[]}var _=[,,];this.a=_;var f=[,,];this.b=f;var c=[,,];this.c=c;var g=[,,];this.window=g;var p=[,,];this.bitReverseData=p,this.initBlocksize(0,e.blocksize0),this.initBlocksize(1,e.blocksize1)};s["kha.audio2.ogg.vorbis.VorbisDecoder"]=Ue,Ue.__name__=!0,Ue.start=function(e){var t=new Fe(e),n=Qe.read(t),i=new Ue(n,t);return t.startFirstDecode(),i.pumpFirstFrame(),i},Ue.prototype={previousWindow:null,previousLength:null,finalY:null,a:null,b:null,c:null,window:null,bitReverseData:null,channelBuffers:null,channelBufferStart:null,channelBufferEnd:null,header:null,currentSample:null,totalSample:null,decodeState:null,read:function(e,t,d,a,r){var s=this.header.sampleRate;if(0!=(0|S.toFloat(a)%S.toFloat(s))){var o=this.header.sampleRate;throw new W("Unsupported sampleRate : can't convert "+h.string(null==o?null:S.toFloat(o))+" to "+a)}if(0!=d%this.header.channel)throw new W("Unsupported channels : can't convert "+this.header.channel+" to "+d);var A=this.header.sampleRate,u=0|S.toFloat(a)/S.toFloat(A),l=0|d/this.header.channel,_=0,f=Math.floor(t/u);null!=this.totalSample&&f>this.totalSample-this.currentSample&&(f=this.totalSample-this.currentSample);for(var c=0,g;_<f;){g=this.channelBufferEnd-this.channelBufferStart,g>=f-_&&(g=f-_);for(var p=this.channelBufferStart,m=this.channelBufferStart+g;p<m;)for(var b=p++,x=0;x<u;)for(var y=x++,w=0,E=this.header.channel;w<E;)for(var T=w++,i=0;i<l;){var C=i++,I=this.channelBuffers[T][b];1<I?I=1:-1>I&&(I=-1),r&&(e[c]=I,++c)}if(_+=g,this.channelBufferStart+=g,_==f||0==this.getFrameFloat())break}for(var B=_,v=f;B<v;)for(var L=B++,O=0;O<u;)for(var N=O++,P=0,R=this.header.channel;P<R;)for(var V=P++,D=0,F;D<l;)F=D++,r&&(e[c]=0,++c);return this.currentSample+=f,f*u},skipSamples:function(e){var t=0;for(null!=this.totalSample&&e>this.totalSample-this.currentSample&&(e=this.totalSample-this.currentSample);t<e;){var i=this.channelBufferEnd-this.channelBufferStart;if(i>=e-t&&(i=e-t),t+=i,this.channelBufferStart+=i,t==e||0==this.getFrameFloat())break}return this.currentSample+=e,e},setupSampleNumber:function(e,t){null==this.totalSample&&(this.totalSample=this.decodeState.getSampleNumber(e,t))},seek:function(e,t,n){if(this.currentSample!=n){if(null==this.totalSample&&(this.setupSampleNumber(e,t),0==this.totalSample))throw new W(new tt(nt.CANT_FIND_LAST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:187,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));0>n&&(n=0);var i=this.decodeState.pFirst,d=this.decodeState.pLast;if(n>=d.lastDecodedSample&&(n=d.lastDecodedSample-1),n<i.lastDecodedSample)this.seekFrameFromPage(e,i.pageStart,0,n);else{for(var a=0;i.pageEnd<d.pageStart;){var r=i.pageEnd,s=d.afterPreviousPageStart,o=i.lastDecodedSample,A=d.lastDecodedSample;if(null==o||null==A)throw new W(new tt(nt.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:219,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));S.gt(s,r+4e3)&&(s-=4e3);var u=r+Math.floor(S.toFloat(s-r)/S.toFloat(A-o)*(n-o));if(4<=a){var l=r+(s-r>>>1);u=8<=a?l:S.gt(l,u)?u+(l-u>>>1):l+(u-l>>>1)}++a,e(this.decodeState.inputPosition=u);var _=this.decodeState.findPage(e,t);switch(_._hx_index){case 0:var f=_.last,c=_.end;break;case 1:throw new W(new tt(nt.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:249,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));}var g=this.decodeState.analyzePage(e,this.header);if(null==g)throw new W(new tt(nt.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:255,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}));if(g.afterPreviousPageStart=u,g.pageStart==d.pageStart){d=g;continue}n<g.lastDecodedSample?d=g:i=g}if(i.lastDecodedSample<=n&&n<d.lastDecodedSample)this.seekFrameFromPage(e,d.pageStart,i.lastDecodedSample,n);else throw new W(new tt(nt.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:275,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"seek"}))}}},seekFrameFromPage:function(e,t,n,i){var d=0,a=n;e(this.decodeState.inputPosition=t),this.decodeState.nextSeg=-1;for(var r=0,s=0,o=null,A=null;;){o=A,A=this.decodeState.clone(e);var u=this.decodeInitial();if(null==u){A=o;break}s=u.left.start,r=u.left.end;var l=0==d?r:s;if(i<a+u.right.start-l)break;for(var _=this.decodeState;0!=_.bytesInSeg||!_.lastSeg&&0!=_.next();)_.bytesInSeg--,_.inputPosition+=1,_.input.readByte();a+=u.right.start-l,++d}this.decodeState=A,e(this.decodeState.inputPosition),this.previousLength=0,this.pumpFirstFrame(),this.currentSample=a,this.skipSamples(i-a)},clone:function(e){var t=Object.create(Ue.prototype);t.currentSample=this.currentSample,t.totalSample=this.totalSample,t.previousLength=this.previousLength,t.channelBufferStart=this.channelBufferStart,t.channelBufferEnd=this.channelBufferEnd,t.a=this.a,t.b=this.b,t.c=this.c,t.window=this.window,t.bitReverseData=this.bitReverseData,t.header=this.header,t.decodeState=this.decodeState.clone(e);var n=Array(this.header.channel);t.channelBuffers=n;var d=Array(this.header.channel);t.previousWindow=d;var a=Array(this.header.channel);t.finalY=a;for(var r=0,s=this.header.channel;r<s;){var o=r++;t.channelBuffers[o]=He.copyVector(this.channelBuffers[o]),t.previousWindow[o]=He.copyVector(this.previousWindow[o]),t.finalY[o]=f.array(this.finalY[o])}return t},ensurePosition:function(e){e(this.decodeState.inputPosition)},getFrameFloat:function(){var e=this.decodePacket();if(null==e)return this.channelBufferStart=this.channelBufferEnd=0,0;var t=this.finishFrame(e);return this.channelBufferStart=e.left,this.channelBufferEnd=e.left+t,t},pumpFirstFrame:function(){this.finishFrame(this.decodePacket())},finishFrame:function(e){var t=e.len,d=e.right,a=e.left;if(0!=this.previousLength)for(var r=this.previousLength,n=this.getWindow(r),s=0,o=this.header.channel;s<o;)for(var A=s++,i=this.channelBuffers[A],u=this.previousWindow[A],l=0,_;l<r;)_=l++,i[a+_]=i[a+_]*n[_]+u[_]*n[r-1-_];var f=this.previousLength;this.previousLength=t-d;for(var c=0,g=this.header.channel;c<g;)for(var p=c++,h=this.previousWindow[p],m=this.channelBuffers[p],b=0,x=t-d,S;b<x;)S=b++,h[S]=m[d+S];return 0==f?0:(t<d&&(d=t),d-a)},getWindow:function(e){return e<<=1,e==this.header.blocksize0?this.window[0]:e==this.header.blocksize1?this.window[1]:null},initBlocksize:function(e,t){var n=t>>1,i=this.a,d=Array(n);i[e]=d;var a=this.b,r=Array(n);a[e]=r;var s=this.c,o=Array(t>>2);s[e]=o;var A=this.window,u=Array(n);A[e]=u;var l=this.bitReverseData,_=Array(t>>3);l[e]=_,He.computeTwiddleFactors(t,this.a[e],this.b[e],this.c[e]),He.computeWindow(t,this.window[e]),He.computeBitReverse(t,this.bitReverseData[e])},inverseMdct:function(e,t,n){for(var d=n?1:0,s=this.a[d],a=this.b[d],o=this.c[d],A=this.bitReverseData[d],_=t>>1,f=t>>2,c=t>>3,g=Array(_),p=g,h=_-2,m=0,b=0;b!=_;)p[h+1]=e[b]*s[m]-e[b+2]*s[m+1],p[h]=e[b]*s[m+1]+e[b+2]*s[m],h-=2,m+=2,b+=4;for(b=_-3;0<=h;)p[h+1]=-e[b+2]*s[m]- -e[b]*s[m+1],p[h]=-e[b+2]*s[m+1]+-e[b]*s[m],h-=2,m+=2,b-=4;for(var x=e,u=p,S=_-8,y=f,w=0,E=f,T=0;0<=S;){var C=u[y+1]-u[w+1],I=u[y]-u[w];x[E+1]=u[y+1]+u[w+1],x[E]=u[y]+u[w],x[T+1]=C*s[S+4]-I*s[S+5],x[T]=I*s[S+4]+C*s[S+5],C=u[y+3]-u[w+3],I=u[y+2]-u[w+2],x[E+3]=u[y+3]+u[w+3],x[E+2]=u[y+2]+u[w+2],x[T+3]=C*s[S]-I*s[S+1],x[T+2]=I*s[S]+C*s[S+1],S-=8,E+=4,T+=4,y+=4,w+=4}for(var B=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],k=(16384>t?16>t?B[t]:512>t?5+B[t>>5]:10+B[t>>10]:16777216>t?524288>t?15+B[t>>15]:20+B[t>>20]:536870912>t?25+B[t>>25]:-2147483648>t?30+B[t>>30]:0)-1,v=_-1-0*f,L=v,O=v+-(t>>3),N=0,P=(t>>4>>2)+1;0<--P;){var R=x[L]-x[O],V=x[L+-1]-x[O+-1],D=L;x[D]+=x[O];var F=L+-1;x[F]+=x[O+-1],x[O]=R*s[N]-V*s[N+1],x[O+-1]=V*s[N]+R*s[N+1],N+=8,R=x[L+-2]-x[O+-2],V=x[L+-3]-x[O+-3];var M=L+-2;x[M]+=x[O+-2];var U=L+-3;x[U]+=x[O+-3],x[O+-2]=R*s[N]-V*s[N+1],x[O+-3]=V*s[N]+R*s[N+1],N+=8,R=x[L+-4]-x[O+-4],V=x[L+-5]-x[O+-5];var H=L+-4;x[H]+=x[O+-4];var W=L+-5;x[W]+=x[O+-5],x[O+-4]=R*s[N]-V*s[N+1],x[O+-5]=V*s[N]+R*s[N+1],N+=8,R=x[L+-6]-x[O+-6],V=x[L+-7]-x[O+-7];var G=L+-6;x[G]+=x[O+-6];var z=L+-7;x[z]+=x[O+-7],x[O+-6]=R*s[N]-V*s[N+1],x[O+-7]=V*s[N]+R*s[N+1],N+=8,L-=8,O-=8}for(var Y=_-1-f,X=Y,Q=Y+-(t>>3),j=0,K=(t>>4>>2)+1;0<--K;){var q=x[X]-x[Q],Z=x[X+-1]-x[Q+-1],J=X;x[J]+=x[Q];var $=X+-1;x[$]+=x[Q+-1],x[Q]=q*s[j]-Z*s[j+1],x[Q+-1]=Z*s[j]+q*s[j+1],j+=8,q=x[X+-2]-x[Q+-2],Z=x[X+-3]-x[Q+-3];var ee=X+-2;x[ee]+=x[Q+-2];var te=X+-3;x[te]+=x[Q+-3],x[Q+-2]=q*s[j]-Z*s[j+1],x[Q+-3]=Z*s[j]+q*s[j+1],j+=8,q=x[X+-4]-x[Q+-4],Z=x[X+-5]-x[Q+-5];var ne=X+-4;x[ne]+=x[Q+-4];var ie=X+-5;x[ie]+=x[Q+-5],x[Q+-4]=q*s[j]-Z*s[j+1],x[Q+-5]=Z*s[j]+q*s[j+1],j+=8,q=x[X+-6]-x[Q+-6],Z=x[X+-7]-x[Q+-7];var de=X+-6;x[de]+=x[Q+-6];var ae=X+-7;x[ae]+=x[Q+-7],x[Q+-6]=q*s[j]-Z*s[j+1],x[Q+-7]=Z*s[j]+q*s[j+1],j+=8,X-=8,Q-=8}for(var re=_-1-0*c,se=0,oe=re,Ae=re+-(t>>4),ue=(t>>5>>2)+1;0<--ue;){var le=x[oe]-x[Ae],_e=x[oe+-1]-x[Ae+-1],fe=oe;x[fe]+=x[Ae];var ce=oe+-1;x[ce]+=x[Ae+-1],x[Ae]=le*s[se]-_e*s[se+1],x[Ae+-1]=_e*s[se]+le*s[se+1],se+=16,le=x[oe+-2]-x[Ae+-2],_e=x[oe+-3]-x[Ae+-3];var ge=oe+-2;x[ge]+=x[Ae+-2];var pe=oe+-3;x[pe]+=x[Ae+-3],x[Ae+-2]=le*s[se]-_e*s[se+1],x[Ae+-3]=_e*s[se]+le*s[se+1],se+=16,le=x[oe+-4]-x[Ae+-4],_e=x[oe+-5]-x[Ae+-5];var he=oe+-4;x[he]+=x[Ae+-4];var me=oe+-5;x[me]+=x[Ae+-5],x[Ae+-4]=le*s[se]-_e*s[se+1],x[Ae+-5]=_e*s[se]+le*s[se+1],se+=16,le=x[oe+-6]-x[Ae+-6],_e=x[oe+-7]-x[Ae+-7];var be=oe+-6;x[be]+=x[Ae+-6];var xe=oe+-7;x[xe]+=x[Ae+-7],x[Ae+-6]=le*s[se]-_e*s[se+1],x[Ae+-7]=_e*s[se]+le*s[se+1],oe-=8,Ae-=8,se+=16}for(var Se=_-1-c,ye=0,we=Se,Ee=Se+-(t>>4),Te=(t>>5>>2)+1;0<--Te;){var Ce=x[we]-x[Ee],Ie=x[we+-1]-x[Ee+-1],Be=we;x[Be]+=x[Ee];var ke=we+-1;x[ke]+=x[Ee+-1],x[Ee]=Ce*s[ye]-Ie*s[ye+1],x[Ee+-1]=Ie*s[ye]+Ce*s[ye+1],ye+=16,Ce=x[we+-2]-x[Ee+-2],Ie=x[we+-3]-x[Ee+-3];var ve=we+-2;x[ve]+=x[Ee+-2];var Le=we+-3;x[Le]+=x[Ee+-3],x[Ee+-2]=Ce*s[ye]-Ie*s[ye+1],x[Ee+-3]=Ie*s[ye]+Ce*s[ye+1],ye+=16,Ce=x[we+-4]-x[Ee+-4],Ie=x[we+-5]-x[Ee+-5];var Oe=we+-4;x[Oe]+=x[Ee+-4];var Ne=we+-5;x[Ne]+=x[Ee+-5],x[Ee+-4]=Ce*s[ye]-Ie*s[ye+1],x[Ee+-5]=Ie*s[ye]+Ce*s[ye+1],ye+=16,Ce=x[we+-6]-x[Ee+-6],Ie=x[we+-7]-x[Ee+-7];var Pe=we+-6;x[Pe]+=x[Ee+-6];var Re=we+-7;x[Re]+=x[Ee+-7],x[Ee+-6]=Ce*s[ye]-Ie*s[ye+1],x[Ee+-7]=Ie*s[ye]+Ce*s[ye+1],we-=8,Ee-=8,ye+=16}for(var Ve=_-1-2*c,De=0,Fe=Ve,Me=Ve+-(t>>4),Ue=(t>>5>>2)+1;0<--Ue;){var He=x[Fe]-x[Me],We=x[Fe+-1]-x[Me+-1],Ge=Fe;x[Ge]+=x[Me];var ze=Fe+-1;x[ze]+=x[Me+-1],x[Me]=He*s[De]-We*s[De+1],x[Me+-1]=We*s[De]+He*s[De+1],De+=16,He=x[Fe+-2]-x[Me+-2],We=x[Fe+-3]-x[Me+-3];var Ye=Fe+-2;x[Ye]+=x[Me+-2];var Xe=Fe+-3;x[Xe]+=x[Me+-3],x[Me+-2]=He*s[De]-We*s[De+1],x[Me+-3]=We*s[De]+He*s[De+1],De+=16,He=x[Fe+-4]-x[Me+-4],We=x[Fe+-5]-x[Me+-5];var Qe=Fe+-4;x[Qe]+=x[Me+-4];var je=Fe+-5;x[je]+=x[Me+-5],x[Me+-4]=He*s[De]-We*s[De+1],x[Me+-5]=We*s[De]+He*s[De+1],De+=16,He=x[Fe+-6]-x[Me+-6],We=x[Fe+-7]-x[Me+-7];var Ke=Fe+-6;x[Ke]+=x[Me+-6];var qe=Fe+-7;x[qe]+=x[Me+-7],x[Me+-6]=He*s[De]-We*s[De+1],x[Me+-7]=We*s[De]+He*s[De+1],Fe-=8,Me-=8,De+=16}for(var Ze=_-1-3*c,Je=0,$e=Ze,et=Ze+-(t>>4),tt=(t>>5>>2)+1;0<--tt;){var nt=x[$e]-x[et],it=x[$e+-1]-x[et+-1],dt=$e;x[dt]+=x[et];var at=$e+-1;x[at]+=x[et+-1],x[et]=nt*s[Je]-it*s[Je+1],x[et+-1]=it*s[Je]+nt*s[Je+1],Je+=16,nt=x[$e+-2]-x[et+-2],it=x[$e+-3]-x[et+-3];var rt=$e+-2;x[rt]+=x[et+-2];var st=$e+-3;x[st]+=x[et+-3],x[et+-2]=nt*s[Je]-it*s[Je+1],x[et+-3]=it*s[Je]+nt*s[Je+1],Je+=16,nt=x[$e+-4]-x[et+-4],it=x[$e+-5]-x[et+-5];var ot=$e+-4;x[ot]+=x[et+-4];var At=$e+-5;x[At]+=x[et+-5],x[et+-4]=nt*s[Je]-it*s[Je+1],x[et+-5]=it*s[Je]+nt*s[Je+1],Je+=16,nt=x[$e+-6]-x[et+-6],it=x[$e+-7]-x[et+-7];var ut=$e+-6;x[ut]+=x[et+-6];var lt=$e+-7;x[lt]+=x[et+-7],x[et+-6]=nt*s[Je]-it*s[Je+1],x[et+-7]=it*s[Je]+nt*s[Je+1],$e-=8,et-=8,Je+=16}for(var _t=2;_t<k-3>>1;)for(var ft=_t++,l=t>>ft+2,ct=0;ct<1<<ft+1;)for(var gt=ct++,pt=_-1-l*gt,ht=1<<ft+3,mt=0,bt=pt,xt=pt+-(l>>1),St=(t>>ft+4>>2)+1;0<--St;){var yt=x[bt]-x[xt],wt=x[bt+-1]-x[xt+-1],Et=bt;x[Et]+=x[xt];var Tt=bt+-1;x[Tt]+=x[xt+-1],x[xt]=yt*s[mt]-wt*s[mt+1],x[xt+-1]=wt*s[mt]+yt*s[mt+1],mt+=ht,yt=x[bt+-2]-x[xt+-2],wt=x[bt+-3]-x[xt+-3];var Ct=bt+-2;x[Ct]+=x[xt+-2];var It=bt+-3;x[It]+=x[xt+-3],x[xt+-2]=yt*s[mt]-wt*s[mt+1],x[xt+-3]=wt*s[mt]+yt*s[mt+1],mt+=ht,yt=x[bt+-4]-x[xt+-4],wt=x[bt+-5]-x[xt+-5];var Bt=bt+-4;x[Bt]+=x[xt+-4];var kt=bt+-5;x[kt]+=x[xt+-5],x[xt+-4]=yt*s[mt]-wt*s[mt+1],x[xt+-5]=wt*s[mt]+yt*s[mt+1],mt+=ht,yt=x[bt+-6]-x[xt+-6],wt=x[bt+-7]-x[xt+-7];var vt=bt+-6;x[vt]+=x[xt+-6];var Lt=bt+-7;x[Lt]+=x[xt+-7],x[xt+-6]=yt*s[mt]-wt*s[mt+1],x[xt+-7]=wt*s[mt]+yt*s[mt+1],bt-=8,xt-=8,mt+=ht}for(var Ot=k-3>>1;Ot<k-6;)for(var Nt=Ot++,Pt=t>>Nt+2,Rt=1<<Nt+3,Vt=0,Dt=_-1,Ft=(t>>Nt+6)+1;0<--Ft;){for(var Mt=s[Vt],Ut=s[Vt+1],Ht=s[Vt+Rt],Wt=s[Vt+Rt+1],Gt=s[Vt+2*Rt],zt=s[Vt+2*Rt+1],Yt=s[Vt+3*Rt],Xt=s[Vt+3*Rt+1],Qt=Dt,jt=Dt+-(Pt>>1),Kt=(1<<Nt+1)+1;0<--Kt;){var qt=x[Qt]-x[jt],Zt=x[Qt+-1]-x[jt+-1];x[Qt]+=x[jt],x[Qt+-1]=x[Qt+-1]+x[jt+-1],x[jt]=qt*Mt-Zt*Ut,x[jt+-1]=Zt*Mt+qt*Ut,qt=x[Qt+-2]-x[jt+-2],Zt=x[Qt+-3]-x[jt+-3],x[Qt+-2]=x[Qt+-2]+x[jt+-2],x[Qt+-3]=x[Qt+-3]+x[jt+-3],x[jt+-2]=qt*Ht-Zt*Wt,x[jt+-3]=Zt*Ht+qt*Wt,qt=x[Qt+-4]-x[jt+-4],Zt=x[Qt+-5]-x[jt+-5],x[Qt+-4]=x[Qt+-4]+x[jt+-4],x[Qt+-5]=x[Qt+-5]+x[jt+-5],x[jt+-4]=qt*Gt-Zt*zt,x[jt+-5]=Zt*Gt+qt*zt,qt=x[Qt+-6]-x[jt+-6],Zt=x[Qt+-7]-x[jt+-7],x[Qt+-6]=x[Qt+-6]+x[jt+-6],x[Qt+-7]=x[Qt+-7]+x[jt+-7],x[jt+-6]=qt*Yt-Zt*Xt,x[jt+-7]=Zt*Yt+qt*Xt,Qt-=Pt,jt-=Pt}Vt+=4*Rt,Dt-=8}for(var Jt=_-1,$t=s[t>>3],en=Jt;en>Jt-16*(t>>5);){var tn=x[en],nn=x[en+-8];x[en+-8]=tn-nn,x[en]=tn+nn,tn=x[en+-1],nn=x[en+-9],x[en+-9]=tn-nn,x[en+-1]=tn+nn,tn=x[en+-2],nn=x[en+-10];var dn=tn-nn;x[en+-2]=tn+nn,tn=x[en+-3],nn=x[en+-11];var an=tn-nn;x[en+-3]=tn+nn,x[en+-10]=(dn+an)*$t,x[en+-11]=(an-dn)*$t,tn=x[en+-4],nn=x[en+-12],dn=nn-tn,x[en+-4]=tn+nn,tn=x[en+-5],nn=x[en+-13],an=tn-nn,x[en+-5]=tn+nn,x[en+-12]=an,x[en+-13]=dn,tn=x[en+-6],nn=x[en+-14],dn=nn-tn,x[en+-6]=tn+nn,tn=x[en+-7],nn=x[en+-15],an=tn-nn,x[en+-7]=tn+nn,x[en+-14]=(dn+an)*$t,x[en+-15]=(dn-an)*$t;var rn=x[en],sn=x[en+-4],on=rn-sn,An=rn+sn;rn=x[en+-2],sn=x[en+-6];var un=rn+sn,ln=rn-sn;x[en]=An+un,x[en+-2]=An-un;var _n=x[en+-3]-x[en+-7];x[en+-4]=on+_n,x[en+-6]=on-_n,rn=x[en+-1],sn=x[en+-5];var fn=rn-sn,cn=rn+sn,gn=x[en+-3]+x[en+-7];x[en+-1]=cn+gn,x[en+-3]=cn-gn,x[en+-5]=fn-ln,x[en+-7]=fn+ln;var pn=en-8,hn=x[pn],mn=x[pn+-4],bn=hn-mn,xn=hn+mn;hn=x[pn+-2],mn=x[pn+-6];var Sn=hn+mn,yn=hn-mn;x[pn]=xn+Sn,x[pn+-2]=xn-Sn;var wn=x[pn+-3]-x[pn+-7];x[pn+-4]=bn+wn,x[pn+-6]=bn-wn,hn=x[pn+-1],mn=x[pn+-5];var En=hn-mn,Tn=hn+mn,Cn=x[pn+-3]+x[pn+-7];x[pn+-1]=Tn+Cn,x[pn+-3]=Tn-Cn,x[pn+-5]=En-yn,x[pn+-7]=En+yn,en-=16}for(var In=0,Bn=f-4,kn=_-4;0<=Bn;){var vn=A[In];u[kn+3]=x[vn],u[kn+2]=x[vn+1],u[Bn+3]=x[vn+2],u[Bn+2]=x[vn+3],vn=A[In+1],u[kn+1]=x[vn],u[kn]=x[vn+1],u[Bn+1]=x[vn+2],u[Bn]=x[vn+3],Bn-=4,kn-=4,In+=2}for(var Ln=0,On=0,Nn=_-4;On<Nn;){var Pn=u[On]-u[Nn+2],Rn=u[On+1]+u[Nn+3],Vn=o[Ln+1]*Pn+o[Ln]*Rn,Dn=o[Ln+1]*Rn-o[Ln]*Pn,Fn=u[On]+u[Nn+2],Mn=u[On+1]-u[Nn+3];u[On]=Fn+Vn,u[On+1]=Mn+Dn,u[Nn+2]=Fn-Vn,u[Nn+3]=Dn-Mn,Pn=u[On+2]-u[Nn],Rn=u[On+3]+u[Nn+1],Vn=o[Ln+3]*Pn+o[Ln+2]*Rn,Dn=o[Ln+3]*Rn-o[Ln+2]*Pn,Fn=u[On+2]+u[Nn],Mn=u[On+3]-u[Nn+1],u[On+2]=Fn+Vn,u[On+3]=Mn+Dn,u[Nn]=Fn-Vn,u[Nn+1]=Dn-Mn,Ln+=4,On+=4,Nn-=4}for(var Un=_-8,Hn=_-8,Wn=0,Gn=_-4,zn=_,Yn=t-4;0<=Hn;){var Xn=p[Hn+6]*a[Un+7]-p[Hn+7]*a[Un+6],Qn=-p[Hn+6]*a[Un+6]-p[Hn+7]*a[Un+7];e[Wn]=Xn,e[Gn+3]=-Xn,e[zn]=Qn,e[Yn+3]=Qn;var jn=p[Hn+4]*a[Un+5]-p[Hn+5]*a[Un+4],Kn=-p[Hn+4]*a[Un+4]-p[Hn+5]*a[Un+5];e[Wn+1]=jn,e[Gn+2]=-jn,e[zn+1]=Kn,e[Yn+2]=Kn,Xn=p[Hn+2]*a[Un+3]-p[Hn+3]*a[Un+2],Qn=-p[Hn+2]*a[Un+2]-p[Hn+3]*a[Un+3],e[Wn+2]=Xn,e[Gn+1]=-Xn,e[zn+2]=Qn,e[Yn+1]=Qn,jn=p[Hn]*a[Un+1]-p[Hn+1]*a[Un],Kn=-p[Hn]*a[Un]-p[Hn+1]*a[Un+1],e[Wn+3]=jn,e[Gn]=-jn,e[zn+3]=Kn,e[Yn]=Kn,Un-=8,Hn-=8,Wn+=4,zn+=4,Gn-=4,Yn-=4}},decodePacket:function(){var e=this.decodeInitial();if(null==e)return null;var t=this.decodePacketRest(e);return t},decodeInitial:function(){for(this.channelBufferStart=this.channelBufferEnd=0;;){if(!this.decodeState.maybeStartPacket())return null;if(0!=this.decodeState.readBits(1)){for(;;){var e=this.decodeState,t;if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())?t=-1:(e.bytesInSeg--,e.inputPosition+=1,t=e.input.readByte()),e.validBits=0,-1==t)break}continue}break}var d=this.header.modes.length-1,n=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],a=this.decodeState.readBits(16384>d?16>d?n[d]:512>d?5+n[d>>5]:10+n[d>>10]:16777216>d?524288>d?15+n[d>>15]:20+n[d>>20]:536870912>d?25+n[d>>25]:-2147483648>d?30+n[d>>30]:0);if(-1==a||a>=this.header.modes.length)throw new W(new tt(nt.SEEK_FAILED,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:519,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"decodeInitial"}));var i=this.header.modes[a],r,s,o;i.blockflag?(r=this.header.blocksize1,s=this.decodeState.readBits(1),o=this.decodeState.readBits(1)):(o=0,s=o,r=this.header.blocksize0);var A=r>>1;return{mode:a,left:i.blockflag&&0==s?{start:r-this.header.blocksize0>>2,end:r+this.header.blocksize0>>2}:{start:0,end:A},right:i.blockflag&&0==o?{start:3*r-this.header.blocksize0>>2,end:3*r+this.header.blocksize0>>2}:{start:A,end:r}}},decodePacketRest:function(e){for(var t=this.header.modes[e.mode],d=Array(256),r=d,o=Array(256),A=o,u=t.blockflag?this.header.blocksize1:this.header.blocksize0,n=this.header.mapping[t.mapping],_=u>>1,f=[256,128,86,64],p=this.header.codebooks,h=0,m=this.header.channel;h<m;){var b=h++,i=n.chan[b].mux;r[b]=!1;var s=this.header.floorConfig[n.submapFloor[i]];if(0==s.type)throw new W(new tt(nt.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecoder.hx",lineNumber:581,className:"kha.audio2.ogg.vorbis.VorbisDecoder",methodName:"decodePacketRest"}));else{var x=s.floor1;if(0!=this.decodeState.readBits(1)){var g=[],S=Array(256),y=S,w=f[x.floor1Multiplier-1],E=2;g=this.finalY[b];var T=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];g[0]=this.decodeState.readBits((16384>w?16>w?T[w]:512>w?5+T[w>>5]:10+T[w>>10]:16777216>w?524288>w?15+T[w>>15]:20+T[w>>20]:536870912>w?25+T[w>>25]:-2147483648>w?30+T[w>>30]:0)-1);var C=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];g[1]=this.decodeState.readBits((16384>w?16>w?C[w]:512>w?5+C[w>>5]:10+C[w>>10]:16777216>w?524288>w?15+C[w>>15]:20+C[w>>20]:536870912>w?25+C[w>>25]:-2147483648>w?30+C[w>>30]:0)-1);for(var I=0,B=x.partitions;I<B;){var v=I++,L=x.partitionClassList[v],O=x.classDimensions[L],N=x.classSubclasses[L],P=0;if(0!=N){var R=p[x.classMasterbooks[L]],c=this.decodeState;10>c.validBits&&c.prepHuffman();var V=R.fastHuffman[1023&c.acc],D;if(0<=V){var F=R.codewordLengths[V];c.acc>>>=F,c.validBits-=F,0>c.validBits?(c.validBits=0,D=-1):D=V}else D=c.decodeScalarRaw(R);R.sparse&&(D=R.sortedValues[D]),P=D}for(var l=x.subclassBooks[L],M=0;M<O;){var U=M++,k=l[P&(1<<N)-1];P>>=N;var H=E++,G;if(0<=k){var z=this.decodeState,Y=p[k];10>z.validBits&&z.prepHuffman();var X=Y.fastHuffman[1023&z.acc],Q;if(0<=X){var j=Y.codewordLengths[X];z.acc>>>=j,z.validBits-=j,0>z.validBits?(z.validBits=0,Q=-1):Q=X}else Q=z.decodeScalarRaw(Y);Y.sparse&&(Q=Y.sortedValues[Q]),G=Q}else G=0;g[H]=G}}if(-1==this.decodeState.validBits){r[b]=!0;continue}y[0]=y[1]=!0;for(var K=x.neighbors,q=x.xlist,Z=2,J=x.values;Z<J;){var $=Z++,ee=K[$][0],te=K[$][1],ne=q[ee],ie=g[ee],de=g[te]-ie,ae=q[te]-ne,re=Math.abs(de)*(q[$]-ne),se=0|re/ae,oe=0>de?ie-se:ie+se,Ae=g[$],ue=w-oe,le=ue<oe?2*ue:2*oe;0==Ae?(y[$]=!1,g[$]=oe):(y[ee]=y[te]=!0,y[$]=!0,g[$]=Ae>=le?ue>oe?Ae-oe+oe:oe-Ae+ue-1:0==(1&Ae)?oe+(Ae>>1):oe-(Ae+1>>1))}for(var _e=0,fe=x.values;_e<fe;){var ce=_e++;y[ce]||(g[ce]=-1)}}else r[b]=!0}}for(var ge=0,pe=this.header.channel;ge<pe;){var he=ge++;A[he]=r[he]}for(var me=0,be=n.couplingSteps;me<be;){var xe=me++;r[n.chan[xe].magnitude]&&r[n.chan[xe].angle]||(r[n.chan[xe].magnitude]=r[n.chan[xe].angle]=!1)}for(var Se=0,ye=n.submaps;Se<ye;){for(var we=Se++,Ee=Array(this.header.channel),Te=Ee,Ce=Array(256),Ie=Ce,Be=0,ke=0,ve=this.header.channel;ke<ve;){var Le=ke++;n.chan[Le].mux==we&&(r[Le]?(Ie[Be]=!0,Te[Be]=null):(Ie[Be]=!1,Te[Be]=this.channelBuffers[Le]),++Be)}var Oe=n.submapResidue[we],Ne=this.header.residueConfig[Oe];Ne.decode(this.decodeState,this.header,Te,Be,_,Ie,this.channelBuffers)}for(var Pe=n.couplingSteps,Re=u>>1;0<=--Pe;)for(var Ve=this.channelBuffers[n.chan[Pe].magnitude],De=this.channelBuffers[n.chan[Pe].angle],a=0;a<Re;){var Fe=a++,Me,Ue;0<Ve[Fe]?0<De[Fe]?(Ue=Ve[Fe],Me=Ve[Fe]-De[Fe]):(Me=Ve[Fe],Ue=Ve[Fe]+De[Fe]):0<De[Fe]?(Ue=Ve[Fe],Me=Ve[Fe]+De[Fe]):(Me=Ve[Fe],Ue=Ve[Fe]-De[Fe]),Ve[Fe]=Ue,De[Fe]=Me}for(var He=0,We=this.header.channel;He<We;){var Ge=He++;if(A[Ge])for(var ze=0,Ye;ze<Re;)Ye=ze++,this.channelBuffers[Ge][Ye]=0;else n.doFloor(this.header.floorConfig,Ge,u,this.channelBuffers[Ge],this.finalY[Ge],null)}for(var Xe=0,Qe=this.header.channel;Xe<Qe;){var je=Xe++;this.inverseMdct(this.channelBuffers[je],u,t.blockflag)}for(var Ke=this.decodeState;0!=Ke.bytesInSeg||!Ke.lastSeg&&0!=Ke.next();)Ke.bytesInSeg--,Ke.inputPosition+=1,Ke.input.readByte();return this.decodeState.finishDecodePacket(this.previousLength,u,e)},__class__:Ue};var He=function(){};s["kha.audio2.ogg.vorbis.VorbisTools"]=He,He.__name__=!0,He.assert=function(){},He.neighbors=function(e,t){for(var n=-1,d=65536,a=0,r=0,s=0;s<t;){var o=s++;e[o]>n&&e[o]<e[t]&&(a=o,n=e[o]),e[o]<d&&e[o]>e[t]&&(r=o,d=e[o])}return{low:a,high:r}},He.floatUnpack=function(e){var t=S.toFloat(2097151&e),n=0==(-2147483648&e)?t:-t;return n*Math.pow(2,((2145386496&e)>>>21)-788)},He.bitReverse=function(e){return e=(-1431655766&e)>>>1|(1431655765&e)<<1,e=(-858993460&e)>>>2|(858993459&e)<<2,e=(-252645136&e)>>>4|(252645135&e)<<4,e=(-16711936&e)>>>8|(16711935&e)<<8,e>>>16|e<<16},He.pointCompare=function(e,t){return e.x<t.x?-1:e.x>t.x?1:0},He.uintAsc=function(e,t){return S.gt(t,e)?-1:e==t?0:1},He.lookup1Values=function(e,t){var n=0|Math.exp(Math.log(e)/t);return(0|Math.pow(n+1,t))<=e&&++n,n},He.computeWindow=function(e,t){for(var n=e>>1,d=0;d<n;){var a=d++;t[a]=Math.sin(1.5707963267948966*He.square(Math.sin(3.141592653589793*(.5*((a+.5)/n)))))}},He.square=function(e){return e*e},He.computeBitReverse=function(e,t){for(var n=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],d=(16384>e?16>e?n[e]:512>e?5+n[e>>5]:10+n[e>>10]:16777216>e?524288>e?15+n[e>>15]:20+n[e>>20]:536870912>e?25+n[e>>25]:-2147483648>e?30+n[e>>30]:0)-1,a=0;a<e>>3;){var r=a++,i=r;i=(-1431655766&i)>>>1|(1431655765&i)<<1,i=(-858993460&i)>>>2|(858993459&i)<<2,i=(-252645136&i)>>>4|(252645135&i)<<4,i=(-16711936&i)>>>8|(16711935&i)<<8,t[r]=(i>>>16|i<<16)>>>32-d+3<<2}},He.computeTwiddleFactors=function(e,t,n,i){for(var d=e>>3,a=0,r=0;r<e>>2;){var s=r++;t[a]=Math.cos(3.141592653589793*(4*s)/e),t[a+1]=-Math.sin(3.141592653589793*(4*s)/e),n[a]=.5*Math.cos(3.141592653589793*(a+1)/e/2),n[a+1]=.5*Math.sin(3.141592653589793*(a+1)/e/2),a+=2}for(var o=0,A=0;A<d;){A++;i[o]=Math.cos(3.141592653589793*(2*(o+1))/e),i[o+1]=-Math.sin(3.141592653589793*(2*(o+1))/e),o+=2}},He.drawLine=function(e,t,d,a,r,s){if(null==He.integerDivideTable){var n=Array(32);He.integerDivideTable=n;for(var o=0;32>o;){var A=o++,i=He.integerDivideTable,u=Array(64);i[A]=u;for(var l=1;64>l;){var _=l++;He.integerDivideTable[A][_]=0|A/_}}}var f=r-d,c=a-t,g=0>f?-f:f,p=t,h=d,m=0,b,x;64>c&&32>g?0>f?(b=-He.integerDivideTable[g][c],x=b-1):(b=He.integerDivideTable[g][c],x=b+1):(b=0|f/c,x=0>f?b-1:b+1),g-=(0>b?-b:b)*c,a>s&&(a=s);e[p]*=He.INVERSE_DB_TABLE[h];for(var S=p+1,w=a;S<w;){var E=S++;m+=g,m>=c?(m-=c,h+=x):h+=b;e[E]*=He.INVERSE_DB_TABLE[h]}},He.predictPoint=function(e,t,n,i,d){var a=d-i,r=Math.abs(a)*(e-t),s=0|r/(n-t);return 0>a?i-s:i+s},He.emptyFloatVector=function(e){var t=Array(e);return t},He.copyVector=function(e){for(var t=Array(e.length),n=t,d=0,a=e.length;d<a;){var r=d++;n[r]=e[r]}return n};var We=function(){};s["kha.audio2.ogg.vorbis.data.Codebook"]=We,We.__name__=!0,We.read=function(e){var t=new We;if(66!=e.readBits(8)||67!=e.readBits(8)||86!=e.readBits(8))throw new W(new tt(nt.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:40,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));var d=e.readBits(8);t.dimensions=(e.readBits(8)<<8)+d;var a=e.readBits(8),r=e.readBits(8);t.entries=(e.readBits(8)<<16)+(r<<8)+a;var s=e.readBits(1);t.sparse=0==s&&0!=e.readBits(1);var o=Array(t.entries),A=o;t.sparse||(t.codewordLengths=A);var u=0;if(0!=s)for(var _=0,f=e.readBits(5)+1;_<t.entries;){var c=t.entries-_,g=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4],p=e.readBits(16384>c?16>c?g[c]:512>c?5+g[c>>5]:10+g[c>>10]:16777216>c?524288>c?15+g[c>>15]:20+g[c>>20]:536870912>c?25+g[c>>25]:-2147483648>c?30+g[c>>30]:0);if(_+p>t.entries)throw new W(new tt(nt.INVALID_SETUP,"codebook entrys",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:67,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));for(var n=0,h;n<p;)h=n++,A[_+h]=f;_+=p,++f}else for(var m=0,b=t.entries;m<b;){var x=m++,y=t.sparse?e.readBits(1):1;0==y?A[x]=255:(A[x]=e.readBits(5)+1,++u)}t.sparse&&u>=t.entries>>2&&(t.codewordLengths=A,t.sparse=!1);var w;if(t.sparse)w=u;else{for(var E=0,T=0,C=t.entries;T<C;){var I=T++,B=A[I];10<B&&255!=B&&++E}w=E}t.sortedEntries=w;var l=null;if(!t.sparse){var k=Array(t.entries);t.codewords=k}else{if(0!=t.sortedEntries){var v=Array(t.sortedEntries);t.codewordLengths=v;var L=Array(t.entries);t.codewords=L;var O=Array(t.entries);l=O}t.entries+64*t.sortedEntries}if(!t.computeCodewords(A,t.entries,l))throw new W(new tt(nt.INVALID_SETUP,"compute codewords",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:120,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));if(0!=t.sortedEntries){t.sortedCodewords=[];var N=Array(t.sortedEntries);t.sortedValues=N,t.computeSortedHuffman(A,l)}if(t.sparse&&(l=null,t.codewords=null,A=null),t.computeAcceleratedHuffman(),t.lookupType=e.readBits(4),2<t.lookupType)throw new W(new tt(nt.INVALID_SETUP,"codebook lookup type",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:143,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));if(0<t.lookupType){var P=e.readBits(32),R=S.toFloat(2097151&P),V=0==(-2147483648&P)?R:-R;t.minimumValue=V*Math.pow(2,((2145386496&P)>>>21)-788);var D=e.readBits(32),F=S.toFloat(2097151&D),M=0==(-2147483648&D)?F:-F;t.deltaValue=M*Math.pow(2,((2145386496&D)>>>21)-788),t.valueBits=e.readBits(4)+1,t.sequenceP=0!=e.readBits(1),t.lookupValues=1==t.lookupType?He.lookup1Values(t.entries,t.dimensions):t.entries*t.dimensions;for(var U=Array(t.lookupValues),H=U,G=0,z=t.lookupValues;G<z;){var Y=G++,X=e.readBits(t.valueBits);if(-1==X)throw new W(new tt(nt.INVALID_SETUP,"fail lookup",{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:161,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"read"}));H[Y]=X}var Q=Array(t.lookupValues);t.multiplicands=Q;for(var j=0,K=t.lookupValues,q;j<K;)q=j++,t.multiplicands[q]=H[q]*t.deltaValue+t.minimumValue;if(2==t.lookupType&&t.sequenceP){for(var Z=1,J=t.lookupValues,$;Z<J;)$=Z++,t.multiplicands[$]=t.multiplicands[$-1];t.sequenceP=!1}}return t},We.prototype={dimensions:null,entries:null,codewordLengths:null,minimumValue:null,deltaValue:null,valueBits:null,lookupType:null,sequenceP:null,sparse:null,lookupValues:null,multiplicands:null,codewords:null,fastHuffman:null,sortedCodewords:null,sortedValues:null,sortedEntries:null,addEntry:function(e,t,n,i,d){this.sparse?(this.codewords[n]=e,this.codewordLengths[n]=i,d[n]=t):this.codewords[t]=e},includeInSort:function(e){return!!this.sparse||255!=e&&!!(10<e)},computeCodewords:function(e,t,n){var d=Array(32),a=d;a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=0,a[16]=0,a[17]=0,a[18]=0,a[19]=0,a[20]=0,a[21]=0,a[22]=0,a[23]=0,a[24]=0,a[25]=0,a[26]=0,a[27]=0,a[28]=0,a[29]=0,a[30]=0,a[31]=0;for(var r=0;r<t&&!(255>e[r]);)++r;if(r==t)return!0;var s=0,o=s++;this.sparse?(this.codewords[o]=0,this.codewordLengths[o]=e[r],n[o]=r):this.codewords[r]=0;for(var A=0;++A<=e[r];)a[A]=1<<32-A;for(A=r;++A<t;){var u=e[A];if(255!=u){for(;0<u&&0==a[u];)--u;if(0==u)return!1;var l=a[u];a[u]=0;var _=l;_=(-1431655766&_)>>>1|(1431655765&_)<<1,_=(-858993460&_)>>>2|(858993459&_)<<2,_=(-252645136&_)>>>4|(252645135&_)<<4,_=(-16711936&_)>>>8|(16711935&_)<<8;var f=_>>>16|_<<16,c=s++;if(this.sparse?(this.codewords[c]=f,this.codewordLengths[c]=e[A],n[c]=A):this.codewords[A]=f,u!=e[A])for(var g=e[A];g>u;)a[g]=l+(1<<32-g),--g}}return!0},computeSortedHuffman:function(e,t){if(!this.sparse)for(var d=0,a=0,r=this.entries;a<r;){var s=a++,i=e[s];if(!!this.sparse||255!=i&&10<i){var o=this.codewords[s];o=(-1431655766&o)>>>1|(1431655765&o)<<1,o=(-858993460&o)>>>2|(858993459&o)<<2,o=(-252645136&o)>>>4|(252645135&o)<<4,o=(-16711936&o)>>>8|(16711935&o)<<8,this.sortedCodewords[d++]=o>>>16|o<<16}}else for(var A=0,u=this.sortedEntries;A<u;){var l=A++,_=this.codewords[l];_=(-1431655766&_)>>>1|(1431655765&_)<<1,_=(-858993460&_)>>>2|(858993459&_)<<2,_=(-252645136&_)>>>4|(252645135&_)<<4,_=(-16711936&_)>>>8|(16711935&_)<<8,this.sortedCodewords[l]=_>>>16|_<<16}this.sortedCodewords[this.sortedEntries]=-1,this.sortedCodewords.sort(He.uintAsc);for(var f=this.sparse?this.sortedEntries:this.entries,c=0;c<f;){var g=c++,p=this.sparse?e[t[g]]:e[g];if(!!this.sparse||255!=p&&10<p){var h=this.codewords[g];h=(-1431655766&h)>>>1|(1431655765&h)<<1,h=(-858993460&h)>>>2|(858993459&h)<<2,h=(-252645136&h)>>>4|(252645135&h)<<4,h=(-16711936&h)>>>8|(16711935&h)<<8;for(var b=h>>>16|h<<16,y=0,w=this.sortedEntries;1<w;){var E=y+(w>>1);S.gte(b,this.sortedCodewords[E])?(y=E,w-=w>>1):w>>=1}this.sparse?(this.sortedValues[y]=t[g],this.codewordLengths[y]=p):this.sortedValues[y]=g}}},computeAcceleratedHuffman:function(){var e=Array(1024);this.fastHuffman=e,this.fastHuffman[0]=-1;for(var t=0;t<1024;){var d=t++;this.fastHuffman[d]=-1}for(var i=this.sparse?this.sortedEntries:this.entries,a=0;a<i;){var r=a++;if(10>=this.codewordLengths[r]){var s;if(this.sparse){var o=this.sortedCodewords[r];o=(-1431655766&o)>>>1|(1431655765&o)<<1,o=(-858993460&o)>>>2|(858993459&o)<<2,o=(-252645136&o)>>>4|(252645135&o)<<4,o=(-16711936&o)>>>8|(16711935&o)<<8,s=o>>>16|o<<16}else s=this.codewords[r];for(;1024>s;)this.fastHuffman[s]=r,s+=1<<this.codewordLengths[r]}}},codebookDecode:function(e,t,n,d){10>e.validBits&&e.prepHuffman();var a=this.fastHuffman[1023&e.acc],i;if(0<=a){var r=this.codewordLengths[a];e.acc>>>=r,e.validBits-=r,0>e.validBits?(e.validBits=0,i=-1):i=a}else i=e.decodeScalarRaw(this);this.sparse&&(i=this.sortedValues[i]);var s=i,o=this.lookupValues,A=this.sequenceP,u=this.multiplicands,l=this.minimumValue;if(0>s)return!1;if(d>this.dimensions&&(d=this.dimensions),1==this.lookupType){for(var _=1,f=0,c=0,g=d;c<g;){var p=c++,h=0|S.toFloat(0|s/_)%S.toFloat(o),m=u[h]+f;t[n+p]+=m,A&&(f=m+l),_*=o}return!0}if(s*=this.dimensions,A)for(var b=0,x=0,y=d;x<y;){var w=x++,E=u[s+w]+b;t[n+w]+=E,b=E+l}else for(var T=0,C=d;T<C;){var I=T++;t[n+I]+=u[s+I]+0}return!0},codebookDecodeStep:function(e,t,n,d,a){10>e.validBits&&e.prepHuffman();var r=this.fastHuffman[1023&e.acc],i;if(0<=r){var s=this.codewordLengths[r];e.acc>>>=s,e.validBits-=s,0>e.validBits?(e.validBits=0,i=-1):i=r}else i=e.decodeScalarRaw(this);this.sparse&&(i=this.sortedValues[i]);var o=i,A=0;if(0>o)return!1;d>this.dimensions&&(d=this.dimensions);var u=this.lookupValues,l=this.sequenceP,_=this.multiplicands;if(1==this.lookupType){for(var f=1,c=0,g=d;c<g;){var p=c++,h=0|S.toFloat(0|o/f)%S.toFloat(u),m=_[h]+A;t[n+p*a]+=m,l&&(A=m),f*=u}return!0}o*=this.dimensions;for(var b=0,x=d;b<x;){var y=b++,w=_[o+y]+A;t[n+y*a]+=w,l&&(A=w)}return!0},decodeStart:function(e){10>e.validBits&&e.prepHuffman();var t=this.fastHuffman[1023&e.acc],n;if(0<=t){var i=this.codewordLengths[t];e.acc>>>=i,e.validBits-=i,0>e.validBits?(e.validBits=0,n=-1):n=t}else n=e.decodeScalarRaw(this);return this.sparse&&(n=this.sortedValues[n]),n},decodeDeinterleaveRepeat:function(e,t,n,d,a,r,s){var o=this.dimensions;if(0==this.lookupType)throw new W(new tt(nt.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:488,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"decodeDeinterleaveRepeat"}));for(var A=this.multiplicands,u=this.sequenceP,_=this.lookupValues,f;0<s;){f=0,10>e.validBits&&e.prepHuffman();var c=this.fastHuffman[1023&e.acc],i;if(0<=c){var g=this.codewordLengths[c];e.acc>>>=g,e.validBits-=g,0>e.validBits?(e.validBits=0,i=-1):i=c}else i=e.decodeScalarRaw(this);this.sparse&&(i=this.sortedValues[i]);var l=i;if(0>l){if(0==e.bytesInSeg&&e.lastSeg)return null;throw new W(new tt(nt.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/data/Codebook.hx",lineNumber:503,className:"kha.audio2.ogg.vorbis.data.Codebook",methodName:"decodeDeinterleaveRepeat"}))}if(d+a*n+o>r*n&&(o=r*n-(a*n-d)),1==this.lookupType){var p=1;if(u)for(var h=0,m=o;h<m;){var b=h++,x=0|S.toFloat(0|l/p)%S.toFloat(_),y=A[x]+f,w=a,E=t[d];E[w]+=y,++d==n&&(d=0,++a),f=y,p*=_}else for(var T=0,C=o;T<C;){var I=T++,B=0|S.toFloat(0|l/p)%S.toFloat(_),k=A[B]+f,v=a,L=t[d];L[v]+=k,++d==n&&(d=0,++a),p*=_}}else if(l*=this.dimensions,u)for(var O=0,N=o;O<N;){var P=O++,R=A[l+P]+f,V=a,D=t[d];D[V]+=R,++d==n&&(d=0,++a),f=R}else for(var F=0,M=o;F<M;){var U=F++,H=A[l+U]+f,G=a,Y=t[d];Y[G]+=H,++d==n&&(d=0,++a)}s-=o}return{cInter:d,pInter:a}},residueDecode:function(e,t,i,d,n){if(0==n){for(var a=0|d/this.dimensions,r=0,s;r<a;)if(s=r++,!this.codebookDecodeStep(e,t,i+s,d-i-s,a))return!1;}else for(var o=0;o<d;){if(!this.codebookDecode(e,t,i,d-o))return!1;o+=this.dimensions,i+=this.dimensions}return!0},__class__:We};var Ge=function(){this.data=new v};s["kha.audio2.ogg.vorbis.data.Comment"]=Ge,Ge.__name__=!0,Ge.prototype={data:null,get_title:function(){return this.getString("title")},get_loopStart:function(){return h.parseInt(this.getString("loopstart"))},get_loopLength:function(){return h.parseInt(this.getString("looplength"))},get_version:function(){return this.getString("version")},get_album:function(){return this.getString("album")},get_organization:function(){return this.getString("organization")},get_tracknumber:function(){return this.getString("tracknumber")},get_performer:function(){return this.getString("performer")},get_copyright:function(){return this.getString("copyright")},get_license:function(){return this.getString("license")},get_artist:function(){return this.getString("artist")},get_description:function(){return this.getString("description")},get_genre:function(){return this.getString("genre")},get_date:function(){return this.getString("date")},get_location:function(){return this.getString("location")},get_contact:function(){return this.getString("contact")},get_isrc:function(){return this.getString("isrc")},get_artists:function(){return this.getArray("artist")},add:function(e,t){e=e.toLowerCase();var n=this.data;if(null==Dn[e]?n.h.hasOwnProperty(e):n.existsReserved(e)){var i=this.data;(null==Dn[e]?i.h[e]:i.getReserved(e)).push(t)}else{var d=[t],a=this.data;null==Dn[e]?a.h[e]=d:a.setReserved(e,d)}},getString:function(e){e=e.toLowerCase();var t=this.data;if(null==Dn[e]?t.h.hasOwnProperty(e):t.existsReserved(e)){var n=this.data;return(null==Dn[e]?n.h[e]:n.getReserved(e))[0]}return null},getArray:function(e){e=e.toLowerCase();var t=this.data;if(null==Dn[e]?t.h.hasOwnProperty(e):t.existsReserved(e)){var n=this.data;return null==Dn[e]?n.h[e]:n.getReserved(e)}return null},__class__:Ge};var ze=function(){};s["kha.audio2.ogg.vorbis.data.Floor"]=ze,ze.__name__=!0,ze.read=function(e,t){var n=new ze;if(n.type=e.readBits(16),1<n.type)throw new W(new tt(nt.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:28,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}));if(0==n.type){var d=n.floor0=new Ye;d.order=e.readBits(8),d.rate=e.readBits(16),d.barkMapSize=e.readBits(16),d.amplitudeBits=e.readBits(6),d.amplitudeOffset=e.readBits(8),d.numberOfBooks=e.readBits(4)+1;for(var a=0,r=d.numberOfBooks,s;a<r;)s=a++,d.bookList[s]=e.readBits(8);throw new W(new tt(nt.FEATURE_NOT_SUPPORTED,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:41,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}))}else{var o=[],A=n.floor1=new Xe,u=-1;A.partitions=e.readBits(5);var l=Array(A.partitions);A.partitionClassList=l;for(var _=0,f=A.partitions,g;_<f;)g=_++,A.partitionClassList[g]=e.readBits(4),A.partitionClassList[g]>u&&(u=A.partitionClassList[g]);var p=Array(u+1);A.classDimensions=p;var h=Array(u+1);A.classMasterbooks=h;var m=Array(u+1);A.classSubclasses=m;var b=Array(u+1);A.subclassBooks=b;for(var S=0,y=u+1,w;S<y;){if(w=S++,A.classDimensions[w]=e.readBits(3)+1,A.classSubclasses[w]=e.readBits(2),0!=A.classSubclasses[w]&&(A.classMasterbooks[w]=e.readBits(8),A.classMasterbooks[w]>=t.length))throw new W(new tt(nt.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:64,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}));var E=1<<A.classSubclasses[w],T=A.subclassBooks,C=Array(E);T[w]=C;for(var I=0,B;I<E;)if(B=I++,A.subclassBooks[w][B]=e.readBits(8)-1,A.subclassBooks[w][B]>=t.length)throw new W(new tt(nt.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Floor.hx",lineNumber:73,className:"kha.audio2.ogg.vorbis.data.Floor",methodName:"read"}))}A.floor1Multiplier=e.readBits(2)+1,A.rangebits=e.readBits(4);var v=Array(250);A.xlist=v,A.xlist[0]=0,A.xlist[1]=1<<A.rangebits,A.values=2;for(var L=0,O=A.partitions;L<O;)for(var N=L++,P=A.partitionClassList[N],c=0,R=A.classDimensions[P],V;c<R;)V=c++,A.xlist[A.values]=e.readBits(A.rangebits),A.values++;for(var D=0,F=A.values,M;D<F;)M=D++,o.push(new je),o[M].x=A.xlist[M],o[M].y=M;o.sort(He.pointCompare);var U=Array(A.values);A.sortedOrder=U;for(var H=0,G=A.values,z;H<G;)z=H++,A.sortedOrder[z]=o[z].y;var Y=Array(A.values);A.neighbors=Y;for(var X=2,Q=A.values;X<Q;){for(var K=X++,q=A.xlist,x=-1,Z=65536,J=0,$=0,ee=0,te;ee<K;)te=ee++,q[te]>x&&q[te]<q[K]&&(J=te,x=q[te]),q[te]<Z&&q[te]>q[K]&&($=te,Z=q[te]);var ne=J,ie=$,de=A.neighbors,ae=Array(A.values);de[K]=ae,A.neighbors[K][0]=ne,A.neighbors[K][1]=ie}}return n},ze.prototype={floor0:null,floor1:null,type:null,__class__:ze};var Ye=function(){};s["kha.audio2.ogg.vorbis.data.Floor0"]=Ye,Ye.__name__=!0,Ye.prototype={order:null,rate:null,barkMapSize:null,amplitudeBits:null,amplitudeOffset:null,numberOfBooks:null,bookList:null,__class__:Ye};var Xe=function(){};s["kha.audio2.ogg.vorbis.data.Floor1"]=Xe,Xe.__name__=!0,Xe.prototype={partitions:null,partitionClassList:null,classDimensions:null,classSubclasses:null,classMasterbooks:null,subclassBooks:null,xlist:null,sortedOrder:null,neighbors:null,floor1Multiplier:null,rangebits:null,values:null,__class__:Xe};var Qe=function(){};s["kha.audio2.ogg.vorbis.data.Header"]=Qe,Qe.__name__=!0,Qe.read=function(e){var t=e.page;if(t.start(e),0==(2&t.flag))throw new W(new tt(nt.INVALID_FIRST_PAGE,"not firstPage",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:46,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(0!=(4&t.flag))throw new W(new tt(nt.INVALID_FIRST_PAGE,"lastPage",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:49,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(0!=(1&t.flag))throw new W(new tt(nt.INVALID_FIRST_PAGE,"continuedPacket",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:52,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(e.firstPageValidate(),e.inputPosition+=1,1!=e.input.readByte())throw new W(new tt(nt.INVALID_FIRST_PAGE,"decodeState head",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:57,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));var d=new L(new ArrayBuffer(6)),a;0==e.bytesInSeg&&(e.lastSeg||0==e.next())?a=-1:(e.bytesInSeg--,e.inputPosition+=1,a=e.input.readByte()),e.validBits=0,d.b[0]=a;var r;0==e.bytesInSeg&&(e.lastSeg||0==e.next())?r=-1:(e.bytesInSeg--,e.inputPosition+=1,r=e.input.readByte()),e.validBits=0,d.b[1]=r;var s;0==e.bytesInSeg&&(e.lastSeg||0==e.next())?s=-1:(e.bytesInSeg--,e.inputPosition+=1,s=e.input.readByte()),e.validBits=0,d.b[2]=s;var o;0==e.bytesInSeg&&(e.lastSeg||0==e.next())?o=-1:(e.bytesInSeg--,e.inputPosition+=1,o=e.input.readByte()),e.validBits=0,d.b[3]=o;var A;0==e.bytesInSeg&&(e.lastSeg||0==e.next())?A=-1:(e.bytesInSeg--,e.inputPosition+=1,A=e.input.readByte()),e.validBits=0,d.b[4]=A;var u;if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())?u=-1:(e.bytesInSeg--,e.inputPosition+=1,u=e.input.readByte()),e.validBits=0,d.b[5]=u,"vorbis"!=d.toString())throw new W(new tt(nt.INVALID_SETUP,"vorbis header",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:301,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"vorbisValidate"}));e.inputPosition+=4;var l=e.input.readInt32();if(0!=l)throw new W(new tt(nt.INVALID_FIRST_PAGE,"vorbis version : "+l,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:66,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));var _=new Qe;if(e.inputPosition+=1,_.channel=e.input.readByte(),0==_.channel)throw new W(new tt(nt.INVALID_FIRST_PAGE,"no channel",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:73,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));else if(16<_.channel)throw new W(new tt(nt.TOO_MANY_CHANNELS,"too many channels",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:75,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(e.inputPosition+=4,_.sampleRate=e.input.readInt32(),0==_.sampleRate)throw new W(new tt(nt.INVALID_FIRST_PAGE,"no sampling rate",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:80,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));e.inputPosition+=4,_.maximumBitRate=e.input.readInt32(),e.inputPosition+=4,_.nominalBitRate=e.input.readInt32(),e.inputPosition+=4,_.minimumBitRate=e.input.readInt32(),e.inputPosition+=1;var f=e.input.readByte(),c=15&f,g=f>>4;if(_.blocksize0=1<<c,_.blocksize1=1<<g,6>c||13<c)throw new W(new tt(nt.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:93,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(6>g||13<g)throw new W(new tt(nt.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:96,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(c>g)throw new W(new tt(nt.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:99,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));e.inputPosition+=1;var p=e.input.readByte();if(0==(1&p))throw new W(new tt(nt.INVALID_FIRST_PAGE,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:105,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));e.page.start(e),e.startPacket();for(var h=0,m=new V;h=e.next(),0!=h;)e.inputPosition+=h,m.write(e.input.read(h)),e.bytesInSeg=0;var b=new P(m.getBytes());b.readByte(),b.read(6);var S=b.readInt32();_.vendor=b.readString(S),_.comment=new Ge;for(var y=b.readInt32(),w=0;w<y;){var E=w++,i=b.readInt32(),n=b.readString(i),T=n.indexOf("=");-1!=T&&_.comment.add(n.substring(0,T),n.substring(T+1))}var C=b.readByte();if(0==(1&C))throw new W(new tt(nt.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:141,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));e.startPacket();var I;if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())?I=-1:(e.bytesInSeg--,e.inputPosition+=1,I=e.input.readByte()),e.validBits=0,5!=I)throw new W(new tt(nt.INVALID_SETUP,"setup packet",{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:149,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));var B=new L(new ArrayBuffer(6)),k;0==e.bytesInSeg&&(e.lastSeg||0==e.next())?k=-1:(e.bytesInSeg--,e.inputPosition+=1,k=e.input.readByte()),e.validBits=0,B.b[0]=k;var v;0==e.bytesInSeg&&(e.lastSeg||0==e.next())?v=-1:(e.bytesInSeg--,e.inputPosition+=1,v=e.input.readByte()),e.validBits=0,B.b[1]=v;var O;0==e.bytesInSeg&&(e.lastSeg||0==e.next())?O=-1:(e.bytesInSeg--,e.inputPosition+=1,O=e.input.readByte()),e.validBits=0,B.b[2]=O;var N;0==e.bytesInSeg&&(e.lastSeg||0==e.next())?N=-1:(e.bytesInSeg--,e.inputPosition+=1,N=e.input.readByte()),e.validBits=0,B.b[3]=N;var R;0==e.bytesInSeg&&(e.lastSeg||0==e.next())?R=-1:(e.bytesInSeg--,e.inputPosition+=1,R=e.input.readByte()),e.validBits=0,B.b[4]=R;var D;if(0==e.bytesInSeg&&(e.lastSeg||0==e.next())?D=-1:(e.bytesInSeg--,e.inputPosition+=1,D=e.input.readByte()),e.validBits=0,B.b[5]=D,"vorbis"!=B.toString())throw new W(new tt(nt.INVALID_SETUP,"vorbis header",{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:301,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"vorbisValidate"}));var F=e.readBits(8)+1,M=Array(F);_.codebooks=M;for(var U=0,H;U<F;)H=U++,_.codebooks[H]=We.read(e);p=e.readBits(6)+1;for(var G=0,z=p,Y;G<z;)if(Y=G++,0!=e.readBits(16))throw new W(new tt(nt.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:165,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));var X=e.readBits(6)+1,Q=Array(X);_.floorConfig=Q;for(var K=0,q;K<X;)q=K++,_.floorConfig[q]=ze.read(e,_.codebooks);var Z=e.readBits(6)+1,J=Array(Z);_.residueConfig=J;for(var $=0,ee;$<Z;)ee=$++,_.residueConfig[ee]=it.read(e,_.codebooks);var te=e.readBits(6)+1,ne=Array(te);_.mapping=ne;for(var ie=0;ie<te;){var de=ie++,ae=Ke.read(e,_.channel);_.mapping[de]=ae;for(var re=0,se=ae.submaps,oe;re<se;){if(oe=re++,ae.submapFloor[oe]>=_.floorConfig.length)throw new W(new tt(nt.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:191,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}));if(ae.submapResidue[oe]>=_.residueConfig.length)throw new W(new tt(nt.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:194,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}}var Ae=e.readBits(6)+1,ue=Array(Ae);_.modes=ue;for(var le=0;le<Ae;){var _e=le++,fe=Ze.read(e);if(_.modes[_e]=fe,fe.mapping>=_.mapping.length)throw new W(new tt(nt.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Header.hx",lineNumber:205,className:"kha.audio2.ogg.vorbis.data.Header",methodName:"read"}))}for(;0!=e.bytesInSeg||!e.lastSeg&&0!=e.next();)e.bytesInSeg--,e.inputPosition+=1,e.input.readByte();return _},Qe.prototype={maximumBitRate:null,nominalBitRate:null,minimumBitRate:null,sampleRate:null,channel:null,blocksize0:null,blocksize1:null,codebooks:null,floorConfig:null,residueConfig:null,mapping:null,modes:null,comment:null,vendor:null,__class__:Qe};var je=function(){};s["kha.audio2.ogg.vorbis.data.IntPoint"]=je,je.__name__=!0,je.prototype={x:null,y:null,__class__:je};var Ke=function(){};s["kha.audio2.ogg.vorbis.data.Mapping"]=Ke,Ke.__name__=!0,Ke.read=function(e,t){var i=new Ke,d=e.readBits(16);if(0!=d)throw new W(new tt(nt.INVALID_SETUP,"mapping type "+d,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:22,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));var a=Array(t);i.chan=a;for(var r=0,s;r<t;)s=r++,i.chan[s]=new qe;if(i.submaps=0==e.readBits(1)?1:e.readBits(4)+1,0!=e.readBits(1)){i.couplingSteps=e.readBits(8)+1;for(var o=0,A=i.couplingSteps;o<A;){var u=o++,l=t-1,n=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];i.chan[u].magnitude=e.readBits(16384>l?16>l?n[l]:512>l?5+n[l>>5]:10+n[l>>10]:16777216>l?524288>l?15+n[l>>15]:20+n[l>>20]:536870912>l?25+n[l>>25]:-2147483648>l?30+n[l>>30]:0);var _=t-1,f=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];if(i.chan[u].angle=e.readBits(16384>_?16>_?f[_]:512>_?5+f[_>>5]:10+f[_>>10]:16777216>_?524288>_?15+f[_>>15]:20+f[_>>20]:536870912>_?25+f[_>>25]:-2147483648>_?30+f[_>>30]:0),i.chan[u].magnitude>=t)throw new W(new tt(nt.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:46,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));if(i.chan[u].angle>=t)throw new W(new tt(nt.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:49,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));if(i.chan[u].magnitude==i.chan[u].angle)throw new W(new tt(nt.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:52,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}))}}else i.couplingSteps=0;if(0!=e.readBits(2))throw new W(new tt(nt.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:61,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));if(1<i.submaps){for(var c=0,g;c<t;)if(g=c++,i.chan[g].mux=e.readBits(4),i.chan[g].mux>=i.submaps)throw new W(new tt(nt.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:67,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"read"}));}else for(var p=0,h;p<t;)h=p++,i.chan[h].mux=0;var m=Array(i.submaps);i.submapFloor=m;var b=Array(i.submaps);i.submapResidue=b;for(var x=0,S=i.submaps,y;x<S;)y=x++,e.readBits(8),i.submapFloor[y]=e.readBits(8),i.submapResidue[y]=e.readBits(8);return i},Ke.prototype={couplingSteps:null,chan:null,submaps:null,submapFloor:null,submapResidue:null,doFloor:function(e,t,i,n,d){var a=i>>1,r=this.chan[t].mux,s=e[this.submapFloor[r]];if(0==s.type)throw new W(new tt(nt.INVALID_STREAM,null,{fileName:"kha/audio2/ogg/vorbis/data/Mapping.hx",lineNumber:94,className:"kha.audio2.ogg.vorbis.data.Mapping",methodName:"doFloor"}));else{for(var o=s.floor1,A=0,u=d[0]*o.floor1Multiplier,l=1,_=o.values;l<_;){var f=l++,c=o.sortedOrder[f];if(0<=d[c]){var g=d[c]*o.floor1Multiplier,p=o.xlist[c];He.drawLine(n,A,u,p,g,a),A=p,u=g}}if(A<a)for(var h=A;h<a;){var m=h++;n[m]*=He.INVERSE_DB_TABLE[u]}}},__class__:Ke};var qe=function(){};s["kha.audio2.ogg.vorbis.data.MappingChannel"]=qe,qe.__name__=!0,qe.prototype={magnitude:null,angle:null,mux:null,__class__:qe};var Ze=function(){};s["kha.audio2.ogg.vorbis.data.Mode"]=Ze,Ze.__name__=!0,Ze.read=function(e){var t=new Ze;if(t.blockflag=0!=e.readBits(1),t.windowtype=e.readBits(16),t.transformtype=e.readBits(16),t.mapping=e.readBits(8),0!=t.windowtype)throw new W(new tt(nt.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mode.hx",lineNumber:22,className:"kha.audio2.ogg.vorbis.data.Mode",methodName:"read"}));if(0!=t.transformtype)throw new W(new tt(nt.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Mode.hx",lineNumber:25,className:"kha.audio2.ogg.vorbis.data.Mode",methodName:"read"}));return t},Ze.prototype={blockflag:null,mapping:null,windowtype:null,transformtype:null,__class__:Ze};var Je=function(){};s["kha.audio2.ogg.vorbis.data.Page"]=Je,Je.__name__=!0,Je.prototype={flag:null,clone:function(){var e=new Je;return e.flag=this.flag,e},start:function(e){var t,n,i;if(e.inputPosition+=1,79==e.input.readByte()?(e.inputPosition+=1,i=103!=e.input.readByte()):i=!0,i?n=!0:(e.inputPosition+=1,n=103!=e.input.readByte()),n?t=!0:(e.inputPosition+=1,t=83!=e.input.readByte()),t)throw new W(new tt(nt.MISSING_CAPTURE_PATTERN,null,{fileName:"kha/audio2/ogg/vorbis/VorbisDecodeState.hx",lineNumber:324,className:"kha.audio2.ogg.vorbis.VorbisDecodeState",methodName:"capturePattern"}));this.startWithoutCapturePattern(e)},startWithoutCapturePattern:function(e){e.inputPosition+=1;var t=e.input.readByte();if(0!=t)throw new W(new tt(nt.INVALID_STREAM_STRUCTURE_VERSION,""+t,{fileName:"kha/audio2/ogg/vorbis/data/Page.hx",lineNumber:34,className:"kha.audio2.ogg.vorbis.data.Page",methodName:"startWithoutCapturePattern"}));e.inputPosition+=1,this.flag=e.input.readByte(),e.inputPosition+=4;var n=e.input.readInt32();e.inputPosition+=4;var i=e.input.readInt32();e.inputPosition+=4,e.input.readInt32(),e.inputPosition+=4,e.input.readInt32(),e.inputPosition+=4,e.input.readInt32(),e.setup(n,i)},__class__:Je};var $e=function(){};s["kha.audio2.ogg.vorbis.data.PageFlag"]=$e,$e.__name__=!0;var et=function(){};s["kha.audio2.ogg.vorbis.data.ProbedPage"]=et,et.__name__=!0,et.prototype={pageStart:null,pageEnd:null,afterPreviousPageStart:null,firstDecodedSample:null,lastDecodedSample:null,__class__:et};var tt=function(e,t,n){null==t&&(t=""),this.type=e,this.message=t,this.posInfos=n};s["kha.audio2.ogg.vorbis.data.ReaderError"]=tt,tt.__name__=!0,tt.prototype={type:null,message:null,posInfos:null,__class__:tt};var nt=A["kha.audio2.ogg.vorbis.data.ReaderErrorType"]={__ename__:!0,__constructs__:["NEED_MORE_DATA","INVALID_API_MIXING","OUTOFMEM","FEATURE_NOT_SUPPORTED","TOO_MANY_CHANNELS","FILE_OPEN_FAILURE","SEEK_WITHOUT_LENGTH","UNEXPECTED_EOF","SEEK_INVALID","INVALID_SETUP","INVALID_STREAM","MISSING_CAPTURE_PATTERN","INVALID_STREAM_STRUCTURE_VERSION","CONTINUED_PACKET_FLAG_INVALID","INCORRECT_STREAM_SERIAL_NUMBER","INVALID_FIRST_PAGE","BAD_PACKET_TYPE","CANT_FIND_LAST_PAGE","SEEK_FAILED","OTHER"],NEED_MORE_DATA:{_hx_index:0,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:o},INVALID_API_MIXING:{_hx_index:1,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:o},OUTOFMEM:{_hx_index:2,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:o},FEATURE_NOT_SUPPORTED:{_hx_index:3,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:o},TOO_MANY_CHANNELS:{_hx_index:4,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:o},FILE_OPEN_FAILURE:{_hx_index:5,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:o},SEEK_WITHOUT_LENGTH:{_hx_index:6,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:o},UNEXPECTED_EOF:{_hx_index:7,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:o},SEEK_INVALID:{_hx_index:8,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:o},INVALID_SETUP:{_hx_index:9,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:o},INVALID_STREAM:{_hx_index:10,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:o},MISSING_CAPTURE_PATTERN:{_hx_index:11,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:o},INVALID_STREAM_STRUCTURE_VERSION:{_hx_index:12,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:o},CONTINUED_PACKET_FLAG_INVALID:{_hx_index:13,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:o},INCORRECT_STREAM_SERIAL_NUMBER:{_hx_index:14,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:o},INVALID_FIRST_PAGE:{_hx_index:15,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:o},BAD_PACKET_TYPE:{_hx_index:16,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:o},CANT_FIND_LAST_PAGE:{_hx_index:17,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:o},SEEK_FAILED:{_hx_index:18,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:o},OTHER:{_hx_index:19,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:o}},it=function(){};s["kha.audio2.ogg.vorbis.data.Residue"]=it,it.__name__=!0,it.read=function(e,t){var n=new it;if(n.type=e.readBits(16),2<n.type)throw new W(new tt(nt.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Residue.hx",lineNumber:29,className:"kha.audio2.ogg.vorbis.data.Residue",methodName:"read"}));var i=Array(64),d=i;n.begin=e.readBits(24),n.end=e.readBits(24),n.partSize=e.readBits(24)+1;var a=n.classifications=e.readBits(6)+1;n.classbook=e.readBits(8);for(var r=0,s=n.classifications;r<s;){var o=r++,A=0,u=e.readBits(3);0!=e.readBits(1)&&(A=e.readBits(5)),d[o]=8*A+u}var l=Array(n.classifications);n.residueBooks=l;for(var _=0,f=n.classifications;_<f;){var c=_++,g=n.residueBooks,p=Array(8);g[c]=p;for(var h=0,m;8>h;)if(m=h++,0==(d[c]&1<<m))n.residueBooks[c][m]=-1;else if(n.residueBooks[c][m]=e.readBits(8),n.residueBooks[c][m]>=t.length)throw new W(new tt(nt.INVALID_SETUP,null,{fileName:"kha/audio2/ogg/vorbis/data/Residue.hx",lineNumber:55,className:"kha.audio2.ogg.vorbis.data.Residue",methodName:"read"}))}var b=t[n.classbook].entries,x=t[n.classbook].dimensions,S=Array(b);n.classdata=S;for(var y=0;y<b;)for(var w=y++,E=w,T=x,C=n.classdata,I=Array(x),B=C[w]=I;0<=--T;)B[T]=E%a,E=0|E/a;return n},it.prototype={begin:null,end:null,partSize:null,classifications:null,classbook:null,classdata:null,residueBooks:null,type:null,decode:function(e,t,d,a,r,n){for(var s=t.codebooks,o=s[this.classbook].dimensions,A=this.end-this.begin,u=this.partSize,_=0|S.toFloat(A)/S.toFloat(u),f=Array(t.channel*_+1),g=f,p=0;p<a;){var h=p++;if(!n[h])for(var i=d[h],m=0,x=i.length,y;m<x;)y=m++,i[y]=0}if(2==this.type&&1!=a){for(var w=0;w<a;){var E=w++;if(!n[E])break;else if(E==a-1)return}for(var T=0;8>T;){var C=T++,I=0;if(2==a)for(;I<_;){var B=this.begin+I*u,k=1&B,v=B>>>1;if(0==C){var L=s[this.classbook];10>e.validBits&&e.prepHuffman();var c=L.fastHuffman[1023&e.acc],O;if(0<=c){var N=L.codewordLengths[c];e.acc>>>=N,e.validBits-=N,0>e.validBits?(e.validBits=0,O=-1):O=c}else O=e.decodeScalarRaw(L);L.sparse&&(O=L.sortedValues[O]);var l=O;if(-1==l)return;for(var P=o;0<=--P;)g[P+I]=l%this.classifications,l=0|l/this.classifications}for(var R=0,V;R<o&&(V=R++,!(I>=_));){var D=this.begin+I*u,F=g[I],M=this.residueBooks[F][C];if(0<=M){var b=s[M],U=b.decodeDeinterleaveRepeat(e,d,a,k,v,r,u);if(null==U)return;k=U.cInter,v=U.pInter}else D+=u,k=1&D,v=D>>>1;++I}}else if(1==a)for(;I<_;){var H=this.begin+I*u,W=0,G=H;if(0==C){var z=s[this.classbook];10>e.validBits&&e.prepHuffman();var Y=z.fastHuffman[1023&e.acc],X;if(0<=Y){var Q=z.codewordLengths[Y];e.acc>>>=Q,e.validBits-=Q,0>e.validBits?(e.validBits=0,X=-1):X=Y}else X=e.decodeScalarRaw(z);z.sparse&&(X=z.sortedValues[X]);var K=X;if(-1==K)return;for(var Z=o;0<=--Z;)g[Z+I]=K%this.classifications,K=0|K/this.classifications}for(var J=0,$;J<o&&($=J++,!(I>=_));){var ee=this.begin+I*u,te=this.residueBooks[g[I]][C];if(0<=te){var ne=s[te],ie=ne.decodeDeinterleaveRepeat(e,d,a,W,G,r,u);if(null==ie)return;W=ie.cInter,G=ie.pInter}else ee+=u,W=0,G=ee;++I}}else for(;I<_;){var de=this.begin+I*u,ae=0|S.toFloat(de)%S.toFloat(a),re=0|S.toFloat(de)/S.toFloat(a);if(0==C){var se=s[this.classbook];10>e.validBits&&e.prepHuffman();var oe=se.fastHuffman[1023&e.acc],Ae;if(0<=oe){var ue=se.codewordLengths[oe];e.acc>>>=ue,e.validBits-=ue,0>e.validBits?(e.validBits=0,Ae=-1):Ae=oe}else Ae=e.decodeScalarRaw(se);se.sparse&&(Ae=se.sortedValues[Ae]);var le=Ae;if(-1==le)return;for(var _e=o;0<=--_e;)g[_e+I]=le%this.classifications,le=0|le/this.classifications}for(var fe=0,ce;fe<o&&(ce=fe++,!(I>=_));){var ge=this.begin+I*u,pe=this.residueBooks[g[I]][C];if(0<=pe){var he=s[pe],me=he.decodeDeinterleaveRepeat(e,d,a,ae,re,r,u);if(null==me)return;ae=me.cInter,re=me.pInter}else ge+=u,ae=0|S.toFloat(ge)%S.toFloat(a),re=0|S.toFloat(ge)/S.toFloat(a);++I}}}return}for(var be=0;8>be;)for(var xe=be++,Se=0;Se<_;){if(0==xe)for(var ye=0,we;ye<a;)if(we=ye++,!n[we]){var Ee=s[this.classbook];10>e.validBits&&e.prepHuffman();var Te=Ee.fastHuffman[1023&e.acc],Ce;if(0<=Te){var Ie=Ee.codewordLengths[Te];e.acc>>>=Ie,e.validBits-=Ie,0>e.validBits?(e.validBits=0,Ce=-1):Ce=Te}else Ce=e.decodeScalarRaw(Ee);Ee.sparse&&(Ce=Ee.sortedValues[Ce]);var Be=Ce;if(-1==Be)return;for(var ke=o;0<=--ke;)g[we*_+ke+Se]=Be%this.classifications,Be=0|Be/this.classifications}for(var ve=0,Le;ve<o&&(Le=ve++,!(Se>=_));){for(var Oe=0,Ne;Oe<a;)if(Ne=Oe++,!n[Ne]){var Pe=g[Ne*_+Se],Re=this.residueBooks[Pe][xe];if(0<=Re){var Ve=d[Ne],De=this.begin+Se*u,Fe=s[Re];if(!Fe.residueDecode(e,Ve,De,u,this.type))return}}++Se}}},__class__:it};var dt=function(){};s["kha.audio2.ogg.vorbis.data.Setting"]=dt,dt.__name__=!0;var at=function(){};s["kha.compute.ConstantLocation"]=at,at.__name__=!0,at.prototype={__class__:at};var rt=function(){};s["kha.compute.TextureUnit"]=rt,rt.__name__=!0,rt.prototype={__class__:rt};var st=function(){};s["kha.graphics1.Graphics"]=st,st.__name__=!0,st.__isInterface__=!0,st.prototype={begin:null,end:null,setPixel:null,__class__:st};var ot=function(){this.transformations=[new sn(1,0,0,0,1,0,0,0,1)],this.transformationIndex=0,this.opacities=[1],this.myFontSize=12,this.pipe=null};s["kha.graphics2.Graphics"]=ot,ot.__name__=!0,ot.prototype={begin:function(e){null==e&&(e=!0)},end:function(){},flush:function(){},clear:function(){},drawImage:function(e,t,n){this.drawSubImage(e,t,n,0,0,e.get_width(),e.get_height())},drawSubImage:function(e,t,n,i,d,a,r){this.drawScaledSubImage(e,i,d,a,r,t,n,a,r)},drawScaledImage:function(e,t,n,i,d){this.drawScaledSubImage(e,0,0,e.get_width(),e.get_height(),t,n,i,d)},drawScaledSubImage:function(){},drawRect:function(e,t,n,i,d){null==d&&(d=1)},fillRect:function(){},drawString:function(){},drawCharacters:function(){},drawLine:function(e,t,n,i,d){null==d&&(d=1)},drawVideo:function(){},fillTriangle:function(){},get_imageScaleQuality:function(){return 0},set_imageScaleQuality:function(){return 1},get_mipmapScaleQuality:function(){return 0},set_mipmapScaleQuality:function(){return 1},get_color:function(){return-16777216},set_color:function(){return-16777216},get_font:function(){return null},set_font:function(){return null},get_fontSize:function(){return this.myFontSize},set_fontSize:function(e){return this.myFontSize=e},get_transformation:function(){return this.transformations[this.transformationIndex]},set_transformation:function(e){this.setTransformation(e);var t=this.transformations[this.transformationIndex];return t._00=e._00,t._10=e._10,t._20=e._20,t._01=e._01,t._11=e._11,t._21=e._21,t._02=e._02,t._12=e._12,t._22=e._22,e},pushTransformation:function(e){this.transformationIndex++,this.transformationIndex==this.transformations.length&&this.transformations.push(new sn(1,0,0,0,1,0,0,0,1));var t=this.transformations[this.transformationIndex];t._00=e._00,t._10=e._10,t._20=e._20,t._01=e._01,t._11=e._11,t._21=e._21,t._02=e._02,t._12=e._12,t._22=e._22,this.setTransformation(this.transformations[this.transformationIndex])},popTransformation:function(){return this.transformationIndex--,this.setTransformation(this.transformations[this.transformationIndex]),this.transformations[this.transformationIndex+1]},scale:function(e,t){var n=this.transformations[this.transformationIndex],i=e,d=0,a=0,r=0,s=t,o=0,A=0,u=0,l=1,_=this.transformations[this.transformationIndex],f=i*_._00+d*_._01+a*_._02,c=i*_._10+d*_._11+a*_._12,g=i*_._20+d*_._21+a*_._22,p=r*_._00+s*_._01+o*_._02,h=r*_._10+s*_._11+o*_._12,m=r*_._20+s*_._21+o*_._22,b=A*_._00+u*_._01+l*_._02,x=A*_._10+u*_._11+l*_._12,S=A*_._20+u*_._21+l*_._22;n._00=f,n._10=c,n._20=g,n._01=p,n._11=h,n._21=m,n._02=b,n._12=x,n._22=S},translation:function(e,t){var n=0,i=e,d=0,a=1,r=t,s=0,o=0,A=1,u=this.transformations[this.transformationIndex];return new sn(1*u._00+n*u._01+i*u._02,1*u._10+n*u._11+i*u._12,1*u._20+n*u._21+i*u._22,d*u._00+a*u._01+r*u._02,d*u._10+a*u._11+r*u._12,d*u._20+a*u._21+r*u._22,s*u._00+o*u._01+A*u._02,s*u._10+o*u._11+A*u._12,s*u._20+o*u._21+A*u._22)},translate:function(e,t){var n=this.transformations[this.transformationIndex],i=1,d=0,a=e,r=0,s=1,o=t,A=0,u=0,l=1,_=this.transformations[this.transformationIndex],f=i*_._00+d*_._01+a*_._02,c=i*_._10+d*_._11+a*_._12,g=i*_._20+d*_._21+a*_._22,p=r*_._00+s*_._01+o*_._02,h=r*_._10+s*_._11+o*_._12,m=r*_._20+s*_._21+o*_._22,b=A*_._00+u*_._01+l*_._02,x=A*_._10+u*_._11+l*_._12,S=A*_._20+u*_._21+l*_._22;n._00=f,n._10=c,n._20=g,n._01=p,n._11=h,n._21=m,n._02=b,n._12=x,n._22=S},pushTranslation:function(e,t){var n=0,i=e,d=0,a=1,r=t,s=0,o=0,A=1,u=this.transformations[this.transformationIndex],l=1*u._00+n*u._01+i*u._02,_=1*u._10+n*u._11+i*u._12,f=1*u._20+n*u._21+i*u._22,c=d*u._00+a*u._01+r*u._02,g=d*u._10+a*u._11+r*u._12,p=d*u._20+a*u._21+r*u._22,h=s*u._00+o*u._01+A*u._02,m=s*u._10+o*u._11+A*u._12,b=s*u._20+o*u._21+A*u._22;this.transformationIndex++,this.transformationIndex==this.transformations.length&&this.transformations.push(new sn(1,0,0,0,1,0,0,0,1));var x=this.transformations[this.transformationIndex];x._00=l,x._10=_,x._20=f,x._01=c,x._11=g,x._21=p,x._02=h,x._12=m,x._22=b,this.setTransformation(this.transformations[this.transformationIndex])},rotation:function(e,t,n){var i=0,d=t,a=0,r=1,s=n,o=0,A=0,u=1,l=Math.cos(e),_=-Math.sin(e),f=0,c=Math.sin(e),g=Math.cos(e),p=0,h=0,b=0,x=1,S=1*l+i*c+d*h,y=1*_+i*g+d*b,w=1*f+i*p+d*x,E=a*l+r*c+s*h,T=a*_+r*g+s*b,C=a*f+r*p+s*x,I=o*l+A*c+u*h,B=o*_+A*g+u*b,k=o*f+A*p+u*x,v=1,L=0,O=-t,N=0,P=1,R=-n,V=0,D=0,F=1,M=S*v+y*N+w*V,U=S*L+y*P+w*D,H=S*O+y*R+w*F,W=E*v+T*N+C*V,G=E*L+T*P+C*D,z=E*O+T*R+C*F,Y=I*v+B*N+k*V,X=I*L+B*P+k*D,Q=I*O+B*R+k*F,j=this.transformations[this.transformationIndex];return new sn(M*j._00+U*j._01+H*j._02,M*j._10+U*j._11+H*j._12,M*j._20+U*j._21+H*j._22,W*j._00+G*j._01+z*j._02,W*j._10+G*j._11+z*j._12,W*j._20+G*j._21+z*j._22,Y*j._00+X*j._01+Q*j._02,Y*j._10+X*j._11+Q*j._12,Y*j._20+X*j._21+Q*j._22)},rotate:function(e,t,n){var i=this.transformations[this.transformationIndex],d=1,a=0,r=t,s=0,o=1,A=n,u=0,l=0,_=1,f=Math.cos(e),c=-Math.sin(e),g=0,p=Math.sin(e),h=Math.cos(e),b=0,x=0,S=0,y=1,w=d*f+a*p+r*x,E=d*c+a*h+r*S,T=d*g+a*b+r*y,C=s*f+o*p+A*x,I=s*c+o*h+A*S,B=s*g+o*b+A*y,k=u*f+l*p+_*x,v=u*c+l*h+_*S,L=u*g+l*b+_*y,O=1,N=0,P=-t,R=0,V=1,D=-n,F=0,M=0,U=1,H=w*O+E*R+T*F,W=w*N+E*V+T*M,G=w*P+E*D+T*U,z=C*O+I*R+B*F,Y=C*N+I*V+B*M,X=C*P+I*D+B*U,Q=k*O+v*R+L*F,j=k*N+v*V+L*M,K=k*P+v*D+L*U,q=this.transformations[this.transformationIndex],m=H*q._00+W*q._01+G*q._02,Z=H*q._10+W*q._11+G*q._12,J=H*q._20+W*q._21+G*q._22,$=z*q._00+Y*q._01+X*q._02,ee=z*q._10+Y*q._11+X*q._12,te=z*q._20+Y*q._21+X*q._22,ne=Q*q._00+j*q._01+K*q._02,ie=Q*q._10+j*q._11+K*q._12,de=Q*q._20+j*q._21+K*q._22;i._00=m,i._10=Z,i._20=J,i._01=$,i._11=ee,i._21=te,i._02=ne,i._12=ie,i._22=de},pushRotation:function(e,t,n){var i=0,d=t,a=0,r=1,s=n,o=0,A=0,u=1,l=Math.cos(e),_=-Math.sin(e),f=0,c=Math.sin(e),g=Math.cos(e),p=0,h=0,b=0,x=1,S=1*l+i*c+d*h,y=1*_+i*g+d*b,w=1*f+i*p+d*x,E=a*l+r*c+s*h,T=a*_+r*g+s*b,C=a*f+r*p+s*x,I=o*l+A*c+u*h,B=o*_+A*g+u*b,k=o*f+A*p+u*x,v=1,L=0,O=-t,N=0,P=1,R=-n,V=0,D=0,F=1,M=S*v+y*N+w*V,U=S*L+y*P+w*D,H=S*O+y*R+w*F,W=E*v+T*N+C*V,G=E*L+T*P+C*D,z=E*O+T*R+C*F,Y=I*v+B*N+k*V,X=I*L+B*P+k*D,Q=I*O+B*R+k*F,j=this.transformations[this.transformationIndex],m=M*j._00+U*j._01+H*j._02,K=M*j._10+U*j._11+H*j._12,q=M*j._20+U*j._21+H*j._22,Z=W*j._00+G*j._01+z*j._02,J=W*j._10+G*j._11+z*j._12,$=W*j._20+G*j._21+z*j._22,ee=Y*j._00+X*j._01+Q*j._02,te=Y*j._10+X*j._11+Q*j._12,ne=Y*j._20+X*j._21+Q*j._22;this.transformationIndex++,this.transformationIndex==this.transformations.length&&this.transformations.push(new sn(1,0,0,0,1,0,0,0,1));var ie=this.transformations[this.transformationIndex];ie._00=m,ie._10=K,ie._20=q,ie._01=Z,ie._11=J,ie._21=$,ie._02=ee,ie._12=te,ie._22=ne,this.setTransformation(this.transformations[this.transformationIndex])},pushOpacity:function(e){this.setOpacity(e),this.opacities.push(e)},popOpacity:function(){var e=this.opacities.pop();return this.setOpacity(this.get_opacity()),e},get_opacity:function(){return this.opacities[this.opacities.length-1]},set_opacity:function(e){return this.setOpacity(e),this.opacities[this.opacities.length-1]=e},scissor:function(){},disableScissor:function(){},pipe:null,get_pipeline:function(){return this.pipe},set_pipeline:function(e){return this.setPipeline(e),this.pipe=e},transformations:null,transformationIndex:null,opacities:null,myFontSize:null,setTransformation:function(){},setOpacity:function(){},setPipeline:function(){},__class__:ot};var At=function(e){this.canvas=e};s["kha.graphics2.Graphics1"]=At,At.__name__=!0,At.__interfaces__=[st],At.prototype={canvas:null,texture:null,pixels:null,begin:function(){(null==this.texture||this.texture.get_realWidth()!=this.canvas.get_width()||this.texture.get_realHeight()!=this.canvas.get_height())&&(this.texture=ae.create(this.canvas.get_width(),this.canvas.get_height(),0,2)),this.pixels=this.texture.lock()},end:function(){this.texture.unlock(),this.canvas.get_g2().begin(),this.canvas.get_g2().drawImage(this.texture,0,0),this.canvas.get_g2().end()},setPixel:function(e,t,n){this.pixels.setInt32(4*(t*this.texture.get_realWidth())+4*e,n)},__class__:At};var ut=function(){};s["kha.graphics2.GraphicsExtension"]=ut,ut.__name__=!0,ut.drawArc=function(e,i,d,a,r,o,A,u,l){null==l&&(l=0),null==u&&(u=!1),null==A&&(A=1),r%=2*Math.PI,o%=2*Math.PI,u?o>r&&(o-=2*Math.PI):o<r&&(o+=2*Math.PI),0>=l&&(l=Math.floor(10*Math.sqrt(a)));for(var _=(o-r)/l,f=Math.cos(_),c=Math.sin(_),s=Math.cos(r)*a,g=Math.sin(r)*a,p=0,h=l;p<h;){var m=p++,n=s+i,b=g+d,S=s;s=f*s-c*g,g=f*g+c*S,e.drawLine(n,b,s+i,g+d,A)}},ut.fillArc=function(e,i,d,a,r,o,A,u){null==u&&(u=0),null==A&&(A=!1),r%=2*Math.PI,o%=2*Math.PI,A?o>r&&(o-=2*Math.PI):o<r&&(o+=2*Math.PI),0>=u&&(u=Math.floor(10*Math.sqrt(a)));for(var l=(o-r)/u,_=Math.cos(l),f=Math.sin(l),s=Math.cos(r)*a,c=Math.sin(r)*a,g=s+i,p=c+d,h=0,m=u;h<m;){var b=h++,n=s+i,S=c+d,w=s;s=_*s-f*c,c=_*c+f*w,e.fillTriangle(n,S,s+i,c+d,g,p)}},ut.drawCircle=function(e,i,d,a,r,o){null==o&&(o=0),null==r&&(r=1),0>=o&&(o=Math.floor(10*Math.sqrt(a)));for(var A=2*Math.PI/o,u=Math.cos(A),l=Math.sin(A),s=a,_=0,f=0,c=o;f<c;){var g=f++,n=s+i,p=_+d,h=s;s=u*s-l*_,_=u*_+l*h,e.drawLine(n,p,s+i,_+d,r)}},ut.fillCircle=function(e,i,d,a,r){null==r&&(r=0),0>=r&&(r=Math.floor(10*Math.sqrt(a)));for(var o=2*Math.PI/r,A=Math.cos(o),u=Math.sin(o),s=a,l=0,_=0,f=r;_<f;){var c=_++,n=s+i,g=l+d,p=s;s=A*s-u*l,l=A*l+u*p,e.fillTriangle(n,g,s+i,l+d,i,d)}},ut.drawPolygon=function(e,t,n,i,d){null==d&&(d=1);for(var a=_.iter(i),r=a.next(),s=r;a.hasNext();){var o=a.next();e.drawLine(s.x+t,s.y+n,o.x+t,o.y+n,d),s=o}e.drawLine(s.x+t,s.y+n,r.x+t,r.y+n,d)},ut.fillPolygon=function(e,t,n,i){var d=_.iter(i);if(d.hasNext()){var a=d.next();if(d.hasNext())for(var r=d.next(),s;d.hasNext();)s=d.next(),e.fillTriangle(a.x+t,a.y+n,r.x+t,r.y+n,s.x+t,s.y+n),r=s}},ut.drawCubicBezier=function(e,n,d,a,r){null==r&&(r=1),null==a&&(a=20);for(var s=ut.calculateCubicBezierPoint(0,n,d),o=1,A=a+1,u,l;o<A;){var _=o++;u=_/a,l=ut.calculateCubicBezierPoint(u,n,d),e.drawLine(s[0],s[1],l[0],l[1],r),s=l}},ut.drawCubicBezierPath=function(e,n,d,a,r){null==r&&(r=1),null==a&&(a=20);for(var s=0,o=null,A=null,u;s<n.length-3;){0==s&&(o=ut.calculateCubicBezierPoint(0,[n[s],n[s+1],n[s+2],n[s+3]],[d[s],d[s+1],d[s+2],d[s+3]]));for(var l=1,_=a+1;l<_;){var f=l++;u=f/a,A=ut.calculateCubicBezierPoint(u,[n[s],n[s+1],n[s+2],n[s+3]],[d[s],d[s+1],d[s+2],d[s+3]]),e.drawLine(o[0],o[1],A[0],A[1],r),o=A}s+=3}},ut.calculateCubicBezierPoint=function(e,t,n){var i=1-e,d=e*e,a=i*i,r=a*i,s=d*e,o=[r*t[0],r*n[0]];return o[0]+=3*a*e*t[1],o[1]+=3*a*e*n[1],o[0]+=3*i*d*t[2],o[1]+=3*i*d*n[2],o[0]+=s*t[3],o[1]+=s*n[3],o},ut.drawAlignedString=function(e,t,n,i,d,a){var r=0;if(1==d||2==d){var s=e.get_font().width(e.get_fontSize(),t);r=1==d?.5*-s:-s}var o=0;if(1==a||2==a){var A=e.get_font().height(e.get_fontSize());o=1==a?.5*-A:-A}e.drawString(t,n+r,i+o)},ut.drawAlignedCharacters=function(e,t,n,i,d,a,r,s){var o=0;if(1==r||2==r){var A=e.get_font().widthOfCharacters(e.get_fontSize(),t,n,i);o=1==r?.5*-A:-A}var u=0;if(1==s||2==s){var l=e.get_font().height(e.get_fontSize());u=1==s?.5*-l:-l}e.drawCharacters(t,n,i,d+o,a+u)};var lt=function(){};s["kha.graphics2.truetype.VectorOfIntPointer"]=lt,lt.__name__=!0,lt.prototype={value:null,__class__:lt};var _t=function(){};s["kha.graphics2.truetype.Stbtt_temp_rect"]=_t,_t.__name__=!0,_t.prototype={x0:null,y0:null,x1:null,y1:null,__class__:_t};var ft=function(){};s["kha.graphics2.truetype.Stbtt_temp_glyph_h_metrics"]=ft,ft.__name__=!0,ft.prototype={advanceWidth:null,leftSideBearing:null,__class__:ft};var ct=function(){};s["kha.graphics2.truetype.Stbtt_temp_font_v_metrics"]=ct,ct.__name__=!0,ct.prototype={ascent:null,descent:null,lineGap:null,__class__:ct};var gt=function(){};s["kha.graphics2.truetype.Stbtt_temp_region"]=gt,gt.__name__=!0,gt.prototype={width:null,height:null,xoff:null,yoff:null,__class__:gt};var pt=function(){};s["kha.graphics2.truetype.Stbtt_bakedchar"]=pt,pt.__name__=!0,pt.prototype={x0:null,y0:null,x1:null,y1:null,xoff:null,yoff:null,xadvance:null,__class__:pt};var ht=function(){};s["kha.graphics2.truetype.Stbtt_aligned_quad"]=ht,ht.__name__=!0,ht.prototype={x0:null,y0:null,s0:null,t0:null,x1:null,y1:null,s1:null,t1:null,__class__:ht};var mt=function(){};s["kha.graphics2.truetype.Stbtt_packedchar"]=mt,mt.__name__=!0,mt.prototype={x0:null,y0:null,x1:null,y1:null,xoff:null,yoff:null,xadvance:null,xoff2:null,yoff2:null,__class__:mt};var bt=function(){};s["kha.graphics2.truetype.Stbtt_pack_range"]=bt,bt.__name__=!0,bt.prototype={font_size:null,first_unicode_codepoint_in_range:null,array_of_unicode_codepoints:null,num_chars:null,chardata_for_range:null,h_oversample:null,v_oversample:null,__class__:bt};var xt=function(){};s["kha.graphics2.truetype.Stbtt_pack_context"]=xt,xt.__name__=!0,xt.prototype={width:null,height:null,stride_in_bytes:null,padding:null,h_oversample:null,v_oversample:null,pixels:null,__class__:xt};var St=function(){};s["kha.graphics2.truetype.Stbtt_fontinfo"]=St,St.__name__=!0,St.prototype={data:null,fontstart:null,numGlyphs:null,loca:null,head:null,glyf:null,hhea:null,hmtx:null,kern:null,index_map:null,indexToLocFormat:null,__class__:St};var yt=function(){};s["kha.graphics2.truetype.Stbtt_vertex"]=yt,yt.__name__=!0,yt.prototype={x:null,y:null,cx:null,cy:null,type:null,padding:null,__class__:yt};var wt=function(){};s["kha.graphics2.truetype.Stbtt__bitmap"]=wt,wt.__name__=!0,wt.prototype={w:null,h:null,stride:null,pixels:null,pixels_offset:null,__class__:wt};var Et=function(){};s["kha.graphics2.truetype.Stbtt__edge"]=Et,Et.__name__=!0,Et.prototype={x0:null,y0:null,x1:null,y1:null,invert:null,__class__:Et};var Tt=function(){};s["kha.graphics2.truetype.Stbtt__active_edge"]=Tt,Tt.__name__=!0,Tt.prototype={next:null,fx:null,fdx:null,fdy:null,direction:null,sy:null,ey:null,__class__:Tt};var Ct=function(){};s["kha.graphics2.truetype.Stbtt__point"]=Ct,Ct.__name__=!0,Ct.prototype={x:null,y:null,__class__:Ct};var It=function(){};s["kha.graphics2.truetype.StbTruetype"]=It,It.__name__=!0,It.STBTT_assert=function(e){if(!e)throw new W("Error")},It.STBTT_POINT_SIZE=function(e){return-e},It.ttBYTE=function(e,t){return null==t&&(t=0),e.readU8(t)},It.ttCHAR=function(e,t){null==t&&(t=0);var i=e.readU8(t);return 128<=i?i-256:i},It.ttUSHORT=function(e,t){null==t&&(t=0);var n=e.readU8(t),i=e.readU8(t+1);return i|n<<8},It.ttSHORT=function(e,t){null==t&&(t=0);var i=e.readU8(t),d=e.readU8(t+1),a=d|i<<8;return 0==(32768&a)?a:a-65536},It.ttULONG=function(e,t){null==t&&(t=0);var n=t;null==n&&(n=0);var i=e.readU8(n),d=e.readU8(n+1),a=e.readU8(n+2),r=e.readU8(n+3);return r|a<<8|d<<16|i<<24},It.ttLONG=function(e,t){null==t&&(t=0);var n=e.readU8(t),i=e.readU8(t+1),d=e.readU8(t+2),a=e.readU8(t+3);return a|d<<8|i<<16|n<<24},It.ttFixed=function(e,t){null==t&&(t=0);var n=t;null==n&&(n=0);var i=e.readU8(n),d=e.readU8(n+1),a=e.readU8(n+2),r=e.readU8(n+3);return r|a<<8|d<<16|i<<24},It.stbtt_tag4=function(e,t,n,i,d,a){return!(e.readU8(t)!=n||e.readU8(t+1)!=i||e.readU8(t+2)!=d)&&e.readU8(t+3)==a},It.stbtt_tag=function(e,t,n){var i=_.cca(n,0),d=_.cca(n,1),a=_.cca(n,2),r=_.cca(n,3);return!(e.readU8(t)!=i||e.readU8(t+1)!=d||e.readU8(t+2)!=a)&&e.readU8(t+3)==r},It.stbtt__isfont=function(e){var t=_.cca("1",0);if(e.readU8(0)==t&&0==e.readU8(1)&&0==e.readU8(2)&&0==e.readU8(3))return!0;var n=_.cca("typ1",0),i=_.cca("typ1",1),d=_.cca("typ1",2),a=_.cca("typ1",3);if(e.readU8(0)==n&&e.readU8(1)==i&&e.readU8(2)==d&&e.readU8(3)==a)return!0;var r=_.cca("OTTO",0),s=_.cca("OTTO",1),o=_.cca("OTTO",2),A=_.cca("OTTO",3);return!(e.readU8(0)!=r||e.readU8(1)!=s||e.readU8(2)!=o||e.readU8(3)!=A)||!(0!=e.readU8(0)||1!=e.readU8(1)||0!=e.readU8(2)||0!=e.readU8(3))},It.stbtt__find_table=function(e,t,n){var d=t+4;null==d&&(d=0);for(var a=e.readU8(d),r=e.readU8(d+1),s=0;s<(r|a<<8);){var o=s++,i=t+12+16*o,A=_.cca(n,0),u=_.cca(n,1),l=_.cca(n,2),f=_.cca(n,3);if(e.readU8(i)==A&&e.readU8(i+1)==u&&e.readU8(i+2)==l&&e.readU8(i+3)==f){var c=i+8;null==c&&(c=0);var g=c;null==g&&(g=0);var p=e.readU8(g),h=e.readU8(g+1),m=e.readU8(g+2),b=e.readU8(g+3);return b|m<<8|h<<16|p<<24}}return 0},It.stbtt_GetFontOffsetForIndex=function(e,t){if(It.stbtt__isfont(e))return 0==t?0:-1;var n=_.cca("ttcf",0),i=_.cca("ttcf",1),d=_.cca("ttcf",2),a=_.cca("ttcf",3);if(e.readU8(0)==n&&e.readU8(1)==i&&e.readU8(2)==d&&e.readU8(3)==a){var r=4,s;null==r&&(r=0);var o=r;null==o&&(o=0);var A=e.readU8(o),u=e.readU8(o+1),l=e.readU8(o+2),f=e.readU8(o+3);if(65536!=(f|l<<8|u<<16|A<<24)){var c=4;null==c&&(c=0);var g=c;null==g&&(g=0);var p=e.readU8(g),h=e.readU8(g+1),m=e.readU8(g+2),b=e.readU8(g+3);s=131072==(b|m<<8|h<<16|p<<24)}else s=!0;if(s){var x=8;null==x&&(x=0);var S=e.readU8(x),y=e.readU8(x+1),w=e.readU8(x+2),E=e.readU8(x+3);if(t>=(E|w<<8|y<<16|S<<24))return-1;var T=12+4*t;null==T&&(T=0);var C=T;null==C&&(C=0);var I=e.readU8(C),B=e.readU8(C+1),k=e.readU8(C+2),v=e.readU8(C+3);return v|k<<8|B<<16|I<<24}}return-1},It.stbtt_InitFont=function(e,n,d){e.data=n,e.fontstart=d;var a=It.stbtt__find_table(n,d,"cmap");if(e.loca=It.stbtt__find_table(n,d,"loca"),e.head=It.stbtt__find_table(n,d,"head"),e.glyf=It.stbtt__find_table(n,d,"glyf"),e.hhea=It.stbtt__find_table(n,d,"hhea"),e.hmtx=It.stbtt__find_table(n,d,"hmtx"),e.kern=It.stbtt__find_table(n,d,"kern"),0==a||0==e.loca||0==e.head||0==e.glyf||0==e.hhea||0==e.hmtx)return!1;var r=It.stbtt__find_table(n,d,"maxp");if(0!=r){var t=r+4;null==t&&(t=0);var s=n.readU8(t),o=n.readU8(t+1);e.numGlyphs=o|s<<8}else e.numGlyphs=65535;var A=a+2;null==A&&(A=0);var u=n.readU8(A),l=n.readU8(A+1);e.index_map=0;for(var _=0;_<(l|u<<8);){var f=_++,i=a+4+8*f,c=i;null==c&&(c=0);var g=n.readU8(c),p=n.readU8(c+1);switch(p|g<<8){case 0:var h=i+4;null==h&&(h=0);var m=h;null==m&&(m=0);var b=n.readU8(m),x=n.readU8(m+1),S=n.readU8(m+2),y=n.readU8(m+3);e.index_map=a+(y|S<<8|x<<16|b<<24);break;case 3:var w=i+2;null==w&&(w=0);var E=n.readU8(w),T=n.readU8(w+1);switch(T|E<<8){case 1:case 10:var C=i+4;null==C&&(C=0);var I=C;null==I&&(I=0);var B=n.readU8(I),k=n.readU8(I+1),v=n.readU8(I+2),L=n.readU8(I+3);e.index_map=a+(L|v<<8|k<<16|B<<24);}}}if(0==e.index_map)return!1;var O=e.head+50;null==O&&(O=0);var N=n.readU8(O),P=n.readU8(O+1);return e.indexToLocFormat=P|N<<8,!0},It.stbtt_FindGlyphIndex=function(e,t){var i=e.data,d=e.index_map,a=d;null==a&&(a=0);var r=i.readU8(a),s=i.readU8(a+1),o=s|r<<8;if(0==o){var A=d+2;null==A&&(A=0);var u=i.readU8(A),l=i.readU8(A+1);if(t<(l|u<<8)-6){var _=d+6+t;return null==_&&(_=0),i.readU8(_)}return 0}if(6==o){var f=d+6;null==f&&(f=0);var c=i.readU8(f),g=i.readU8(f+1),p=g|c<<8,h=d+8;null==h&&(h=0);var m=i.readU8(h),b=i.readU8(h+1);if(t>=p&&t<p+(b|m<<8)){var x=d+10+2*(t-p);null==x&&(x=0);var S=i.readU8(x),y=i.readU8(x+1);return y|S<<8}return 0}if(2==o)throw new W("Error");else{if(4==o){var w=d+6;null==w&&(w=0);var E=i.readU8(w),T=i.readU8(w+1),C=(T|E<<8)>>1,I=d+8;null==I&&(I=0);var B=i.readU8(I),k=i.readU8(I+1),v=(k|B<<8)>>1,L=d+10;null==L&&(L=0);var O=i.readU8(L),N=i.readU8(L+1),P=N|O<<8,R=d+12;null==R&&(R=0);var V=i.readU8(R),D=i.readU8(R+1),F=(D|V<<8)>>1,M=d+14,U=M;if(65535<t)return 0;var H=U+2*F;null==H&&(H=0);var G=i.readU8(H),z=i.readU8(H+1);for(t>=(z|G<<8)&&(U+=2*F),U-=2;0!=P;){v>>=1;var Y=U+2*v;null==Y&&(Y=0);var X=i.readU8(Y),Q=i.readU8(Y+1);t>(Q|X<<8)&&(U+=2*v),--P}U+=2;var j=U-M>>1,K=M+2*j;null==K&&(K=0);var q=i.readU8(K),Z=i.readU8(K+1);if(t>(Z|q<<8))throw new W("Error");var J=d+14+2*C+2+2*j;null==J&&(J=0);var $=i.readU8(J),ee=i.readU8(J+1),te=ee|$<<8;if(t<te)return 0;var ne=d+14+6*C+2+2*j;null==ne&&(ne=0);var ie=i.readU8(ne),de=i.readU8(ne+1),ae=de|ie<<8;if(0==ae){var re=d+14+4*C+2+2*j;null==re&&(re=0);var se=i.readU8(re),oe=i.readU8(re+1),Ae=oe|se<<8;return t+(0==(32768&Ae)?Ae:Ae-65536)}var n=ae+2*(t-te)+d+14+6*C+2+2*j;null==n&&(n=0);var ue=i.readU8(n),le=i.readU8(n+1);return le|ue<<8}if(12==o||13==o){var _e=d+12;null==_e&&(_e=0);var fe=_e;null==fe&&(fe=0);for(var ce=i.readU8(fe),ge=i.readU8(fe+1),pe=i.readU8(fe+2),he=i.readU8(fe+3),me=0,be=he|pe<<8|ge<<16|ce<<24;me<be;){var xe=me+(be-me>>1),Se=d+16+12*xe;null==Se&&(Se=0);var ye=Se;null==ye&&(ye=0);var we=i.readU8(ye),Ee=i.readU8(ye+1),Te=i.readU8(ye+2),Ce=i.readU8(ye+3),Ie=Ce|Te<<8|Ee<<16|we<<24,Be=d+16+12*xe+4;null==Be&&(Be=0);var ke=Be;null==ke&&(ke=0);var ve=i.readU8(ke),Le=i.readU8(ke+1),Oe=i.readU8(ke+2),Ne=i.readU8(ke+3);if(t<Ie)be=xe;else if(t>(Ne|Oe<<8|Le<<16|ve<<24))me=xe+1;else{var Pe=d+16+12*xe+8;null==Pe&&(Pe=0);var Re=Pe;null==Re&&(Re=0);var Ve=i.readU8(Re),De=i.readU8(Re+1),Fe=i.readU8(Re+2),Me=i.readU8(Re+3),Ue=Me|Fe<<8|De<<16|Ve<<24;return 12==o?Ue+t-Ie:Ue}}return 0}}throw new W("Error")},It.stbtt_GetCodepointShape=function(e,t){return It.stbtt_GetGlyphShape(e,It.stbtt_FindGlyphIndex(e,t))},It.stbtt_setvertex=function(e,t,n,i,d,a){e.type=t,e.x=n,e.y=i,e.cx=d,e.cy=a},It.stbtt__GetGlyfOffset=function(e,t){var n,i;if(t>=e.numGlyphs)return-1;if(2<=e.indexToLocFormat)return-1;if(0==e.indexToLocFormat){var d=e.glyf,a=e.data,r=e.loca+2*t;null==r&&(r=0);var s=a.readU8(r),o=a.readU8(r+1);n=d+2*(o|s<<8);var A=e.glyf,u=e.data,l=e.loca+2*t+2;null==l&&(l=0);var _=u.readU8(l),f=u.readU8(l+1);i=A+2*(f|_<<8)}else{var c=e.glyf,g=e.data,p=e.loca+4*t;null==p&&(p=0);var h=p;null==h&&(h=0);var m=g.readU8(h),b=g.readU8(h+1),x=g.readU8(h+2),S=g.readU8(h+3);n=c+(S|x<<8|b<<16|m<<24);var y=e.glyf,w=e.data,E=e.loca+4*t+4;null==E&&(E=0);var T=E;null==T&&(T=0);var C=w.readU8(T),I=w.readU8(T+1),B=w.readU8(T+2),k=w.readU8(T+3);i=y+(k|B<<8|I<<16|C<<24)}return n==i?-1:n},It.stbtt_GetGlyphBox=function(e,t,i){var d=It.stbtt__GetGlyfOffset(e,t);if(0>d)return!1;var a=e.data,r=d+2;null==r&&(r=0);var s=a.readU8(r),o=a.readU8(r+1),A=o|s<<8;i.x0=0==(32768&A)?A:A-65536;var n=e.data,u=d+4;null==u&&(u=0);var l=n.readU8(u),_=n.readU8(u+1),f=_|l<<8;i.y0=0==(32768&f)?f:f-65536;var c=e.data,g=d+6;null==g&&(g=0);var p=c.readU8(g),h=c.readU8(g+1),m=h|p<<8;i.x1=0==(32768&m)?m:m-65536;var b=e.data,x=d+8;null==x&&(x=0);var S=b.readU8(x),y=b.readU8(x+1),w=y|S<<8;return i.y1=0==(32768&w)?w:w-65536,!0},It.stbtt_GetCodepointBox=function(e,t,n){return It.stbtt_GetGlyphBox(e,It.stbtt_FindGlyphIndex(e,t),n)},It.stbtt_IsGlyphEmpty=function(e,t){var i=It.stbtt__GetGlyfOffset(e,t);if(0>i)return!0;var d=e.data,a=i;null==a&&(a=0);var r=d.readU8(a),s=d.readU8(a+1),o=s|r<<8,n=0==(32768&o)?o:o-65536;return 0==n},It.stbtt__close_shape=function(e,t,n,i,d,a,r,s,o,A){return i?(n&&It.stbtt_setvertex(e[t++],3,o+r>>1,A+s>>1,o,A),It.stbtt_setvertex(e[t++],3,d,a,r,s)):n?It.stbtt_setvertex(e[t++],3,d,a,o,A):It.stbtt_setvertex(e[t++],2,d,a,0,0),t},It.copyVertices=function(e,t,n,d){for(var a=0;a<d;){var r=a++;t[n+r]=e[r]}},It.stbtt_GetGlyphShape=function(e,t){var d=e.data,a=null,r=0,s=It.stbtt__GetGlyfOffset(e,t);if(0>s)return null;var o=s;null==o&&(o=0);var A=d.readU8(o),u=d.readU8(o+1),l=u|A<<8,n=0==(32768&l)?l:l-65536;if(0<n){var _=0,f=0,c=0,g=0,p=!1,h=!1,b=s+10,S=b+2*n;null==S&&(S=0);var w=d.readU8(S),E=d.readU8(S+1),T=b+2*n+2+(E|w<<8),C=b+2*n-2;null==C&&(C=0);var I=d.readU8(C),B=d.readU8(C+1),k=1+(B|I<<8),L=k+2*n,m=Array(L);if(a=m,null==a)return null;for(var O=0,N=a.length,P;O<N;)P=O++,a[P]=new yt;c=0;var R=0;g=L-k;for(var V=0,D;V<k;)D=V++,0==R?(_=d.readU8(T++),0!=(8&_)&&(R=d.readU8(T++))):--R,a[g+D].type=_;for(var F=0,M=0,U;M<k;){if(U=M++,_=a[g+U].type,0!=(2&_)){var H=d.readU8(T++);F+=0==(16&_)?-H:H}else if(0==(16&_)){var G=d.readU8(T),z=d.readU8(T+1),Y=z|G<<8,X;X=0==(32768&Y)?Y:Y-65536,F+=X,T+=2}a[g+U].x=F}for(var Q=0,K=0,q;K<k;){if(q=K++,_=a[g+q].type,0!=(4&_)){var Z=d.readU8(T++);Q+=0==(32&_)?-Z:Z}else if(0==(32&_)){var J=d.readU8(T),$=d.readU8(T+1),ee=$|J<<8,te;te=0==(32768&ee)?ee:ee-65536,Q+=te,T+=2}a[g+q].y=Q}r=0;for(var ne=0,ie=ne,de=ie,ae=de,re=ae,se=re,oe=0;oe<k;){if(_=a[g+oe].type,F=a[g+oe].x,Q=a[g+oe].y,c==oe){0!=oe&&(r=It.stbtt__close_shape(a,r,p,h,se,re,ie,ne,ae,de)),h=0==(1&_),h?(ie=F,ne=Q,0==(1&a[g+oe+1].type)?(se=F+a[g+oe+1].x>>1,re=Q+a[g+oe+1].y>>1):(se=a[g+oe+1].x,re=a[g+oe+1].y,++oe)):(se=F,re=Q),It.stbtt_setvertex(a[r++],1,se,re,0,0),p=!1;var Ae=b+2*f;null==Ae&&(Ae=0);var ue=d.readU8(Ae),le=d.readU8(Ae+1);c=1+(le|ue<<8),++f}else 0==(1&_)?(p&&It.stbtt_setvertex(a[r++],3,ae+F>>1,de+Q>>1,ae,de),ae=F,de=Q,p=!0):(p?It.stbtt_setvertex(a[r++],3,F,Q,ae,de):It.stbtt_setvertex(a[r++],2,F,Q,0,0),p=!1);++oe}r=It.stbtt__close_shape(a,r,p,h,se,re,ie,ne,ae,de)}else if(-1==n){var _e=1,fe=s+10;for(r=0,a=null;0!=_e;){var ce=0,ge=null,pe=null,he=1,me=0,be=0,xe=1,Se=0,ye=0,we=fe;null==we&&(we=0);var Ee=d.readU8(we),Te=d.readU8(we+1),Ce=Te|Ee<<8,Ie=0==(32768&Ce)?Ce:Ce-65536,Be=fe+=2;null==Be&&(Be=0);var ke=d.readU8(Be),ve=d.readU8(Be+1),Le=ve|ke<<8,Oe=0==(32768&Le)?Le:Le-65536;if(fe+=2,0==(2&Ie))throw new W("Error");else if(0!=(1&Ie)){var Ne=fe;null==Ne&&(Ne=0);var Pe=d.readU8(Ne),Re=d.readU8(Ne+1),Ve=Re|Pe<<8;Se=0==(32768&Ve)?Ve:Ve-65536;var De=fe+=2;null==De&&(De=0);var Fe=d.readU8(De),Me=d.readU8(De+1),Ue=Me|Fe<<8;ye=0==(32768&Ue)?Ue:Ue-65536,fe+=2}else{var He=fe;null==He&&(He=0);var We=d.readU8(He);Se=128<=We?We-256:We;var Ge=++fe;null==Ge&&(Ge=0);var ze=d.readU8(Ge);ye=128<=ze?ze-256:ze,++fe}if(0!=(8&Ie)){var Ye=fe;null==Ye&&(Ye=0);var Xe=d.readU8(Ye),Qe=d.readU8(Ye+1),je=Qe|Xe<<8;xe=(0==(32768&je)?je:je-65536)/16384,he=xe,fe+=2,be=0,me=be}else if(0!=(64&Ie)){var Ke=fe;null==Ke&&(Ke=0);var qe=d.readU8(Ke),Ze=d.readU8(Ke+1),Je=Ze|qe<<8;he=(0==(32768&Je)?Je:Je-65536)/16384,fe+=2,be=0,me=be;var $e=fe;null==$e&&($e=0);var et=d.readU8($e),tt=d.readU8($e+1),nt=tt|et<<8;xe=(0==(32768&nt)?nt:nt-65536)/16384,fe+=2}else if(0!=(128&Ie)){var it=fe;null==it&&(it=0);var dt=d.readU8(it),at=d.readU8(it+1),rt=at|dt<<8;he=(0==(32768&rt)?rt:rt-65536)/16384;var st=fe+=2;null==st&&(st=0);var ot=d.readU8(st),At=d.readU8(st+1),ut=At|ot<<8;me=(0==(32768&ut)?ut:ut-65536)/16384;var lt=fe+=2;null==lt&&(lt=0);var _t=d.readU8(lt),ft=d.readU8(lt+1),ct=ft|_t<<8;be=(0==(32768&ct)?ct:ct-65536)/16384;var gt=fe+=2;null==gt&&(gt=0);var pt=d.readU8(gt),ht=d.readU8(gt+1),mt=ht|pt<<8;xe=(0==(32768&mt)?mt:mt-65536)/16384,fe+=2}var bt=Math.sqrt(he*he+me*me),xt=Math.sqrt(be*be+xe*xe);if(ge=It.stbtt_GetGlyphShape(e,Oe),ce=null==ge?0:ge.length,0<ce){for(var St=0,wt=ce;St<wt;){var Et=St++,Tt=ge[Et],v=Tt.x,Ct=Tt.y;Tt.x=0|bt*(he*v+be*Ct+Se),Tt.y=0|xt*(me*v+xe*Ct+ye),v=Tt.cx,Ct=Tt.cy,Tt.cx=0|bt*(he*v+be*Ct+Se),Tt.cy=0|xt*(me*v+xe*Ct+ye)}var Bt=Array(r+ce);if(pe=Bt,null==pe)return null;0<r&&It.copyVertices(a,pe,0,r),It.copyVertices(ge,pe,r,ce),a=pe,r+=ce}_e=32&Ie}}else if(0>n)throw new W("Error");if(null==a)return null;if(a.length<r)throw new W("Error");if(r<a.length){var kt=Array(r),vt=kt;return It.copyVertices(a,vt,0,r),vt}return a},It.stbtt_GetGlyphHMetrics=function(e,t){var i=e.data,d=e.hhea+34;null==d&&(d=0);var a=i.readU8(d),r=i.readU8(d+1),s=r|a<<8,o=new ft;if(t<s){var A=e.data,u=e.hmtx+4*t;null==u&&(u=0);var l=A.readU8(u),_=A.readU8(u+1),f=_|l<<8;o.advanceWidth=0==(32768&f)?f:f-65536;var n=e.data,c=e.hmtx+4*t+2;null==c&&(c=0);var g=n.readU8(c),p=n.readU8(c+1),h=p|g<<8;o.leftSideBearing=0==(32768&h)?h:h-65536}else{var m=e.data,b=e.hmtx+4*(s-1);null==b&&(b=0);var x=m.readU8(b),S=m.readU8(b+1),y=S|x<<8;o.advanceWidth=0==(32768&y)?y:y-65536;var w=e.data,E=e.hmtx+4*s+2*(t-s);null==E&&(E=0);var T=w.readU8(E),C=w.readU8(E+1),I=C|T<<8;o.leftSideBearing=0==(32768&I)?I:I-65536}return o},It.stbtt_GetGlyphKernAdvance=function(e,t,i){var d=e.kern,a=e.data,s,o;if(0==e.kern)return 0;var A=d+2;null==A&&(A=0);var u=a.readU8(A),_=a.readU8(A+1);if(1>(_|u<<8))return 0;var f=d+8;null==f&&(f=0);var c=a.readU8(f),g=a.readU8(f+1);if(1!=(g|c<<8))return 0;var p=0,h=d+10;null==h&&(h=0);for(var b=a.readU8(h),x=a.readU8(h+1),S=(x|b<<8)-1,y=t<<16|i;p<=S;){o=p+S>>1;var w=d+18+6*o;null==w&&(w=0);var E=w;null==E&&(E=0);var T=a.readU8(E),C=a.readU8(E+1),I=a.readU8(E+2),B=a.readU8(E+3);if(s=B|I<<8|C<<16|T<<24,y<s)S=o-1;else if(y>s)p=o+1;else{var k=d+22+6*o;null==k&&(k=0);var v=a.readU8(k),L=a.readU8(k+1),O=L|v<<8;return 0==(32768&O)?O:O-65536}}return 0},It.stbtt_GetCodepointKernAdvance=function(e,t,n){return 0==e.kern?0:It.stbtt_GetGlyphKernAdvance(e,It.stbtt_FindGlyphIndex(e,t),It.stbtt_FindGlyphIndex(e,n))},It.stbtt_GetCodepointHMetrics=function(e,t){return It.stbtt_GetGlyphHMetrics(e,It.stbtt_FindGlyphIndex(e,t))},It.stbtt_GetFontVMetrics=function(e){var t=new ct,i=e.data,d=e.hhea+4;null==d&&(d=0);var a=i.readU8(d),r=i.readU8(d+1),s=r|a<<8;t.ascent=0==(32768&s)?s:s-65536;var n=e.data,o=e.hhea+6;null==o&&(o=0);var A=n.readU8(o),u=n.readU8(o+1),l=u|A<<8;t.descent=0==(32768&l)?l:l-65536;var _=e.data,f=e.hhea+8;null==f&&(f=0);var c=_.readU8(f),g=_.readU8(f+1),p=g|c<<8;return t.lineGap=0==(32768&p)?p:p-65536,t},It.stbtt_GetFontBoundingBox=function(e){var t=new _t,i=e.data,d=e.head+36;null==d&&(d=0);var a=i.readU8(d),r=i.readU8(d+1),s=r|a<<8;t.x0=0==(32768&s)?s:s-65536;var n=e.data,o=e.head+38;null==o&&(o=0);var A=n.readU8(o),u=n.readU8(o+1),l=u|A<<8;t.y0=0==(32768&l)?l:l-65536;var _=e.data,f=e.head+40;null==f&&(f=0);var c=_.readU8(f),g=_.readU8(f+1),p=g|c<<8;t.x1=0==(32768&p)?p:p-65536;var h=e.data,m=e.head+42;null==m&&(m=0);var b=h.readU8(m),x=h.readU8(m+1),S=x|b<<8;return t.y1=0==(32768&S)?S:S-65536,t},It.stbtt_ScaleForPixelHeight=function(e,t){var i=e.data,d=e.hhea+4;null==d&&(d=0);var a=i.readU8(d),r=i.readU8(d+1),s=r|a<<8,n=e.data,o=e.hhea+6;null==o&&(o=0);var A=n.readU8(o),u=n.readU8(o+1),l=u|A<<8,_=(0==(32768&s)?s:s-65536)-(0==(32768&l)?l:l-65536);return t/_},It.stbtt_ScaleForMappingEmToPixels=function(e,t){var n=e.data,i=e.head+18;null==i&&(i=0);var d=n.readU8(i),a=n.readU8(i+1);return t/(a|d<<8)},It.stbtt_GetGlyphBitmapBoxSubpixel=function(e,t,n,i,d,a){var r=new _t;if(!It.stbtt_GetGlyphBox(e,t,r))r.x0=0,r.y0=0,r.x1=0,r.y1=0;else{var s=r.x0,o=r.x1,A=r.y0,u=r.y1;r.x0=Math.floor(s*n+d),r.y0=Math.floor(-u*i+a),r.x1=Math.ceil(o*n+d),r.y1=Math.ceil(-A*i+a)}return r},It.stbtt_GetGlyphBitmapBox=function(e,t,n,i){return It.stbtt_GetGlyphBitmapBoxSubpixel(e,t,n,i,0,0)},It.stbtt_GetCodepointBitmapBoxSubpixel=function(e,t,n,i,d,a){return It.stbtt_GetGlyphBitmapBoxSubpixel(e,It.stbtt_FindGlyphIndex(e,t),n,i,d,a)},It.stbtt_GetCodepointBitmapBox=function(e,t,n,i){return It.stbtt_GetCodepointBitmapBoxSubpixel(e,t,n,i,0,0)},It.stbtt__new_active=function(t,e,n,i){var d=new Tt,a=(t[e].x1-t[e].x0)/(t[e].y1-t[e].y0);return null==d?d:(d.fdx=a,d.fdy=0==a?0:1/a,d.fx=t[e].x0+a*(i-t[e].y0),d.fx-=n,d.direction=t[e].invert?1:-1,d.sy=t[e].y0,d.ey=t[e].y1,d.next=null,d)},It.stbtt__handle_clipped_edge=function(t,n,i,d,e,a,r,s){if(a!=s){if(!(a<s))throw new W("Error");if(!(d.sy<=d.ey))throw new W("Error");if(!(a>d.ey)&&!(s<d.sy)){if(a<d.sy&&(e+=(r-e)*(d.sy-a)/(s-a),a=d.sy),s>d.ey&&(r+=(r-e)*(d.ey-s)/(s-a),s=d.ey),e==i){if(!(r<=i+1))throw new W("Error");}else if(e==i+1){if(!(r>=i))throw new W("Error");}else if(e<=i){if(!(r<=i))throw new W("Error");}else if(e>=i+1){if(!(r>=i+1))throw new W("Error");}else if(!(r>=i&&r<=i+1))throw new W("Error");if(e<=i&&r<=i){t[n+i]+=d.direction*(s-a)}else if(!(e>=i+1&&r>=i+1)){if(!(e>=i&&e<=i+1&&r>=i&&r<=i+1))throw new W("Error");t[n+i]+=d.direction*(s-a)*(1-(e-i+(r-i))/2)}}}},It.stbtt__fill_active_edges_new=function(n,i,d,a,r,s){for(var o=s+1;null!=r;){if(!(r.ey>=s))throw new W("Error");if(0==r.fdx){var A=r.fx;A<a&&(0<=A?(It.stbtt__handle_clipped_edge(n,0,0|A,r,A,s,A,o),It.stbtt__handle_clipped_edge(i,d-1,0|A+1,r,A,s,A,o)):It.stbtt__handle_clipped_edge(i,d-1,0,r,A,s,A,o))}else{var u=r.fx,l=r.fdx,_=u+l,f=r.fdy,c,g,p,h;if(!(r.sy<=o&&r.ey>=s))throw new W("Error");if(r.sy>s?(c=u+l*(r.sy-s),p=r.sy):(c=u,p=s),r.ey<o?(g=u+l*(r.ey-s),h=r.ey):(g=_,h=o),!(0<=c&&0<=g&&c<a&&g<a))for(var m=0;m<a;){var b=m++,S=s,y=b,w=b+1,E=_,T=o,C=(b-u)/l+s,I=(b+1-u)/l+s;u<y&&E>w?(It.stbtt__handle_clipped_edge(n,0,b,r,u,S,y,C),It.stbtt__handle_clipped_edge(n,0,b,r,y,C,w,I),It.stbtt__handle_clipped_edge(n,0,b,r,w,I,E,T)):E<y&&u>w?(It.stbtt__handle_clipped_edge(n,0,b,r,u,S,w,I),It.stbtt__handle_clipped_edge(n,0,b,r,w,I,y,C),It.stbtt__handle_clipped_edge(n,0,b,r,y,C,E,T)):u<y&&E>y?(It.stbtt__handle_clipped_edge(n,0,b,r,u,S,y,C),It.stbtt__handle_clipped_edge(n,0,b,r,y,C,E,T)):E<y&&u>y?(It.stbtt__handle_clipped_edge(n,0,b,r,u,S,y,C),It.stbtt__handle_clipped_edge(n,0,b,r,y,C,E,T)):u<w&&E>w?(It.stbtt__handle_clipped_edge(n,0,b,r,u,S,w,I),It.stbtt__handle_clipped_edge(n,0,b,r,w,I,E,T)):E<w&&u>w?(It.stbtt__handle_clipped_edge(n,0,b,r,u,S,w,I),It.stbtt__handle_clipped_edge(n,0,b,r,w,I,E,T)):It.stbtt__handle_clipped_edge(n,0,b,r,u,S,E,T)}else if((0|c)==(0|g)){var B=0|c,x=h-p;if(!(0<=B&&B<a))throw new W("Error");n[B]+=r.direction*(1-(c-B+(g-B))/2)*x;i[d+B]+=r.direction*x}else{if(c>g){p=o-(p-s),h=o-(h-s);var k=p;p=h,h=k,k=g,g=c,c=k,l=-l,f=-f,k=u,u=_,_=k}var v=0|c,L=0|g,O=(v+1-u)*f+s,N=r.direction,P=N*(O-p);n[v]+=P*(1-(c-v+(v+1-v))/2);for(var R=N*f,V=v+1;V<L;){var D=V++;n[D]+=P+R/2,P+=R}if(O+=f*(L-(v+1)),!(1.01>=Math.abs(P)))throw new W("Error");n[L]+=P+N*(1-(L-L+(g-L))/2)*(h-O);i[d+L]+=N*(h-p)}}r=r.next}},It.stbtt__rasterize_sorted_edges=function(t,d,e,n,a,r){var s=null,o=0,A=0,u=0,l;if(64<t.w){var _=Array(2*t.w+1);l=_}else{var f=Array(129);l=f}var c=l;A=t.w;var g=r;for(d[u+e].y0=r+t.h+1;o<t.h;){for(var p=g+0,h=g+1,b=s,x=null,S=0,w=t.w;S<w;){var E=S++;l[E]=0}for(var i=0,T=t.w+1;i<T;){var C=i++;c[A+C]=0}for(;null!=b;){var I=b;if(I.ey<=p){if(null==x?(s=I.next,b=I.next):(x.next=I.next,b=I.next),0==I.direction)throw new W("Error");I.direction=0}else x=b,b=b.next}for(;d[u].y0<=h;){if(d[u].y0!=d[u].y1){var B=It.stbtt__new_active(d,u,a,p);if(!(B.ey>=p))throw new W("Error");B.next=s,s=B}++u}null!=s&&It.stbtt__fill_active_edges_new(l,c,A+1,t.w,s,p);for(var v=0,L=0,O=t.w;L<O;){var N=L++;v+=c[A+N];var P=l[N]+v;P=255*Math.abs(P)+.5;var R=0|P;255<R&&(R=255),t.pixels.writeU8(t.pixels_offset+o*t.stride+N,R)}for(x=null,b=s;null!=b;){var V=b;V.fx+=V.fdx,x=b,b=b.next}++g,++o}},It.STBTT__COMPARE=function(e,t){return e.y0<t.y0},It.stbtt__sort_edges_ins_sort=function(e,i){for(var n=1,d;n<i;){var a=n++,r=e[a];for(d=a;0<d;){var t=e[d-1],s=It.STBTT__COMPARE(r,t);if(!s)break;e[d]=e[d-1],--d}a!=d&&(e[d]=r)}},It.stbtt__sort_edges_quicksort=function(e,d,a){for(;12<a;){var r=a>>1,s=It.STBTT__COMPARE(e[d],e[d+r]),o=It.STBTT__COMPARE(e[d+r],e[d+a-1]),A,u;if(s!=o){u=It.STBTT__COMPARE(e[d],e[d+a-1]);var l=u==o?0:a-1;A=e[d+l],e[d+l]=e[d+r],e[d+r]=A}A=e[d],e[d]=e[d+r],e[d+r]=A;for(var _=1,f=a-1;;){for(;It.STBTT__COMPARE(e[d+_],e[d]);)++_;for(;It.STBTT__COMPARE(e[d],e[d+f]);)--f;if(_>=f)break;A=e[d+_],e[d+_]=e[d+f],e[d+f]=A,++_,--f}f<a-_?(It.stbtt__sort_edges_quicksort(e,d,f),d+=_,a-=_):(It.stbtt__sort_edges_quicksort(e,d+_,a-_),a=f)}},It.stbtt__sort_edges=function(e,t){It.stbtt__sort_edges_quicksort(e,0,t),It.stbtt__sort_edges_ins_sort(e,t)},It.stbtt__rasterize=function(t,i,d,r,s,o,A,u,l,_,f){for(var c=f?-o:o,g=1,h=0,x=0,S=0,y;S<r;){var w=S++;x+=d[w]}var E=Array(x+1),T=E;if(null!=T){for(var e=0,C=T.length,I;e<C;)I=e++,T[I]=new Et;x=0;for(var B=0,k=0;k<r;){var v=k++,L=i,p=h+B;B+=d[v],y=d[v]-1;for(var O=0,N=d[v];O<N;){var P=O++,R=P,V=y;if(L[p+y].y==L[p+P].y){y=P;continue}T[x].invert=!1,(f?L[p+y].y>L[p+P].y:L[p+y].y<L[p+P].y)&&(T[x].invert=!0,R=y,V=P),T[x].x0=L[p+R].x*s+A,T[x].y0=(L[p+R].y*c+u)*g,T[x].x1=L[p+V].x*s+A,T[x].y1=(L[p+V].y*c+u)*g,++x,y=P}}It.stbtt__sort_edges(T,x),It.stbtt__rasterize_sorted_edges(t,T,x,g,l,_)}},It.stbtt__add_point=function(e,t,n,i){null==e||(e[t].x=n,e[t].y=i)},It.stbtt__tesselate_curve=function(e,t,i,d,a,r,s,o,A,u){var n=(i+2*a+s)/4,l=(d+2*r+o)/4,_=(i+s)/2-n,f=(d+o)/2-l;return 16<u?1:(_*_+f*f>A?(It.stbtt__tesselate_curve(e,t,i,d,(i+a)/2,(d+r)/2,n,l,A,u+1),It.stbtt__tesselate_curve(e,t,n,l,(a+s)/2,(r+o)/2,s,o,A,u+1)):(It.stbtt__add_point(e,t.value,s,o),t.value+=1),1)},It.stbtt_FlattenCurves=function(e,t,i,d,a){for(var r=null,s=0,o=i*i,A=0,u=0,l=0,_;l<t;)_=l++,1==e[_].type&&++A;if(a.value=A,0==A)return null;var f=Array(A);if(d.value=f,null==d.value)return a.value=0,null;for(var c=0;2>c;){var g=c++,p=0,h=0;if(1==g){var m=Array(s);if(r=m,null==r)return d.value=null,a.value=0,null;for(var b=0,S=r.length,w;b<S;)w=b++,r[w]=new Ct}s=0,A=-1;for(var E=0,T;E<t;)switch(T=E++,e[T].type){case 1:0<=A&&(d.value[A]=s-u),++A,u=s,p=e[T].x,h=e[T].y,It.stbtt__add_point(r,s++,p,h);break;case 2:p=e[T].x,h=e[T].y,It.stbtt__add_point(r,s++,p,h);break;case 3:var C={value:s};It.stbtt__tesselate_curve(r,C,p,h,e[T].cx,e[T].cy,e[T].x,e[T].y,o,0),s=C.value,p=e[T].x,h=e[T].y;}d.value[A]=s-u}return r},It.stbtt_Rasterize=function(e,t,n,i,d,a,r,s,o,A,u){var l=d>a?a:d,_=0,f=null,c={value:_},g=new lt,p=It.stbtt_FlattenCurves(n,i,t/l,g,c);_=c.value,f=g.value,null!=p&&It.stbtt__rasterize(e,p,f,_,d,a,r,s,o,A,u)},It.stbtt_GetGlyphBitmapSubpixel=function(e,t,n,i,d,a,r){var s=new wt,o=It.stbtt_GetGlyphShape(e,a),A=o.length;if(0==t&&(t=n),0==n){if(0==t)return null;n=t}var u=It.stbtt_GetGlyphBitmapBoxSubpixel(e,a,t,n,i,d),l=u.x0,_=u.y0,f=u.x1,c=u.y1;return s.w=f-l,s.h=c-_,s.pixels=null,r.width=s.w,r.height=s.h,r.xoff=l,r.yoff=_,0!=s.w&&0!=s.h&&(s.pixels=dn.alloc(s.w*s.h),null!=s.pixels&&(s.stride=s.w,It.stbtt_Rasterize(s,.35,o,A,t,n,i,d,l,_,!0))),s.pixels},It.stbtt_GetGlyphBitmap=function(e,t,n,i,d){return It.stbtt_GetGlyphBitmapSubpixel(e,t,n,0,0,i,d)},It.stbtt_MakeGlyphBitmapSubpixel=function(e,t,n,i,d,a,r,s,o,A,u){var l=0,_=0,f=It.stbtt_GetGlyphShape(e,u),c=null==f?0:f.length,g=new wt,p=It.stbtt_GetGlyphBitmapBoxSubpixel(e,u,r,s,o,A);l=p.x0,_=p.y0,g.pixels=t,g.pixels_offset=n,g.w=i,g.h=d,g.stride=a,0!=g.w&&0!=g.h&&It.stbtt_Rasterize(g,.35,f,c,r,s,o,A,l,_,!0)},It.stbtt_MakeGlyphBitmap=function(e,t,n,i,d,a,r,s,o){It.stbtt_MakeGlyphBitmapSubpixel(e,t,n,i,d,a,r,s,0,0,o)},It.stbtt_GetCodepointBitmapSubpixel=function(e,t,n,i,d,a,r){return It.stbtt_GetGlyphBitmapSubpixel(e,t,n,i,d,It.stbtt_FindGlyphIndex(e,a),r)},It.stbtt_MakeCodepointBitmapSubpixel=function(e,t,n,i,d,a,r,s,o,A,u){It.stbtt_MakeGlyphBitmapSubpixel(e,t,n,i,d,a,r,s,o,A,It.stbtt_FindGlyphIndex(e,u))},It.stbtt_GetCodepointBitmap=function(e,t,n,i,d){return It.stbtt_GetCodepointBitmapSubpixel(e,t,n,0,0,i,d)},It.stbtt_MakeCodepointBitmap=function(e,t,n,i,d,a,r,s,o){It.stbtt_MakeCodepointBitmapSubpixel(e,t,n,i,d,a,r,s,0,0,o)},It.stbtt_BakeFontBitmap=function(e,t,n,d,a,r,s,o){var A=new St;if(!It.stbtt_InitFont(A,e,t))return-1;for(var u=1,l=u,_=1,f=It.stbtt_ScaleForPixelHeight(A,n),c=0,p=0,h;p<s.length;){h=s[p],++p;var m=It.stbtt_FindGlyphIndex(A,h),g=It.stbtt_GetGlyphHMetrics(A,m),b=g.advanceWidth,S=g.leftSideBearing,w=It.stbtt_GetGlyphBitmapBox(A,m,f,f),E=w.x0,T=w.y0,C=w.x1,I=w.y1,B=C-E,k=I-T;if(l+B+1>=a&&(u=_,l=1),u+k+1>=r)return-c;if(l+B>=a)throw new W("Error");if(u+k>=r)throw new W("Error");o[c].x0=l,o[c].y0=u,o[c].x1=l+B,o[c].y1=u+k,o[c].xadvance=f*b,o[c].xoff=E,o[c].yoff=T,l=l+B+1,u+k+1>_&&(_=u+k+1),++c}for(var v=0;v<a*r;){var L=v++;d.writeU8(L,0)}c=0;for(var O=0,N;O<s.length;){var P=s[O];++O;var R=It.stbtt_FindGlyphIndex(A,P);N=o[c],It.stbtt_MakeGlyphBitmap(A,d,N.x0+N.y0*a,N.x1-N.x0,N.y1-N.y0,a,f,f,R),++c}return _},It.stbtt_GetBakedQuad=function(e,t,n,i,d,a,r,s){var o=s?0:-.5,A=1/t,u=1/n,l=e[i],_=Math.floor(d.value+l.xoff+.5),f=Math.floor(a.value+l.yoff+.5);r.x0=_+o,r.y0=f+o,r.x1=_+l.x1-l.x0+o,r.y1=f+l.y1-l.y0+o,r.s0=l.x0*A,r.t0=l.y0*u,r.s1=l.x1*A,r.t1=l.y1*u,d.value+=l.xadvance};var Bt=function(){};s["kha.graphics4.ConstantLocation"]=Bt,Bt.__name__=!0,Bt.__isInterface__=!0;var kt=function(e){this.texture_=e};s["kha.graphics4.CubeMap"]=kt,kt.__name__=!0,kt.__interfaces__=[de,Z],kt.getRenderTargetFormat=function(e){return 0===e?0:2===e?3:3===e?4:4===e?1:0},kt.getDepthBufferBits=function(e){return 0===e?-1:1===e?24:2===e?24:3===e?24:4===e?32:5===e?16:void 0},kt.getStencilBufferBits=function(e){return 0===e?-1:1===e?-1:2===e?8:3===e?8:4===e?8:5===e?0:void 0},kt.getTextureFormat=function(e){return 0===e?0:2===e?3:4===e?4:5===e?5:1},kt.createRenderTarget=function(e,t,n,i){null==i&&(i=0),null==n&&(n=0),null==t&&(t=0);var d=new kt(null);return d.format=t,d.renderTarget_=Krom.createRenderTargetCubeMap(e,kt.getDepthBufferBits(n),kt.getRenderTargetFormat(t),kt.getStencilBufferBits(n),i),d},kt.prototype={texture_:null,renderTarget_:null,format:null,graphics4:null,unload:function(){},lock:function(e){return null==e&&(e=0),null},unlock:function(){},width:null,get_width:function(){return null==this.texture_?this.renderTarget_.width:this.texture_.width},height:null,get_height:function(){return null==this.texture_?this.renderTarget_.height:this.texture_.height},g1:null,get_g1:function(){return null},g2:null,get_g2:function(){return null},g4:null,get_g4:function(){return null==this.graphics4&&(this.graphics4=new an(this)),this.graphics4},__class__:kt};var vt=function(e,t){null!=e&&(this.shader=Krom.createFragmentShader(e[0].bytes.b.bufferValue,t[0]))};s["kha.graphics4.FragmentShader"]=vt,vt.__name__=!0,vt.fromSource=function(e){var t=new vt(null,null);return t.shader=Krom.createFragmentShaderFromSource(e),t},vt.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:vt};var Lt=function(e,t){this.shader=Krom.createGeometryShader(e[0].bytes.b.bufferValue,t[0])};s["kha.graphics4.GeometryShader"]=Lt,Lt.__name__=!0,Lt.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:Lt};var Ot=function(){};s["kha.graphics4.Graphics"]=Ot,Ot.__name__=!0,Ot.__isInterface__=!0,Ot.prototype={begin:null,beginFace:null,beginEye:null,end:null,vsynced:null,refreshRate:null,clear:null,viewport:null,scissor:null,disableScissor:null,setVertexBuffer:null,setVertexBuffers:null,setIndexBuffer:null,setTexture:null,setTextureDepth:null,setTextureArray:null,setVideoTexture:null,setImageTexture:null,setTextureParameters:null,setTexture3DParameters:null,setTextureCompareMode:null,setCubeMapCompareMode:null,setCubeMap:null,setCubeMapDepth:null,setStencilReferenceValue:null,instancedRenderingAvailable:null,setPipeline:null,setBool:null,setInt:null,setInt2:null,setInt3:null,setInt4:null,setInts:null,setFloat:null,setFloat2:null,setFloat3:null,setFloat4:null,setFloats:null,setVector2:null,setVector3:null,setVector4:null,setMatrix:null,setMatrix3:null,drawIndexedVertices:null,drawIndexedVerticesInstanced:null,flush:null,__class__:Ot};var Nt=function(e){this.pipeline=e;try{this.projectionLocation=e.getConstantLocation("projectionMatrix")}catch(e){w.trace(e instanceof W?e.val:e,{fileName:"kha/graphics4/Graphics2.hx",lineNumber:39,className:"kha.graphics4.PipelineCache",methodName:"new"})}try{this.textureLocation=e.getTextureUnit("tex")}catch(e){w.trace(e instanceof W?e.val:e,{fileName:"kha/graphics4/Graphics2.hx",lineNumber:40,className:"kha.graphics4.PipelineCache",methodName:"new"})}};s["kha.graphics4.PipelineCache"]=Nt,Nt.__name__=!0,Nt.prototype={pipeline:null,projectionLocation:null,textureLocation:null,__class__:Nt};var Pt=function(e){this.myPipeline=null,this.bilinearMipmaps=!1,this.bilinear=!1,this.g=e,Pt.bufferIndex=0,Pt.initShaders(),this.myPipeline=Pt.standardImagePipeline,this.initBuffers()};s["kha.graphics4.ImageShaderPainter"]=Pt,Pt.__name__=!0,Pt.initShaders=function(){if(null==Pt.structure&&(Pt.structure=Dt.createImageVertexStructure()),null==Pt.standardImagePipeline){var e=Dt.createImagePipeline(Pt.structure);e.compile(),Pt.standardImagePipeline=new Nt(e)}},Pt.prototype={projectionMatrix:null,bilinear:null,bilinearMipmaps:null,g:null,myPipeline:null,get_pipeline:function(){return this.myPipeline},set_pipeline:function(e){return this.myPipeline=null==e?Pt.standardImagePipeline:e,this.myPipeline},setProjection:function(e){this.projectionMatrix=e},initBuffers:function(){if(null==Pt.rectVertexBuffer){Pt.rectVertexBuffer=new Yt(6e3,Pt.structure,1),Pt.rectVertices=Pt.rectVertexBuffer.lock(),Pt.indexBuffer=new Ft(9e3,0);for(var e=Pt.indexBuffer.lock(),t=0;1500>t;){var n=t++;e[2*(3*n)]=4*n,e[2*(3*n)+1]=4*n+1,e[2*(3*n)+2]=4*n+2,e[2*(3*n)+3]=4*n,e[2*(3*n)+4]=4*n+2,e[2*(3*n)+5]=4*n+3}Pt.indexBuffer.unlock()}},setRectVertices:function(e,t,n,i,d,a,r,s){var o=4*(9*Pt.bufferIndex);Pt.rectVertices[o]=e,Pt.rectVertices[o+1]=t,Pt.rectVertices[o+2]=-5,Pt.rectVertices[o+9]=n,Pt.rectVertices[o+10]=i,Pt.rectVertices[o+11]=-5,Pt.rectVertices[o+18]=d,Pt.rectVertices[o+19]=a,Pt.rectVertices[o+20]=-5,Pt.rectVertices[o+27]=r,Pt.rectVertices[o+28]=s,Pt.rectVertices[o+29]=-5},setRectTexCoords:function(e,t,n,i){var d=4*(9*Pt.bufferIndex);Pt.rectVertices[d+3]=e,Pt.rectVertices[d+4]=i,Pt.rectVertices[d+12]=e,Pt.rectVertices[d+13]=t,Pt.rectVertices[d+21]=n,Pt.rectVertices[d+22]=t,Pt.rectVertices[d+30]=n,Pt.rectVertices[d+31]=i},setRectColor:function(e,t,n,i){var d=4*(9*Pt.bufferIndex);Pt.rectVertices[d+5]=e,Pt.rectVertices[d+6]=t,Pt.rectVertices[d+7]=n,Pt.rectVertices[d+8]=i,Pt.rectVertices[d+14]=e,Pt.rectVertices[d+15]=t,Pt.rectVertices[d+16]=n,Pt.rectVertices[d+17]=i,Pt.rectVertices[d+23]=e,Pt.rectVertices[d+24]=t,Pt.rectVertices[d+25]=n,Pt.rectVertices[d+26]=i,Pt.rectVertices[d+32]=e,Pt.rectVertices[d+33]=t,Pt.rectVertices[d+34]=n,Pt.rectVertices[d+35]=i},drawBuffer:function(){Pt.rectVertexBuffer.unlock(4*Pt.bufferIndex),this.g.setVertexBuffer(Pt.rectVertexBuffer),this.g.setIndexBuffer(Pt.indexBuffer),this.g.setPipeline(this.myPipeline.pipeline),this.g.setTexture(this.myPipeline.textureLocation,Pt.lastTexture),this.g.setTextureParameters(this.myPipeline.textureLocation,2,2,this.bilinear?1:0,this.bilinear?1:0,this.bilinearMipmaps?2:0),this.g.setMatrix(this.myPipeline.projectionLocation,this.projectionMatrix),this.g.drawIndexedVertices(0,3*(2*Pt.bufferIndex)),this.g.setTexture(this.myPipeline.textureLocation,null),Pt.bufferIndex=0,Pt.rectVertices=Pt.rectVertexBuffer.lock()},setBilinearFilter:function(e){this.end(),this.bilinear=e},setBilinearMipmapFilter:function(e){this.end(),this.bilinearMipmaps=e},drawImage:function(e,t,n,i,d,s,o,A,u,l,_){var f=e;(1500<=Pt.bufferIndex+1||null!=Pt.lastTexture&&f!=Pt.lastTexture)&&this.drawBuffer();var c=.00392156862745098*((16711680&_)>>>16),r=.00392156862745098*((65280&_)>>>8),g=.00392156862745098*(255&_),p=.00392156862745098*(_>>>24)*l,a=4*(9*Pt.bufferIndex);Pt.rectVertices[a+5]=c,Pt.rectVertices[a+6]=r,Pt.rectVertices[a+7]=g,Pt.rectVertices[a+8]=p,Pt.rectVertices[a+14]=c,Pt.rectVertices[a+15]=r,Pt.rectVertices[a+16]=g,Pt.rectVertices[a+17]=p,Pt.rectVertices[a+23]=c,Pt.rectVertices[a+24]=r,Pt.rectVertices[a+25]=g,Pt.rectVertices[a+26]=p,Pt.rectVertices[a+32]=c,Pt.rectVertices[a+33]=r,Pt.rectVertices[a+34]=g,Pt.rectVertices[a+35]=p;var h=f.get_width()/f.get_realWidth(),m=f.get_height()/f.get_realHeight(),b=4*(9*Pt.bufferIndex);Pt.rectVertices[b+3]=0,Pt.rectVertices[b+4]=m,Pt.rectVertices[b+12]=0,Pt.rectVertices[b+13]=0,Pt.rectVertices[b+21]=h,Pt.rectVertices[b+22]=0,Pt.rectVertices[b+30]=h,Pt.rectVertices[b+31]=m;var x=4*(9*Pt.bufferIndex);Pt.rectVertices[x]=t,Pt.rectVertices[x+1]=n,Pt.rectVertices[x+2]=-5,Pt.rectVertices[x+9]=i,Pt.rectVertices[x+10]=d,Pt.rectVertices[x+11]=-5,Pt.rectVertices[x+18]=s,Pt.rectVertices[x+19]=o,Pt.rectVertices[x+20]=-5,Pt.rectVertices[x+27]=A,Pt.rectVertices[x+28]=u,Pt.rectVertices[x+29]=-5,++Pt.bufferIndex,Pt.lastTexture=f},drawImage2:function(e,t,n,i,d,s,o,A,u,l,_,f,c,p,h){var m=e;(1500<=Pt.bufferIndex+1||null!=Pt.lastTexture&&m!=Pt.lastTexture)&&this.drawBuffer();var x=t/m.get_realWidth(),S=n/m.get_realHeight(),y=(t+i)/m.get_realWidth(),w=(n+d)/m.get_realHeight(),E=4*(9*Pt.bufferIndex);Pt.rectVertices[E+3]=x,Pt.rectVertices[E+4]=w,Pt.rectVertices[E+12]=x,Pt.rectVertices[E+13]=S,Pt.rectVertices[E+21]=y,Pt.rectVertices[E+22]=S,Pt.rectVertices[E+30]=y,Pt.rectVertices[E+31]=w;var T=.00392156862745098*((16711680&h)>>>16),r=.00392156862745098*((65280&h)>>>8),g=.00392156862745098*(255&h),b=.00392156862745098*(h>>>24)*p,a=4*(9*Pt.bufferIndex);Pt.rectVertices[a+5]=T,Pt.rectVertices[a+6]=r,Pt.rectVertices[a+7]=g,Pt.rectVertices[a+8]=b,Pt.rectVertices[a+14]=T,Pt.rectVertices[a+15]=r,Pt.rectVertices[a+16]=g,Pt.rectVertices[a+17]=b,Pt.rectVertices[a+23]=T,Pt.rectVertices[a+24]=r,Pt.rectVertices[a+25]=g,Pt.rectVertices[a+26]=b,Pt.rectVertices[a+32]=T,Pt.rectVertices[a+33]=r,Pt.rectVertices[a+34]=g,Pt.rectVertices[a+35]=b;var C=4*(9*Pt.bufferIndex);Pt.rectVertices[C]=s,Pt.rectVertices[C+1]=o,Pt.rectVertices[C+2]=-5,Pt.rectVertices[C+9]=A,Pt.rectVertices[C+10]=u,Pt.rectVertices[C+11]=-5,Pt.rectVertices[C+18]=l,Pt.rectVertices[C+19]=_,Pt.rectVertices[C+20]=-5,Pt.rectVertices[C+27]=f,Pt.rectVertices[C+28]=c,Pt.rectVertices[C+29]=-5,++Pt.bufferIndex,Pt.lastTexture=m},drawImageScale:function(e,t,n,i,d,a,s,o,A,u,l){var _=e;(1500<=Pt.bufferIndex+1||null!=Pt.lastTexture&&_!=Pt.lastTexture)&&this.drawBuffer();var f=t/_.get_realWidth(),c=n/_.get_realHeight(),p=(t+i)/_.get_realWidth(),h=(n+d)/_.get_realHeight(),m=4*(9*Pt.bufferIndex);Pt.rectVertices[m+3]=f,Pt.rectVertices[m+4]=h,Pt.rectVertices[m+12]=f,Pt.rectVertices[m+13]=c,Pt.rectVertices[m+21]=p,Pt.rectVertices[m+22]=c,Pt.rectVertices[m+30]=p,Pt.rectVertices[m+31]=h;var x=.00392156862745098*((16711680&l)>>>16),r=.00392156862745098*((65280&l)>>>8),g=.00392156862745098*(255&l),b=4*(9*Pt.bufferIndex);Pt.rectVertices[b+5]=x,Pt.rectVertices[b+6]=r,Pt.rectVertices[b+7]=g,Pt.rectVertices[b+8]=u,Pt.rectVertices[b+14]=x,Pt.rectVertices[b+15]=r,Pt.rectVertices[b+16]=g,Pt.rectVertices[b+17]=u,Pt.rectVertices[b+23]=x,Pt.rectVertices[b+24]=r,Pt.rectVertices[b+25]=g,Pt.rectVertices[b+26]=u,Pt.rectVertices[b+32]=x,Pt.rectVertices[b+33]=r,Pt.rectVertices[b+34]=g,Pt.rectVertices[b+35]=u;var S=4*(9*Pt.bufferIndex);Pt.rectVertices[S]=a,Pt.rectVertices[S+1]=A,Pt.rectVertices[S+2]=-5,Pt.rectVertices[S+9]=a,Pt.rectVertices[S+10]=s,Pt.rectVertices[S+11]=-5,Pt.rectVertices[S+18]=o,Pt.rectVertices[S+19]=s,Pt.rectVertices[S+20]=-5,Pt.rectVertices[S+27]=o,Pt.rectVertices[S+28]=A,Pt.rectVertices[S+29]=-5,++Pt.bufferIndex,Pt.lastTexture=_},end:function(){0<Pt.bufferIndex&&this.drawBuffer(),Pt.lastTexture=null},__class__:Pt};var Rt=function(e){this.myPipeline=null,this.g=e,Rt.bufferIndex=0,Rt.triangleBufferIndex=0,Rt.initShaders(),this.myPipeline=Rt.standardColorPipeline,this.initBuffers()};s["kha.graphics4.ColoredShaderPainter"]=Rt,Rt.__name__=!0,Rt.initShaders=function(){if(null==Rt.structure&&(Rt.structure=Dt.createColoredVertexStructure()),null==Rt.standardColorPipeline){var e=Dt.createColoredPipeline(Rt.structure);e.compile(),Rt.standardColorPipeline=new Nt(e)}},Rt.prototype={projectionMatrix:null,g:null,myPipeline:null,get_pipeline:function(){return this.myPipeline},set_pipeline:function(e){return this.myPipeline=null==e?Rt.standardColorPipeline:e,this.myPipeline},setProjection:function(e){this.projectionMatrix=e},initBuffers:function(){if(null==Rt.rectVertexBuffer){Rt.rectVertexBuffer=new Yt(4e3,Rt.structure,1),Rt.rectVertices=Rt.rectVertexBuffer.lock(),Rt.indexBuffer=new Ft(6e3,0);for(var e=Rt.indexBuffer.lock(),t=0;1e3>t;){var n=t++;e[2*(3*n)]=4*n,e[2*(3*n)+1]=4*n+1,e[2*(3*n)+2]=4*n+2,e[2*(3*n)+3]=4*n,e[2*(3*n)+4]=4*n+2,e[2*(3*n)+5]=4*n+3}Rt.indexBuffer.unlock(),Rt.triangleVertexBuffer=new Yt(3e3,Rt.structure,1),Rt.triangleVertices=Rt.triangleVertexBuffer.lock(),Rt.triangleIndexBuffer=new Ft(3e3,0);for(var i=Rt.triangleIndexBuffer.lock(),d=0;1e3>d;){var a=d++;i[3*a]=3*a,i[3*a+1]=3*a+1,i[3*a+2]=3*a+2}Rt.triangleIndexBuffer.unlock()}},setRectVertices:function(e,t,n,i,d,a,r,s){var o=4*(7*Rt.bufferIndex);Rt.rectVertices[o]=e,Rt.rectVertices[o+1]=t,Rt.rectVertices[o+2]=-5,Rt.rectVertices[o+7]=n,Rt.rectVertices[o+8]=i,Rt.rectVertices[o+9]=-5,Rt.rectVertices[o+14]=d,Rt.rectVertices[o+15]=a,Rt.rectVertices[o+16]=-5,Rt.rectVertices[o+21]=r,Rt.rectVertices[o+22]=s,Rt.rectVertices[o+23]=-5},setRectColors:function(e,t){var n=4*(7*Rt.bufferIndex),i=e*(.00392156862745098*(t>>>24)),d=i*(.00392156862745098*((16711680&t)>>>16)),a=i*(.00392156862745098*((65280&t)>>>8)),r=i*(.00392156862745098*(255&t));Rt.rectVertices[n+3]=d,Rt.rectVertices[n+4]=a,Rt.rectVertices[n+5]=r,Rt.rectVertices[n+6]=i,Rt.rectVertices[n+10]=d,Rt.rectVertices[n+11]=a,Rt.rectVertices[n+12]=r,Rt.rectVertices[n+13]=i,Rt.rectVertices[n+17]=d,Rt.rectVertices[n+18]=a,Rt.rectVertices[n+19]=r,Rt.rectVertices[n+20]=i,Rt.rectVertices[n+24]=d,Rt.rectVertices[n+25]=a,Rt.rectVertices[n+26]=r,Rt.rectVertices[n+27]=i},setTriVertices:function(e,t,n,i,d,a){var r=3*(7*Rt.triangleBufferIndex);Rt.triangleVertices[r]=e,Rt.triangleVertices[r+1]=t,Rt.triangleVertices[r+2]=-5,Rt.triangleVertices[r+7]=n,Rt.triangleVertices[r+8]=i,Rt.triangleVertices[r+9]=-5,Rt.triangleVertices[r+14]=d,Rt.triangleVertices[r+15]=a,Rt.triangleVertices[r+16]=-5},setTriColors:function(e,t){var n=3*(7*Rt.triangleBufferIndex),i=e*(.00392156862745098*(t>>>24)),d=i*(.00392156862745098*((16711680&t)>>>16)),a=i*(.00392156862745098*((65280&t)>>>8)),r=i*(.00392156862745098*(255&t));Rt.triangleVertices[n+3]=d,Rt.triangleVertices[n+4]=a,Rt.triangleVertices[n+5]=r,Rt.triangleVertices[n+6]=i,Rt.triangleVertices[n+10]=d,Rt.triangleVertices[n+11]=a,Rt.triangleVertices[n+12]=r,Rt.triangleVertices[n+13]=i,Rt.triangleVertices[n+17]=d,Rt.triangleVertices[n+18]=a,Rt.triangleVertices[n+19]=r,Rt.triangleVertices[n+20]=i},drawBuffer:function(e){!e&&0<Rt.triangleBufferIndex&&this.drawTriBuffer(!0),Rt.rectVertexBuffer.unlock(4*Rt.bufferIndex),this.g.setVertexBuffer(Rt.rectVertexBuffer),this.g.setIndexBuffer(Rt.indexBuffer),this.g.setPipeline(this.myPipeline.pipeline),this.g.setMatrix(this.myPipeline.projectionLocation,this.projectionMatrix),this.g.drawIndexedVertices(0,3*(2*Rt.bufferIndex)),Rt.bufferIndex=0,Rt.rectVertices=Rt.rectVertexBuffer.lock()},drawTriBuffer:function(e){!e&&0<Rt.bufferIndex&&this.drawBuffer(!0),Rt.triangleVertexBuffer.unlock(3*Rt.triangleBufferIndex),this.g.setVertexBuffer(Rt.triangleVertexBuffer),this.g.setIndexBuffer(Rt.triangleIndexBuffer),this.g.setPipeline(this.myPipeline.pipeline),this.g.setMatrix(this.myPipeline.projectionLocation,this.projectionMatrix),this.g.drawIndexedVertices(0,3*Rt.triangleBufferIndex),Rt.triangleBufferIndex=0,Rt.triangleVertices=Rt.triangleVertexBuffer.lock()},fillRect:function(e,t,n,i,d,a,r,s,o,A){0<Rt.triangleBufferIndex&&this.drawTriBuffer(!0),1e3<=Rt.bufferIndex+1&&this.drawBuffer(!1),this.setRectColors(e,t),this.setRectVertices(n,i,d,a,r,s,o,A),++Rt.bufferIndex},fillTriangle:function(e,t,n,i,d,a,r,s){0<Rt.bufferIndex&&this.drawBuffer(!0),1e3<=Rt.triangleBufferIndex+1&&this.drawTriBuffer(!1),this.setTriColors(e,t),this.setTriVertices(n,i,d,a,r,s),++Rt.triangleBufferIndex},endTris:function(e){0<Rt.triangleBufferIndex&&this.drawTriBuffer(e)},endRects:function(e){0<Rt.bufferIndex&&this.drawBuffer(e)},end:function(){0<Rt.triangleBufferIndex&&this.drawTriBuffer(!1),0<Rt.bufferIndex&&this.drawBuffer(!1)},__class__:Rt};var Vt=function(e){this.bakedQuadCache=new re,this.bilinear=!1,this.myPipeline=null,this.g=e,Vt.bufferIndex=0,Vt.initShaders(),this.myPipeline=Vt.standardTextPipeline,this.initBuffers()};s["kha.graphics4.TextShaderPainter"]=Vt,Vt.__name__=!0,Vt.initShaders=function(){if(null==Vt.structure&&(Vt.structure=Dt.createTextVertexStructure()),null==Vt.standardTextPipeline){var e=Dt.createTextPipeline(Vt.structure);e.compile(),Vt.standardTextPipeline=new Nt(e)}},Vt.findIndex=function(e){for(var t=ot.fontGlyphs,n=se.charBlocks,d=0,a=0,r=0|n.length/2;a<r;){var s=a++,i=n[2*s],o=n[2*s+1];if(e>=i&&e<=o)return d+e-i;d+=o-i+1}return 0},Vt.prototype={projectionMatrix:null,font:null,g:null,myPipeline:null,fontSize:null,bilinear:null,get_pipeline:function(){return this.myPipeline},set_pipeline:function(e){return this.myPipeline=null==e?Vt.standardTextPipeline:e,this.myPipeline},setProjection:function(e){this.projectionMatrix=e},initBuffers:function(){if(null==Vt.rectVertexBuffer){Vt.rectVertexBuffer=new Yt(4e3,Vt.structure,1),Vt.rectVertices=Vt.rectVertexBuffer.lock(),Vt.indexBuffer=new Ft(6e3,0);for(var e=Vt.indexBuffer.lock(),t=0;1e3>t;){var n=t++;e[2*(3*n)]=4*n,e[2*(3*n)+1]=4*n+1,e[2*(3*n)+2]=4*n+2,e[2*(3*n)+3]=4*n,e[2*(3*n)+4]=4*n+2,e[2*(3*n)+5]=4*n+3}Vt.indexBuffer.unlock()}},setRectVertices:function(e,t,n,i,d,a,r,s){var o=4*(9*Vt.bufferIndex);Vt.rectVertices[o]=e,Vt.rectVertices[o+1]=t,Vt.rectVertices[o+2]=-5,Vt.rectVertices[o+9]=n,Vt.rectVertices[o+10]=i,Vt.rectVertices[o+11]=-5,Vt.rectVertices[o+18]=d,Vt.rectVertices[o+19]=a,Vt.rectVertices[o+20]=-5,Vt.rectVertices[o+27]=r,Vt.rectVertices[o+28]=s,Vt.rectVertices[o+29]=-5},setRectTexCoords:function(e,t,n,i){var d=4*(9*Vt.bufferIndex);Vt.rectVertices[d+3]=e,Vt.rectVertices[d+4]=i,Vt.rectVertices[d+12]=e,Vt.rectVertices[d+13]=t,Vt.rectVertices[d+21]=n,Vt.rectVertices[d+22]=t,Vt.rectVertices[d+30]=n,Vt.rectVertices[d+31]=i},setRectColors:function(e,t){var n=4*(9*Vt.bufferIndex),i=e*(.00392156862745098*(t>>>24));Vt.rectVertices[n+5]=.00392156862745098*((16711680&t)>>>16),Vt.rectVertices[n+6]=.00392156862745098*((65280&t)>>>8),Vt.rectVertices[n+7]=.00392156862745098*(255&t),Vt.rectVertices[n+8]=i,Vt.rectVertices[n+14]=.00392156862745098*((16711680&t)>>>16),Vt.rectVertices[n+15]=.00392156862745098*((65280&t)>>>8),Vt.rectVertices[n+16]=.00392156862745098*(255&t),Vt.rectVertices[n+17]=i,Vt.rectVertices[n+23]=.00392156862745098*((16711680&t)>>>16),Vt.rectVertices[n+24]=.00392156862745098*((65280&t)>>>8),Vt.rectVertices[n+25]=.00392156862745098*(255&t),Vt.rectVertices[n+26]=i,Vt.rectVertices[n+32]=.00392156862745098*((16711680&t)>>>16),Vt.rectVertices[n+33]=.00392156862745098*((65280&t)>>>8),Vt.rectVertices[n+34]=.00392156862745098*(255&t),Vt.rectVertices[n+35]=i},drawBuffer:function(){Vt.rectVertexBuffer.unlock(4*Vt.bufferIndex),this.g.setVertexBuffer(Vt.rectVertexBuffer),this.g.setIndexBuffer(Vt.indexBuffer),this.g.setPipeline(this.myPipeline.pipeline),this.g.setTexture(this.myPipeline.textureLocation,Vt.lastTexture),this.g.setMatrix(this.myPipeline.projectionLocation,this.projectionMatrix),this.g.setTextureParameters(this.myPipeline.textureLocation,2,2,this.bilinear?1:0,this.bilinear?1:0,0),this.g.drawIndexedVertices(0,3*(2*Vt.bufferIndex)),this.g.setTexture(this.myPipeline.textureLocation,null),Vt.bufferIndex=0,Vt.rectVertices=Vt.rectVertexBuffer.lock()},setBilinearFilter:function(e){this.end(),this.bilinear=e},setFont:function(e){this.font=G.__cast(e,oe)},bakedQuadCache:null,drawString:function(e,t,n,d,a,r){var s=this.font._get(this.fontSize),o=s.getTexture();null!=Vt.lastTexture&&o!=Vt.lastTexture&&this.drawBuffer(),Vt.lastTexture=o;for(var A=d,u=0,l=e.length;u<l;){var _=u++,i=e.charCodeAt(_),f=s.getBakedQuad(this.bakedQuadCache,Vt.findIndex(i),A,a);if(null!=f){1e3<=Vt.bufferIndex+1&&this.drawBuffer(),this.setRectColors(t,n),this.setRectTexCoords(f.s0*o.get_width()/o.get_realWidth(),f.t0*o.get_height()/o.get_realHeight(),f.s1*o.get_width()/o.get_realWidth(),f.t1*o.get_height()/o.get_realHeight());var c=f.x0,g=f.y1;null==g&&(g=0),null==c&&(c=0);var p=c,h=g,m=r._02*p+r._12*h+r._22,b=(r._00*p+r._10*h+r._20)/m,x=(r._01*p+r._11*h+r._21)/m,S=b,y=x;null==y&&(y=0),null==S&&(S=0);var w=S,E=y,T=f.x0,C=f.y0;null==C&&(C=0),null==T&&(T=0);var I=T,B=C,k=r._02*I+r._12*B+r._22,v=(r._00*I+r._10*B+r._20)/k,L=(r._01*I+r._11*B+r._21)/k,O=v,N=L;null==N&&(N=0),null==O&&(O=0);var P=O,R=N,V=f.x1,D=f.y0;null==D&&(D=0),null==V&&(V=0);var F=V,M=D,U=r._02*F+r._12*M+r._22,H=(r._00*F+r._10*M+r._20)/U,W=(r._01*F+r._11*M+r._21)/U,G=H,z=W;null==z&&(z=0),null==G&&(G=0);var Y=G,X=z,Q=f.x1,j=f.y1;null==j&&(j=0),null==Q&&(Q=0);var K=Q,q=j,Z=r._02*K+r._12*q+r._22,J=(r._00*K+r._10*q+r._20)/Z,$=(r._01*K+r._11*q+r._21)/Z,ee=J,te=$;null==te&&(te=0),null==ee&&(ee=0);var ne=ee,ie=te;this.setRectVertices(w,E,P,R,Y,X,ne,ie),A+=f.xadvance,++Vt.bufferIndex}}},drawCharacters:function(e,t,n,d,a,r,s,o){var A=this.font._get(this.fontSize),u=A.getTexture();null!=Vt.lastTexture&&u!=Vt.lastTexture&&this.drawBuffer(),Vt.lastTexture=u;for(var l=r,_=t;_<t+n;){var f=_++,i=A.getBakedQuad(this.bakedQuadCache,Vt.findIndex(e[f]),l,s);if(null!=i){1e3<=Vt.bufferIndex+1&&this.drawBuffer(),this.setRectColors(d,a),this.setRectTexCoords(i.s0*u.get_width()/u.get_realWidth(),i.t0*u.get_height()/u.get_realHeight(),i.s1*u.get_width()/u.get_realWidth(),i.t1*u.get_height()/u.get_realHeight());var c=i.x0,g=i.y1;null==g&&(g=0),null==c&&(c=0);var p=c,h=g,m=o._02*p+o._12*h+o._22,b=(o._00*p+o._10*h+o._20)/m,x=(o._01*p+o._11*h+o._21)/m,S=b,y=x;null==y&&(y=0),null==S&&(S=0);var w=S,E=y,T=i.x0,C=i.y0;null==C&&(C=0),null==T&&(T=0);var I=T,B=C,k=o._02*I+o._12*B+o._22,v=(o._00*I+o._10*B+o._20)/k,L=(o._01*I+o._11*B+o._21)/k,O=v,N=L;null==N&&(N=0),null==O&&(O=0);var P=O,R=N,V=i.x1,D=i.y0;null==D&&(D=0),null==V&&(V=0);var F=V,M=D,U=o._02*F+o._12*M+o._22,H=(o._00*F+o._10*M+o._20)/U,W=(o._01*F+o._11*M+o._21)/U,G=H,z=W;null==z&&(z=0),null==G&&(G=0);var Y=G,X=z,Q=i.x1,j=i.y1;null==j&&(j=0),null==Q&&(Q=0);var K=Q,q=j,Z=o._02*K+o._12*q+o._22,J=(o._00*K+o._10*q+o._20)/Z,$=(o._01*K+o._11*q+o._21)/Z,ee=J,te=$;null==te&&(te=0),null==ee&&(ee=0);var ne=ee,ie=te;this.setRectVertices(w,E,P,R,Y,X,ne,ie),l+=i.xadvance,++Vt.bufferIndex}}},end:function(){0<Vt.bufferIndex&&this.drawBuffer(),Vt.lastTexture=null},__class__:Vt};var Dt=function(e){this.scissorH=-1,this.scissorW=-1,this.scissorY=-1,this.scissorX=-1,this.scissorEnabled=!1,this.lastPipeline=null,this.pipelineCache=new k,this.myMipmapScaleQuality=0,this.myImageScaleQuality=0,ot.call(this),this.set_color(-1),this.canvas=e,this.g=e.get_g4(),this.imagePainter=new Pt(this.g),this.coloredPainter=new Rt(this.g),this.textPainter=new Vt(this.g),this.textPainter.fontSize=this.get_fontSize(),this.projectionMatrix=new on(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this.setProjection(),null==Dt.videoPipeline&&(Dt.videoPipeline=Dt.createImagePipeline(Dt.createImageVertexStructure()),Dt.videoPipeline.fragmentShader=fe.painter_video_frag,Dt.videoPipeline.vertexShader=fe.painter_video_vert,Dt.videoPipeline.compile())};s["kha.graphics4.Graphics2"]=Dt,Dt.__name__=!0,Dt.upperPowerOfTwo=function(e){return--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e},Dt.createImageVertexStructure=function(){var e=new jt;return e.add("vertexPosition",2),e.add("texPosition",1),e.add("vertexColor",3),e},Dt.createImagePipeline=function(e){var t=new Ut;return t.fragmentShader=fe.painter_image_frag,t.vertexShader=fe.painter_image_vert,t.inputLayout=[e],t.blendSource=1,t.blendDestination=5,t.alphaBlendSource=1,t.alphaBlendDestination=5,t},Dt.createColoredVertexStructure=function(){var e=new jt;return e.add("vertexPosition",2),e.add("vertexColor",3),e},Dt.createColoredPipeline=function(e){var t=new Ut;return t.fragmentShader=fe.painter_colored_frag,t.vertexShader=fe.painter_colored_vert,t.inputLayout=[e],t.blendSource=1,t.blendDestination=5,t.alphaBlendSource=1,t.alphaBlendDestination=5,t},Dt.createTextVertexStructure=function(){var e=new jt;return e.add("vertexPosition",2),e.add("texPosition",1),e.add("vertexColor",3),e},Dt.createTextPipeline=function(e){var t=new Ut;return t.fragmentShader=fe.painter_text_frag,t.vertexShader=fe.painter_text_vert,t.inputLayout=[e],t.blendSource=3,t.blendDestination=5,t.alphaBlendSource=3,t.alphaBlendDestination=5,t},Dt.__super__=ot,Dt.prototype=n(ot.prototype,{myColor:null,myFont:null,projectionMatrix:null,imagePainter:null,coloredPainter:null,textPainter:null,canvas:null,g:null,setProjection:function(){var e=this.canvas.get_width(),t=this.canvas.get_height();if(this.canvas instanceof ne){var n=this.projectionMatrix,i=-e/e,d=-t/(0-t),a=2/e,r=2/(0-t);n._00=a,n._10=0,n._20=0,n._30=i,n._01=0,n._11=r,n._21=0,n._31=d,n._02=0,n._12=0,n._22=-.002000200020002,n._32=-1.0002000200020003,n._03=0,n._13=0,n._23=0,n._33=1}else if(ae.get_nonPow2Supported()||(e=Dt.upperPowerOfTwo(e),t=Dt.upperPowerOfTwo(t)),ae.renderTargetsInvertedY()){var s=this.projectionMatrix,o=-e/e,A=-t/t,u=2/e,l=2/t;s._00=u,s._10=0,s._20=0,s._30=o,s._01=0,s._11=l,s._21=0,s._31=A,s._02=0,s._12=0,s._22=-.002000200020002,s._32=-1.0002000200020003,s._03=0,s._13=0,s._23=0,s._33=1}else{var _=this.projectionMatrix,f=-e/e,c=-t/(0-t),g=2/e,p=2/(0-t);_._00=g,_._10=0,_._20=0,_._30=f,_._01=0,_._11=p,_._21=0,_._31=c,_._02=0,_._12=0,_._22=-.002000200020002,_._32=-1.0002000200020003,_._03=0,_._13=0,_._23=0,_._33=1}this.imagePainter.setProjection(this.projectionMatrix),this.coloredPainter.setProjection(this.projectionMatrix),this.textPainter.setProjection(this.projectionMatrix)},drawImage:function(e,t,n){var i=this.coloredPainter;0<Rt.triangleBufferIndex&&i.drawTriBuffer(!1),0<Rt.bufferIndex&&i.drawBuffer(!1),this.textPainter.end();var d=t+e.get_width(),s=n+e.get_height(),o=this.transformations[this.transformationIndex],A=t,u=s;null==u&&(u=0),null==A&&(A=0);var l=A,_=u,f=o._02*l+o._12*_+o._22,c=(o._00*l+o._10*_+o._20)/f,p=(o._01*l+o._11*_+o._21)/f,h=c,m=p;null==m&&(m=0),null==h&&(h=0);var x=h,S=m,y=this.transformations[this.transformationIndex],w=t,E=n;null==E&&(E=0),null==w&&(w=0);var T=w,C=E,I=y._02*T+y._12*C+y._22,B=(y._00*T+y._10*C+y._20)/I,k=(y._01*T+y._11*C+y._21)/I,v=B,L=k;null==L&&(L=0),null==v&&(v=0);var O=v,N=L,P=this.transformations[this.transformationIndex],R=d,V=n;null==V&&(V=0),null==R&&(R=0);var D=R,F=V,M=P._02*D+P._12*F+P._22,U=(P._00*D+P._10*F+P._20)/M,H=(P._01*D+P._11*F+P._21)/M,W=U,G=H;null==G&&(G=0),null==W&&(W=0);var z=W,Y=G,X=this.transformations[this.transformationIndex],Q=d,j=s;null==j&&(j=0),null==Q&&(Q=0);var K=Q,q=j,Z=X._02*K+X._12*q+X._22,J=(X._00*K+X._10*q+X._20)/Z,$=(X._01*K+X._11*q+X._21)/Z,ee=J,te=$;null==te&&(te=0),null==ee&&(ee=0);var ne=ee,ie=te,de=this.imagePainter,ae=this.get_opacity(),re=this.get_color(),se=e;(1500<=Pt.bufferIndex+1||null!=Pt.lastTexture&&se!=Pt.lastTexture)&&de.drawBuffer();var oe=.00392156862745098*((16711680&re)>>>16),r=.00392156862745098*((65280&re)>>>8),g=.00392156862745098*(255&re),b=.00392156862745098*(re>>>24)*ae,a=4*(9*Pt.bufferIndex);Pt.rectVertices[a+5]=oe,Pt.rectVertices[a+6]=r,Pt.rectVertices[a+7]=g,Pt.rectVertices[a+8]=b,Pt.rectVertices[a+14]=oe,Pt.rectVertices[a+15]=r,Pt.rectVertices[a+16]=g,Pt.rectVertices[a+17]=b,Pt.rectVertices[a+23]=oe,Pt.rectVertices[a+24]=r,Pt.rectVertices[a+25]=g,Pt.rectVertices[a+26]=b,Pt.rectVertices[a+32]=oe,Pt.rectVertices[a+33]=r,Pt.rectVertices[a+34]=g,Pt.rectVertices[a+35]=b;var Ae=se.get_width()/se.get_realWidth(),ue=se.get_height()/se.get_realHeight(),le=4*(9*Pt.bufferIndex);Pt.rectVertices[le+3]=0,Pt.rectVertices[le+4]=ue,Pt.rectVertices[le+12]=0,Pt.rectVertices[le+13]=0,Pt.rectVertices[le+21]=Ae,Pt.rectVertices[le+22]=0,Pt.rectVertices[le+30]=Ae,Pt.rectVertices[le+31]=ue;var _e=4*(9*Pt.bufferIndex);Pt.rectVertices[_e]=x,Pt.rectVertices[_e+1]=S,Pt.rectVertices[_e+2]=-5,Pt.rectVertices[_e+9]=O,Pt.rectVertices[_e+10]=N,Pt.rectVertices[_e+11]=-5,Pt.rectVertices[_e+18]=z,Pt.rectVertices[_e+19]=Y,Pt.rectVertices[_e+20]=-5,Pt.rectVertices[_e+27]=ne,Pt.rectVertices[_e+28]=ie,Pt.rectVertices[_e+29]=-5,++Pt.bufferIndex,Pt.lastTexture=se},drawScaledSubImage:function(e,t,n,i,d,s,o,A,u){var l=this.coloredPainter;0<Rt.triangleBufferIndex&&l.drawTriBuffer(!1),0<Rt.bufferIndex&&l.drawBuffer(!1),this.textPainter.end();var _=this.transformations[this.transformationIndex],f=s,c=o+u;null==c&&(c=0),null==f&&(f=0);var p=f,h=c,m=_._02*p+_._12*h+_._22,S=(_._00*p+_._10*h+_._20)/m,w=(_._01*p+_._11*h+_._21)/m,E=S,T=w;null==T&&(T=0),null==E&&(E=0);var C=E,I=T,B=this.transformations[this.transformationIndex],k=s,v=o;null==v&&(v=0),null==k&&(k=0);var L=k,O=v,N=B._02*L+B._12*O+B._22,P=(B._00*L+B._10*O+B._20)/N,R=(B._01*L+B._11*O+B._21)/N,V=P,D=R;null==D&&(D=0),null==V&&(V=0);var F=V,M=D,U=this.transformations[this.transformationIndex],H=s+A,W=o;null==W&&(W=0),null==H&&(H=0);var G=H,z=W,Y=U._02*G+U._12*z+U._22,X=(U._00*G+U._10*z+U._20)/Y,Q=(U._01*G+U._11*z+U._21)/Y,j=X,K=Q;null==K&&(K=0),null==j&&(j=0);var q=j,Z=K,J=this.transformations[this.transformationIndex],$=s+A,ee=o+u;null==ee&&(ee=0),null==$&&($=0);var te=$,ne=ee,ie=J._02*te+J._12*ne+J._22,de=(J._00*te+J._10*ne+J._20)/ie,ae=(J._01*te+J._11*ne+J._21)/ie,re=de,se=ae;null==se&&(se=0),null==re&&(re=0);var oe=re,Ae=se,ue=this.imagePainter,le=this.get_opacity(),_e=this.get_color(),fe=e;(1500<=Pt.bufferIndex+1||null!=Pt.lastTexture&&fe!=Pt.lastTexture)&&ue.drawBuffer();var ce=t/fe.get_realWidth(),ge=n/fe.get_realHeight(),pe=(t+i)/fe.get_realWidth(),he=(n+d)/fe.get_realHeight(),me=4*(9*Pt.bufferIndex);Pt.rectVertices[me+3]=ce,Pt.rectVertices[me+4]=he,Pt.rectVertices[me+12]=ce,Pt.rectVertices[me+13]=ge,Pt.rectVertices[me+21]=pe,Pt.rectVertices[me+22]=ge,Pt.rectVertices[me+30]=pe,Pt.rectVertices[me+31]=he;var be=.00392156862745098*((16711680&_e)>>>16),r=.00392156862745098*((65280&_e)>>>8),g=.00392156862745098*(255&_e),b=.00392156862745098*(_e>>>24)*le,a=4*(9*Pt.bufferIndex);Pt.rectVertices[a+5]=be,Pt.rectVertices[a+6]=r,Pt.rectVertices[a+7]=g,Pt.rectVertices[a+8]=b,Pt.rectVertices[a+14]=be,Pt.rectVertices[a+15]=r,Pt.rectVertices[a+16]=g,Pt.rectVertices[a+17]=b,Pt.rectVertices[a+23]=be,Pt.rectVertices[a+24]=r,Pt.rectVertices[a+25]=g,Pt.rectVertices[a+26]=b,Pt.rectVertices[a+32]=be,Pt.rectVertices[a+33]=r,Pt.rectVertices[a+34]=g,Pt.rectVertices[a+35]=b;var xe=4*(9*Pt.bufferIndex);Pt.rectVertices[xe]=C,Pt.rectVertices[xe+1]=I,Pt.rectVertices[xe+2]=-5,Pt.rectVertices[xe+9]=F,Pt.rectVertices[xe+10]=M,Pt.rectVertices[xe+11]=-5,Pt.rectVertices[xe+18]=q,Pt.rectVertices[xe+19]=Z,Pt.rectVertices[xe+20]=-5,Pt.rectVertices[xe+27]=oe,Pt.rectVertices[xe+28]=Ae,Pt.rectVertices[xe+29]=-5,++Pt.bufferIndex,Pt.lastTexture=fe},get_color:function(){return this.myColor},set_color:function(e){return this.myColor=e},drawRect:function(e,t,n,i,d){null==d&&(d=1),this.imagePainter.end(),this.textPainter.end();var a=this.transformations[this.transformationIndex],r=e-d/2,s=t+d/2;null==s&&(s=0),null==r&&(r=0);var o=r,A=s,u=a._02*o+a._12*A+a._22,l=(a._00*o+a._10*A+a._20)/u,_=(a._01*o+a._11*A+a._21)/u,f=l,c=_;null==c&&(c=0),null==f&&(f=0);var g=f,p=c,h=this.transformations[this.transformationIndex],m=e-d/2,b=t-d/2;null==b&&(b=0),null==m&&(m=0);var x=m,S=b,y=h._02*x+h._12*S+h._22,w=(h._00*x+h._10*S+h._20)/y,E=(h._01*x+h._11*S+h._21)/y,T=w,C=E;null==C&&(C=0),null==T&&(T=0);var I=T,B=C,k=this.transformations[this.transformationIndex],v=e+n+d/2,L=t-d/2;null==L&&(L=0),null==v&&(v=0);var O=v,N=L,P=k._02*O+k._12*N+k._22,R=(k._00*O+k._10*N+k._20)/P,V=(k._01*O+k._11*N+k._21)/P,D=R,F=V;null==F&&(F=0),null==D&&(D=0);var M=D,U=F,H=this.transformations[this.transformationIndex],W=e+n+d/2,G=t+d/2;null==G&&(G=0),null==W&&(W=0);var z=W,Y=G,X=H._02*z+H._12*Y+H._22,Q=(H._00*z+H._10*Y+H._20)/X,j=(H._01*z+H._11*Y+H._21)/X,K=Q,q=j;null==q&&(q=0),null==K&&(K=0);var Z=K,J=q;this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),g,p,I,B,M,U,Z,J);var $=this.transformations[this.transformationIndex],ee=e-d/2,te=t+i-d/2;null==te&&(te=0),null==ee&&(ee=0);var ne=ee,ie=te,de=$._02*ne+$._12*ie+$._22,ae=($._00*ne+$._10*ie+$._20)/de,re=($._01*ne+$._11*ie+$._21)/de,se=ae,oe=re;null==oe&&(oe=0),null==se&&(se=0);var Ae=se,ue=oe;g=Ae,p=ue;var le=this.transformations[this.transformationIndex],_e=e-d/2,fe=t+d/2;null==fe&&(fe=0),null==_e&&(_e=0);var ce=_e,ge=fe,pe=le._02*ce+le._12*ge+le._22,he=(le._00*ce+le._10*ge+le._20)/pe,me=(le._01*ce+le._11*ge+le._21)/pe,be=he,xe=me;null==xe&&(xe=0),null==be&&(be=0);var Se=be,ye=xe;I=Se,B=ye;var we=this.transformations[this.transformationIndex],Ee=e+d/2,Te=t+d/2;null==Te&&(Te=0),null==Ee&&(Ee=0);var Ce=Ee,Ie=Te,Be=we._02*Ce+we._12*Ie+we._22,ke=(we._00*Ce+we._10*Ie+we._20)/Be,ve=(we._01*Ce+we._11*Ie+we._21)/Be,Le=ke,Oe=ve;null==Oe&&(Oe=0),null==Le&&(Le=0);var Ne=Le,Pe=Oe;M=Ne,U=Pe;var Re=this.transformations[this.transformationIndex],Ve=e+d/2,De=t+i-d/2;null==De&&(De=0),null==Ve&&(Ve=0);var Fe=Ve,Me=De,Ue=Re._02*Fe+Re._12*Me+Re._22,He=(Re._00*Fe+Re._10*Me+Re._20)/Ue,We=(Re._01*Fe+Re._11*Me+Re._21)/Ue,Ge=He,ze=We;null==ze&&(ze=0),null==Ge&&(Ge=0);var Ye=Ge,Xe=ze;Z=Ye,J=Xe,this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),g,p,I,B,M,U,Z,J);var Qe=this.transformations[this.transformationIndex],je=e-d/2,Ke=t+i+d/2;null==Ke&&(Ke=0),null==je&&(je=0);var qe=je,Ze=Ke,Je=Qe._02*qe+Qe._12*Ze+Qe._22,$e=(Qe._00*qe+Qe._10*Ze+Qe._20)/Je,et=(Qe._01*qe+Qe._11*Ze+Qe._21)/Je,tt=$e,nt=et;null==nt&&(nt=0),null==tt&&(tt=0);var it=tt,dt=nt;g=it,p=dt;var at=this.transformations[this.transformationIndex],rt=e-d/2,st=t+i-d/2;null==st&&(st=0),null==rt&&(rt=0);var ot=rt,At=st,ut=at._02*ot+at._12*At+at._22,lt=(at._00*ot+at._10*At+at._20)/ut,_t=(at._01*ot+at._11*At+at._21)/ut,ft=lt,ct=_t;null==ct&&(ct=0),null==ft&&(ft=0);var gt=ft,pt=ct;I=gt,B=pt;var ht=this.transformations[this.transformationIndex],mt=e+n+d/2,bt=t+i-d/2;null==bt&&(bt=0),null==mt&&(mt=0);var xt=mt,St=bt,yt=ht._02*xt+ht._12*St+ht._22,wt=(ht._00*xt+ht._10*St+ht._20)/yt,Et=(ht._01*xt+ht._11*St+ht._21)/yt,Tt=wt,Ct=Et;null==Ct&&(Ct=0),null==Tt&&(Tt=0);var It=Tt,Bt=Ct;M=It,U=Bt;var kt=this.transformations[this.transformationIndex],vt=e+n+d/2,Lt=t+i+d/2;null==Lt&&(Lt=0),null==vt&&(vt=0);var Ot=vt,Nt=Lt,Pt=kt._02*Ot+kt._12*Nt+kt._22,Rt=(kt._00*Ot+kt._10*Nt+kt._20)/Pt,Vt=(kt._01*Ot+kt._11*Nt+kt._21)/Pt,Dt=Rt,Ft=Vt;null==Ft&&(Ft=0),null==Dt&&(Dt=0);var Mt=Dt,Ut=Ft;Z=Mt,J=Ut,this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),g,p,I,B,M,U,Z,J);var Ht=this.transformations[this.transformationIndex],Wt=e+n-d/2,Gt=t+i-d/2;null==Gt&&(Gt=0),null==Wt&&(Wt=0);var zt=Wt,Yt=Gt,Xt=Ht._02*zt+Ht._12*Yt+Ht._22,Qt=(Ht._00*zt+Ht._10*Yt+Ht._20)/Xt,jt=(Ht._01*zt+Ht._11*Yt+Ht._21)/Xt,Kt=Qt,qt=jt;null==qt&&(qt=0),null==Kt&&(Kt=0);var Zt=Kt,Jt=qt;g=Zt,p=Jt;var $t=this.transformations[this.transformationIndex],en=e+n-d/2,tn=t+d/2;null==tn&&(tn=0),null==en&&(en=0);var nn=en,dn=tn,an=$t._02*nn+$t._12*dn+$t._22,rn=($t._00*nn+$t._10*dn+$t._20)/an,sn=($t._01*nn+$t._11*dn+$t._21)/an,on=rn,An=sn;null==An&&(An=0),null==on&&(on=0);var un=on,ln=An;I=un,B=ln;var _n=this.transformations[this.transformationIndex],fn=e+n+d/2,cn=t+d/2;null==cn&&(cn=0),null==fn&&(fn=0);var gn=fn,pn=cn,hn=_n._02*gn+_n._12*pn+_n._22,mn=(_n._00*gn+_n._10*pn+_n._20)/hn,bn=(_n._01*gn+_n._11*pn+_n._21)/hn,xn=mn,Sn=bn;null==Sn&&(Sn=0),null==xn&&(xn=0);var yn=xn,wn=Sn;M=yn,U=wn;var En=this.transformations[this.transformationIndex],Tn=e+n+d/2,Cn=t+i-d/2;null==Cn&&(Cn=0),null==Tn&&(Tn=0);var In=Tn,Bn=Cn,kn=En._02*In+En._12*Bn+En._22,vn=(En._00*In+En._10*Bn+En._20)/kn,Ln=(En._01*In+En._11*Bn+En._21)/kn,On=vn,Nn=Ln;null==Nn&&(Nn=0),null==On&&(On=0);var Pn=On,Rn=Nn;Z=Pn,J=Rn,this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),g,p,I,B,M,U,Z,J)},fillRect:function(e,t,n,i){this.imagePainter.end(),this.textPainter.end();var d=this.transformations[this.transformationIndex],a=e,r=t+i;null==r&&(r=0),null==a&&(a=0);var s=a,o=r,A=d._02*s+d._12*o+d._22,u=(d._00*s+d._10*o+d._20)/A,l=(d._01*s+d._11*o+d._21)/A,_=u,f=l;null==f&&(f=0),null==_&&(_=0);var c=_,g=f,p=this.transformations[this.transformationIndex],h=e,m=t;null==m&&(m=0),null==h&&(h=0);var b=h,x=m,S=p._02*b+p._12*x+p._22,y=(p._00*b+p._10*x+p._20)/S,w=(p._01*b+p._11*x+p._21)/S,E=y,T=w;null==T&&(T=0),null==E&&(E=0);var C=E,I=T,B=this.transformations[this.transformationIndex],k=e+n,v=t;null==v&&(v=0),null==k&&(k=0);var L=k,O=v,N=B._02*L+B._12*O+B._22,P=(B._00*L+B._10*O+B._20)/N,R=(B._01*L+B._11*O+B._21)/N,V=P,D=R;null==D&&(D=0),null==V&&(V=0);var F=V,M=D,U=this.transformations[this.transformationIndex],H=e+n,W=t+i;null==W&&(W=0),null==H&&(H=0);var G=H,z=W,Y=U._02*G+U._12*z+U._22,X=(U._00*G+U._10*z+U._20)/Y,Q=(U._01*G+U._11*z+U._21)/Y,j=X,K=Q;null==K&&(K=0),null==j&&(j=0);var q=j,Z=K;this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),c,g,C,I,F,M,q,Z)},drawString:function(e,t,n){this.imagePainter.end();var i=this.coloredPainter;0<Rt.triangleBufferIndex&&i.drawTriBuffer(!1),0<Rt.bufferIndex&&i.drawBuffer(!1),this.textPainter.drawString(e,this.get_opacity(),this.get_color(),t,n,this.transformations[this.transformationIndex])},drawCharacters:function(e,t,n,i,d){this.imagePainter.end();var a=this.coloredPainter;0<Rt.triangleBufferIndex&&a.drawTriBuffer(!1),0<Rt.bufferIndex&&a.drawBuffer(!1),this.textPainter.drawCharacters(e,t,n,this.get_opacity(),this.get_color(),i,d,this.transformations[this.transformationIndex])},get_font:function(){return this.myFont},set_font:function(e){return this.textPainter.setFont(e),this.myFont=e},set_fontSize:function(e){return ot.prototype.set_fontSize.call(this,this.textPainter.fontSize=e)},drawLine:function(e,t,n,i,d){null==d&&(d=1),this.imagePainter.end(),this.textPainter.end();var a=0,r=0;if(i==t){var s=0,o=-1;null==o&&(o=0),null==s&&(s=0);var A=s,u=o;a=A,r=u}else{var l=1,_=-(n-e)/(i-t);null==_&&(_=0),null==l&&(l=0);var f=l,c=_;a=f,r=c}var g=Math.sqrt(a*a+r*r);if(0!=g){var p=d/g;a*=p,r*=p}var h=e+.5*a,m=t+.5*r;null==m&&(m=0),null==h&&(h=0);var b=h,S=m,E=n+.5*a,T=i+.5*r;null==T&&(T=0),null==E&&(E=0);var C=E,I=T,B=b-a,k=S-r;null==k&&(k=0),null==B&&(B=0);var v=B,L=k,O=C-a,N=I-r;null==N&&(N=0),null==O&&(O=0);var P=O,R=N,V=this.transformations[this.transformationIndex],D=V._02*b+V._12*S+V._22,w=(V._00*b+V._10*S+V._20)/D,F=(V._01*b+V._11*S+V._21)/D,M=w,U=F;null==U&&(U=0),null==M&&(M=0);var H=M,W=U;b=H,S=W;var G=this.transformations[this.transformationIndex],z=G._02*C+G._12*I+G._22,Y=(G._00*C+G._10*I+G._20)/z,X=(G._01*C+G._11*I+G._21)/z,Q=Y,j=X;null==j&&(j=0),null==Q&&(Q=0);var K=Q,q=j;C=K,I=q;var Z=this.transformations[this.transformationIndex],J=Z._02*v+Z._12*L+Z._22,$=(Z._00*v+Z._10*L+Z._20)/J,ee=(Z._01*v+Z._11*L+Z._21)/J,te=$,ne=ee;null==ne&&(ne=0),null==te&&(te=0);var ie=te,de=ne;v=ie,L=de;var ae=this.transformations[this.transformationIndex],re=ae._02*P+ae._12*R+ae._22,se=(ae._00*P+ae._10*R+ae._20)/re,oe=(ae._01*P+ae._11*R+ae._21)/re,Ae=se,ue=oe;null==ue&&(ue=0),null==Ae&&(Ae=0);var le=Ae,_e=ue;P=le,R=_e,this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),b,S,C,I,v,L),this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),v,L,C,I,P,R)},fillTriangle:function(e,t,n,i,d,a){this.imagePainter.end(),this.textPainter.end();var r=this.transformations[this.transformationIndex],s=e,o=t;null==o&&(o=0),null==s&&(s=0);var A=s,u=o,l=r._02*A+r._12*u+r._22,_=(r._00*A+r._10*u+r._20)/l,f=(r._01*A+r._11*u+r._21)/l,c=_,g=f;null==g&&(g=0),null==c&&(c=0);var p=c,h=g,m=this.transformations[this.transformationIndex],b=n,S=i;null==S&&(S=0),null==b&&(b=0);var w=b,E=S,T=m._02*w+m._12*E+m._22,C=(m._00*w+m._10*E+m._20)/T,I=(m._01*w+m._11*E+m._21)/T,B=C,k=I;null==k&&(k=0),null==B&&(B=0);var v=B,L=k,O=this.transformations[this.transformationIndex],N=d,P=a;null==P&&(P=0),null==N&&(N=0);var R=N,V=P,D=O._02*R+O._12*V+O._22,F=(O._00*R+O._10*V+O._20)/D,M=(O._01*R+O._11*V+O._21)/D,U=F,H=M;null==H&&(H=0),null==U&&(U=0);var W=U,G=H;this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),p,h,v,L,W,G)},myImageScaleQuality:null,get_imageScaleQuality:function(){return this.myImageScaleQuality},set_imageScaleQuality:function(e){return e==this.myImageScaleQuality?e:(this.imagePainter.setBilinearFilter(1==e),this.textPainter.setBilinearFilter(1==e),this.myImageScaleQuality=e)},myMipmapScaleQuality:null,get_mipmapScaleQuality:function(){return this.myMipmapScaleQuality},set_mipmapScaleQuality:function(e){return this.imagePainter.setBilinearMipmapFilter(1==e),this.myMipmapScaleQuality=e},pipelineCache:null,lastPipeline:null,setPipeline:function(e){if(e!=this.lastPipeline)if(this.lastPipeline=e,this.flush(),null==e)this.imagePainter.set_pipeline(null),this.coloredPainter.set_pipeline(null),this.textPainter.set_pipeline(null);else{var t=this.pipelineCache.h[e.__id__];null==t&&(t=new Nt(e),this.pipelineCache.set(e,t)),this.imagePainter.set_pipeline(t),this.coloredPainter.set_pipeline(t),this.textPainter.set_pipeline(t)}},scissorEnabled:null,scissorX:null,scissorY:null,scissorW:null,scissorH:null,scissor:function(e,t,n,i){this.scissorEnabled=!0,this.scissorX=e,this.scissorY=t,this.scissorW=n,this.scissorH=i,this.flush(),this.g.scissor(e,t,n,i)},disableScissor:function(){this.scissorEnabled=!1,this.flush(),this.g.disableScissor()},begin:function(e,t){if(null==e&&(e=!0),null==Dt.current)Dt.current=this;else throw new W("End before you begin");this.g.begin(),e&&this.clear(t),this.setProjection()},clear:function(e){this.flush(),this.g.clear(null==e?-16777216:e)},flush:function(){this.imagePainter.end(),this.textPainter.end();var e=this.coloredPainter;0<Rt.triangleBufferIndex&&e.drawTriBuffer(!1),0<Rt.bufferIndex&&e.drawBuffer(!1)},end:function(){if(this.flush(),this.g.end(),Dt.current==this)Dt.current=null;else throw new W("Begin before you end")},drawVideoInternal:function(){},drawVideo:function(e,t,n,i,d){this.setPipeline(Dt.videoPipeline),this.drawVideoInternal(e,t,n,i,d),this.setPipeline(null)},__class__:Dt});var Ft=function(e,t,n){null==n&&(n=!1),this.indexCount=e,this.buffer=Krom.createIndexBuffer(e)};s["kha.graphics4.IndexBuffer"]=Ft,Ft.__name__=!0,Ft.prototype={buffer:null,_data:null,indexCount:null,delete:function(){Krom.deleteIndexBuffer(this.buffer),this.buffer=null},lock:function(e,t){return this._data=Krom.lockIndexBuffer(this.buffer),null==e&&(e=0),null==t&&(t=this.indexCount),this._data.subarray(e,e+t)},unlock:function(){Krom.unlockIndexBuffer(this.buffer)},set:function(){Krom.setIndexBuffer(this.buffer)},count:function(){return this.indexCount},__class__:Ft};var Mt=function(){this.inputLayout=null,this.vertexShader=null,this.fragmentShader=null,this.geometryShader=null,this.tessellationControlShader=null,this.tessellationEvaluationShader=null,this.cullMode=2,this.depthWrite=!1,this.depthMode=0,this.stencilMode=0,this.stencilBothPass=0,this.stencilDepthFail=0,this.stencilFail=0,this.stencilReferenceValue=Ht.Static(0),this.stencilReadMask=255,this.stencilWriteMask=255,this.blendSource=1,this.blendDestination=2,this.blendOperation=0,this.alphaBlendSource=1,this.alphaBlendDestination=2,this.alphaBlendOperation=0,this.colorWriteMasksRed=[],this.colorWriteMasksGreen=[],this.colorWriteMasksBlue=[],this.colorWriteMasksAlpha=[],this.colorWriteMasksRed.push(!0),this.colorWriteMasksRed.push(!0),this.colorWriteMasksRed.push(!0),this.colorWriteMasksRed.push(!0),this.colorWriteMasksRed.push(!0),this.colorWriteMasksRed.push(!0),this.colorWriteMasksRed.push(!0),this.colorWriteMasksRed.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksGreen.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksBlue.push(!0),this.colorWriteMasksAlpha.push(!0),this.colorWriteMasksAlpha.push(!0),this.colorWriteMasksAlpha.push(!0),this.colorWriteMasksAlpha.push(!0),this.colorWriteMasksAlpha.push(!0),this.colorWriteMasksAlpha.push(!0),this.colorWriteMasksAlpha.push(!0),this.colorWriteMasksAlpha.push(!0),this.conservativeRasterization=!1};s["kha.graphics4.PipelineStateBase"]=Mt,Mt.__name__=!0,Mt.prototype={inputLayout:null,vertexShader:null,fragmentShader:null,geometryShader:null,tessellationControlShader:null,tessellationEvaluationShader:null,cullMode:null,depthWrite:null,depthMode:null,stencilMode:null,stencilBothPass:null,stencilDepthFail:null,stencilFail:null,stencilReferenceValue:null,stencilReadMask:null,stencilWriteMask:null,blendSource:null,blendDestination:null,blendOperation:null,alphaBlendSource:null,alphaBlendDestination:null,alphaBlendOperation:null,colorWriteMasksRed:null,colorWriteMasksGreen:null,colorWriteMasksBlue:null,colorWriteMasksAlpha:null,set_colorWriteMask:function(e){var t=this.colorWriteMasksAlpha[0]=e,n=this.colorWriteMasksGreen[0]=t,i=this.colorWriteMasksBlue[0]=n;return this.colorWriteMasksRed[0]=i},get_colorWriteMaskRed:function(){return this.colorWriteMasksRed[0]},set_colorWriteMaskRed:function(e){return this.colorWriteMasksRed[0]=e},get_colorWriteMaskGreen:function(){return this.colorWriteMasksGreen[0]},set_colorWriteMaskGreen:function(e){return this.colorWriteMasksGreen[0]=e},get_colorWriteMaskBlue:function(){return this.colorWriteMasksBlue[0]},set_colorWriteMaskBlue:function(e){return this.colorWriteMasksBlue[0]=e},get_colorWriteMaskAlpha:function(){return this.colorWriteMasksAlpha[0]},set_colorWriteMaskAlpha:function(e){return this.colorWriteMasksAlpha[0]=e},conservativeRasterization:null,__class__:Mt};var Ut=function(){Mt.call(this),this.pipeline=Krom.createPipeline()};s["kha.graphics4.PipelineState"]=Ut,Ut.__name__=!0,Ut.convertBlendingFactor=function(e){return 0===e||1===e?0:2===e?1:3===e?2:4===e?3:5===e?4:6===e?5:7===e?6:8===e?7:9===e?8:10===e?9:void 0},Ut.__super__=Mt,Ut.prototype=n(Mt.prototype,{pipeline:null,delete:function(){Krom.deletePipeline(this.pipeline),this.pipeline=null},compile:function(){var e=0<this.inputLayout.length?this.inputLayout[0]:null,t=1<this.inputLayout.length?this.inputLayout[1]:null,n=2<this.inputLayout.length?this.inputLayout[2]:null,i=3<this.inputLayout.length?this.inputLayout[3]:null,d=null==this.geometryShader?null:this.geometryShader.shader,a=null==this.tessellationControlShader?null:this.tessellationControlShader.shader,r=null==this.tessellationEvaluationShader?null:this.tessellationEvaluationShader.shader,s=0,o=this.stencilReferenceValue;if(1==o._hx_index){var A=o.value;s=A}Krom.compilePipeline(this.pipeline,e,t,n,i,this.inputLayout.length,this.vertexShader.shader,this.fragmentShader.shader,d,a,r,{cullMode:this.cullMode,depthWrite:this.depthWrite,depthMode:this.depthMode,stencilMode:this.stencilMode,stencilBothPass:this.stencilBothPass,stencilDepthFail:this.stencilDepthFail,stencilFail:this.stencilFail,stencilReferenceValue:s,stencilReadMask:this.stencilReadMask,stencilWriteMask:this.stencilWriteMask,blendSource:Ut.convertBlendingFactor(this.blendSource),blendDestination:Ut.convertBlendingFactor(this.blendDestination),alphaBlendSource:Ut.convertBlendingFactor(this.alphaBlendSource),alphaBlendDestination:Ut.convertBlendingFactor(this.alphaBlendDestination),colorWriteMaskRed:this.colorWriteMasksRed,colorWriteMaskGreen:this.colorWriteMasksGreen,colorWriteMaskBlue:this.colorWriteMasksBlue,colorWriteMaskAlpha:this.colorWriteMasksAlpha,conservativeRasterization:this.conservativeRasterization})},set:function(){Krom.setPipeline(this.pipeline)},getConstantLocation:function(e){return Krom.getConstantLocation(this.pipeline,e)},getTextureUnit:function(e){return Krom.getTextureUnit(this.pipeline,e)},__class__:Ut});var Ht=A["kha.graphics4.StencilValue"]={__ename__:!0,__constructs__:["Dynamic","Static"],Dynamic:{_hx_index:0,__enum__:"kha.graphics4.StencilValue",toString:o},Static:(l=function(e){return{_hx_index:1,value:e,__enum__:"kha.graphics4.StencilValue",toString:o}},l.__params__=["value"],l)},Wt=function(e,t){this.shader=Krom.createTessellationControlShader(e[0].bytes.b.bufferValue,t[0])};s["kha.graphics4.TessellationControlShader"]=Wt,Wt.__name__=!0,Wt.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:Wt};var Gt=function(e,t){this.shader=Krom.createTessellationEvaluationShader(e[0].bytes.b.bufferValue,t[0])};s["kha.graphics4.TessellationEvaluationShader"]=Gt,Gt.__name__=!0,Gt.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:Gt};var zt=function(){};s["kha.graphics4.TextureUnit"]=zt,zt.__name__=!0,zt.__isInterface__=!0;var Yt=function(e,t,n,i,d){null==d&&(d=!1),null==i&&(i=0),this.vertexCount=e,this.structure=t,this.buffer=Krom.createVertexBuffer(e,t.elements,n,i)};s["kha.graphics4.VertexBuffer"]=Yt,Yt.__name__=!0,Yt.prototype={buffer:null,_data:null,vertexCount:null,structure:null,delete:function(){Krom.deleteVertexBuffer(this.buffer),this.buffer=null},lock:function(){return this._data=Krom.lockVertexBuffer(this.buffer),this._data},lockInt16:function(e,t){var n=new Int16Array(this.lock(e,t).buffer);return n},unlock:function(){Krom.unlockVertexBuffer(this.buffer)},stride:function(){return this.structure.byteSize()},count:function(){return this.vertexCount},set:function(){return Krom.setVertexBuffer(this.buffer),0},__class__:Yt};var Xt=function(e,t){this.name=e,this.data=t};s["kha.graphics4.VertexElement"]=Xt,Xt.__name__=!0,Xt.prototype={name:null,data:null,__class__:Xt};var Qt=function(e,t){null!=e&&(this.shader=Krom.createVertexShader(e[0].bytes.b.bufferValue,t[0]))};s["kha.graphics4.VertexShader"]=Qt,Qt.__name__=!0,Qt.fromSource=function(e){var t=new Qt(null,null);return t.shader=Krom.createVertexShaderFromSource(e),t},Qt.prototype={shader:null,delete:function(){Krom.deleteShader(this.shader),this.shader=null},__class__:Qt};var jt=function(){this.elements=[],this.instanced=!1};s["kha.graphics4.VertexStructure"]=jt,jt.__name__=!0,jt.prototype={elements:null,instanced:null,add:function(e,t){this.elements.push(new Xt(e,t))},size:function(){return this.elements.length},byteSize:function(){for(var e=0,t=0,n=this.elements.length;t<n;){var d=t++;e+=this.dataByteSize(this.elements[d].data)}return e},dataByteSize:function(e){return 0===e?4:1===e?8:2===e?12:3===e?16:4===e?64:5===e?4:6===e?8:void 0},get:function(e){return this.elements[e]},__class__:jt};var Kt=e.kha.input.Gamepad=function(e,t){null==t&&(t="unknown"),null==e&&(e=0),this.index=e,this.axisListeners=[],this.buttonListeners=[],Kt.instances[e]=this};s["kha.input.Gamepad"]=Kt,Kt.__name__=!0,Kt.get=function(e){return null==e&&(e=0),e>=Kt.instances.length?null:Kt.instances[e]},Kt.notifyOnConnect=function(e,t){null!=e&&Kt.connectListeners.push(e),null!=t&&Kt.disconnectListeners.push(t)},Kt.removeConnect=function(e,t){null!=e&&_.remove(Kt.connectListeners,e),null!=t&&_.remove(Kt.disconnectListeners,t)},Kt.sendConnectEvent=function(e){Kt.instances[e].connected=!0;for(var t=0,n=Kt.connectListeners;t<n.length;){var i=n[t];++t,i(e)}},Kt.sendDisconnectEvent=function(e){Kt.instances[e].connected=!1;for(var t=0,n=Kt.disconnectListeners;t<n.length;){var i=n[t];++t,i(e)}},Kt.prototype={index:null,notify:function(e,t){null!=e&&this.axisListeners.push(e),null!=t&&this.buttonListeners.push(t)},remove:function(e,t){null!=e&&_.remove(this.axisListeners,e),null!=t&&_.remove(this.buttonListeners,t)},axisListeners:null,buttonListeners:null,id:null,connected:null,get_id:function(){return he.getGamepadId(this.index)},sendAxisEvent:function(e,t){for(var n=0,i=this.axisListeners;n<i.length;){var d=i[n];++n,d(e,t)}},sendButtonEvent:function(e,t){for(var n=0,i=this.buttonListeners;n<i.length;){var d=i[n];++n,d(e,t)}},__class__:Kt};var qt=A["kha.input.BlockInterventions"]={__ename__:!0,__constructs__:["Default","Full","None","Custom"],Default:{_hx_index:0,__enum__:"kha.input.BlockInterventions",toString:o},Full:{_hx_index:1,__enum__:"kha.input.BlockInterventions",toString:o},None:{_hx_index:2,__enum__:"kha.input.BlockInterventions",toString:o},Custom:(l=function(e){return{_hx_index:3,func:e,__enum__:"kha.input.BlockInterventions",toString:o}},l.__params__=["func"],l)},Zt=function(){this.__id=mn.nextId++,this._inputBuffer=new L(new ArrayBuffer(1))};s["kha.netsync.Controller"]=Zt,Zt.__name__=!0,Zt.prototype={__id:null,_inputBufferIndex:null,_inputBuffer:null,_id:function(){return this.__id},_receive:function(){},__class__:Zt};var Jt=e.kha.input.Keyboard=function(){Zt.call(this),this.downListeners=[],this.upListeners=[],this.pressListeners=[],Jt.instance=this};s["kha.input.Keyboard"]=Jt,Jt.__name__=!0,Jt.get=function(e){return null==e&&(e=0),he.getKeyboard(e)},Jt.disableSystemInterventions=function(e){Jt.keyBehavior=e},Jt.__super__=Zt,Jt.prototype=n(Zt.prototype,{notify:function(e,t,n){null!=e&&this.downListeners.push(e),null!=t&&this.upListeners.push(t),null!=n&&this.pressListeners.push(n)},remove:function(e,t,n){null!=e&&_.remove(this.downListeners,e),null!=t&&_.remove(this.upListeners,t),null!=n&&_.remove(this.pressListeners,n)},show:function(){},hide:function(){},downListeners:null,upListeners:null,pressListeners:null,sendDownEvent:function(e){for(var t=0,n=this.downListeners;t<n.length;){var i=n[t];++t,i(e)}},sendUpEvent:function(e){for(var t=0,n=this.upListeners;t<n.length;){var i=n[t];++t,i(e)}},sendPressEvent:function(e){for(var t=0,n=this.pressListeners;t<n.length;){var i=n[t];++t,i(e)}},_receive:function(){},__class__:Jt});var $t=e.kha.input.Mouse=function(){Zt.call(this),$t.instance=this};s["kha.input.Mouse"]=$t,$t.__name__=!0,$t.get=function(e){return null==e&&(e=0),he.getMouse(e)},$t.__super__=Zt,$t.prototype=n(Zt.prototype,{notify:function(e,t,n,i,d){this.notifyWindowed(0,e,t,n,i,d)},remove:function(e,t,n,i,d){this.removeWindowed(0,e,t,n,i,d)},notifyWindowed:function(e,t,n,i,d,a){if(null!=t){for(null==this.windowDownListeners&&(this.windowDownListeners=[]);this.windowDownListeners.length<=e;)this.windowDownListeners.push([]);this.windowDownListeners[e].push(t)}if(null!=n){for(null==this.windowUpListeners&&(this.windowUpListeners=[]);this.windowUpListeners.length<=e;)this.windowUpListeners.push([]);this.windowUpListeners[e].push(n)}if(null!=i){for(null==this.windowMoveListeners&&(this.windowMoveListeners=[]);this.windowMoveListeners.length<=e;)this.windowMoveListeners.push([]);this.windowMoveListeners[e].push(i)}if(null!=d){for(null==this.windowWheelListeners&&(this.windowWheelListeners=[]);this.windowWheelListeners.length<=e;)this.windowWheelListeners.push([]);this.windowWheelListeners[e].push(d)}if(null!=a){for(null==this.windowLeaveListeners&&(this.windowLeaveListeners=[]);this.windowLeaveListeners.length<=e;)this.windowLeaveListeners.push([]);this.windowLeaveListeners[e].push(a)}},removeWindowed:function(e,t,n,i,d,a){null!=t&&(null==this.windowDownListeners?w.trace("no downListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:114,className:"kha.input.Mouse",methodName:"removeWindowed"}):e<this.windowDownListeners.length?_.remove(this.windowDownListeners[e],t):w.trace("no downListeners for window \""+e+"\" are registered",{fileName:"kha/input/Mouse.hx",lineNumber:110,className:"kha.input.Mouse",methodName:"removeWindowed"})),null!=n&&(null==this.windowUpListeners?w.trace("no upListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:128,className:"kha.input.Mouse",methodName:"removeWindowed"}):e<this.windowUpListeners.length?_.remove(this.windowUpListeners[e],n):w.trace("no upListeners for window \""+e+"\" are registered",{fileName:"kha/input/Mouse.hx",lineNumber:124,className:"kha.input.Mouse",methodName:"removeWindowed"})),null!=i&&(null==this.windowMoveListeners?w.trace("no moveListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:142,className:"kha.input.Mouse",methodName:"removeWindowed"}):e<this.windowMoveListeners.length?_.remove(this.windowMoveListeners[e],i):w.trace("no moveListeners for window \""+e+"\" are registered",{fileName:"kha/input/Mouse.hx",lineNumber:138,className:"kha.input.Mouse",methodName:"removeWindowed"})),null!=d&&(null==this.windowWheelListeners?w.trace("no wheelListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:156,className:"kha.input.Mouse",methodName:"removeWindowed"}):e<this.windowWheelListeners.length?_.remove(this.windowWheelListeners[e],d):w.trace("no wheelListeners for window \""+e+"\" are registered",{fileName:"kha/input/Mouse.hx",lineNumber:152,className:"kha.input.Mouse",methodName:"removeWindowed"})),null!=a&&(null==this.windowLeaveListeners?w.trace("no leaveListeners were ever registered",{fileName:"kha/input/Mouse.hx",lineNumber:170,className:"kha.input.Mouse",methodName:"removeWindowed"}):e<this.windowLeaveListeners.length?_.remove(this.windowLeaveListeners[e],a):w.trace("no leaveListeners for window \""+e+"\" are registered",{fileName:"kha/input/Mouse.hx",lineNumber:166,className:"kha.input.Mouse",methodName:"removeWindowed"}))},lock:function(){},unlock:function(){},canLock:function(){return!1},isLocked:function(){return!1},notifyOnLockChange:function(){},removeFromLockChange:function(){},hideSystemCursor:function(){},showSystemCursor:function(){},windowDownListeners:null,windowUpListeners:null,windowMoveListeners:null,windowWheelListeners:null,windowLeaveListeners:null,sendLeaveEvent:function(e){if(null!=this.windowLeaveListeners)for(var t=0,n=this.windowLeaveListeners[e],i;t<n.length;)i=n[t],++t,i()},sendDownEvent:function(e,t,n,i){if(null!=this.windowDownListeners)for(var d=0,a=this.windowDownListeners[e],r;d<a.length;)r=a[d],++d,r(t,n,i)},sendUpEvent:function(e,t,n,i){if(null!=this.windowUpListeners)for(var d=0,a=this.windowUpListeners[e],r;d<a.length;)r=a[d],++d,r(t,n,i)},sendMoveEvent:function(e,t,n,i,d){if(null!=this.windowMoveListeners)for(var a=0,r=this.windowMoveListeners[e],s;a<r.length;)s=r[a],++a,s(t,n,i,d)},sendWheelEvent:function(e,t){if(null!=this.windowWheelListeners)for(var n=0,i=this.windowWheelListeners[e],d;n<i.length;)d=i[n],++n,d(t)},_receive:function(){},__class__:$t});var en=function(){$t.call(this)};s["kha.input.MouseImpl"]=en,en.__name__=!0,en.__super__=$t,en.prototype=n($t.prototype,{lock:function(){he.lockMouse()},unlock:function(){he.unlockMouse()},canLock:function(){return he.canLockMouse()},isLocked:function(){return he.isMouseLocked()},notifyOnLockChange:function(e,t){he.notifyOfMouseLockChange(e,t)},removeFromLockChange:function(e,t){he.removeFromMouseLockChange(e,t)},hideSystemCursor:function(){he.hideSystemCursor()},showSystemCursor:function(){he.showSystemCursor()},_receive:function(){},__class__:en});var tn=function(){tn.instance=this};s["kha.input.Pen"]=tn,tn.__name__=!0,tn.get=function(e){return null==e&&(e=0),he.getPen(e)},tn.prototype={notify:function(e,t,n){this.notifyWindowed(0,e,t,n)},remove:function(e,t,n){this.removeWindowed(0,e,t,n)},notifyWindowed:function(e,t,n,i){if(null!=t){for(null==this.windowDownListeners&&(this.windowDownListeners=[]);this.windowDownListeners.length<=e;)this.windowDownListeners.push([]);this.windowDownListeners[e].push(t)}if(null!=n){for(null==this.windowUpListeners&&(this.windowUpListeners=[]);this.windowUpListeners.length<=e;)this.windowUpListeners.push([]);this.windowUpListeners[e].push(n)}if(null!=i){for(null==this.windowMoveListeners&&(this.windowMoveListeners=[]);this.windowMoveListeners.length<=e;)this.windowMoveListeners.push([]);this.windowMoveListeners[e].push(i)}},removeWindowed:function(e,t,n,i){null!=t&&null!=this.windowDownListeners&&e<this.windowDownListeners.length&&_.remove(this.windowDownListeners[e],t),null!=n&&null!=this.windowUpListeners&&e<this.windowUpListeners.length&&_.remove(this.windowUpListeners[e],n),null!=i&&null!=this.windowMoveListeners&&e<this.windowMoveListeners.length&&_.remove(this.windowMoveListeners[e],i)},windowDownListeners:null,windowUpListeners:null,windowMoveListeners:null,sendDownEvent:function(e,t,n,i){if(null!=this.windowDownListeners)for(var d=0,a=this.windowDownListeners[e],r;d<a.length;)r=a[d],++d,r(t,n,i)},sendUpEvent:function(e,t,n,i){if(null!=this.windowUpListeners)for(var d=0,a=this.windowUpListeners[e],r;d<a.length;)r=a[d],++d,r(t,n,i)},sendMoveEvent:function(e,t,n,i){if(null!=this.windowMoveListeners)for(var d=0,a=this.windowMoveListeners[e],r;d<a.length;)r=a[d],++d,r(t,n,i)},__class__:tn};var nn=e.kha.input.Surface=function(){this.touchStartListeners=[],this.touchEndListeners=[],this.moveListeners=[],nn.instance=this};s["kha.input.Surface"]=nn,nn.__name__=!0,nn.get=function(e){return null==e&&(e=0),0==e?nn.instance:null},nn.prototype={notify:function(e,t,n){null!=e&&this.touchStartListeners.push(e),null!=t&&this.touchEndListeners.push(t),null!=n&&this.moveListeners.push(n)},remove:function(e,t,n){null!=e&&_.remove(this.touchStartListeners,e),null!=t&&_.remove(this.touchEndListeners,t),null!=n&&_.remove(this.moveListeners,n)},touchStartListeners:null,touchEndListeners:null,moveListeners:null,sendTouchStartEvent:function(e,t,n){for(var i=0,d=this.touchStartListeners;i<d.length;){var a=d[i];++i,a(e,t,n)}},sendTouchEndEvent:function(e,t,n){for(var i=0,d=this.touchEndListeners;i<d.length;){var a=d[i];++i,a(e,t,n)}},sendMoveEvent:function(e,t,n){for(var i=0,d=this.moveListeners;i<d.length;){var a=d[i];++i,a(e,t,n)}},__class__:nn};var dn=function(e){this.bytes=e};s["kha.internal.BytesBlob"]=dn,dn.__name__=!0,dn.__interfaces__=[de],dn.fromBytes=function(e){return new dn(e)},dn.alloc=function(e){return new dn(new L(new ArrayBuffer(e)))},dn.readF32=function(e){var t=0==(-2147483648&e)?1:-1,n=255&e>>23,i=8388607&e;switch(n){case 0:return 0;case 255:return 0==i?0<t?1/0:-Infinity:NaN;break;default:return t*((i+8388608)/8388608)*Math.pow(2,n-127);}},dn.bit=function(e,t){if(1==(1&e>>>t)){var n=3;return++n,!0}var i=4;return--i,!1},dn.toText=function(e,t){for(var n="",d=0;d<t;){var a=d++;n+=String.fromCodePoint(e[a])}return n},dn.prototype={bytes:null,sub:function(e,t){return new dn(this.bytes.sub(e,t))},length:null,get_length:function(){return this.bytes.length},writeU8:function(e,t){this.bytes.b[e]=t},readU8:function(e){var t=this.bytes.b[e];return++e,t},readS8:function(e){var t=this.bytes.b[e];++e;var n=0==(128&t)?1:-1;return t&=127,n*t},readU16BE:function(e){var t=this.bytes.b[e],n=this.bytes.b[e+1];return e+=2,256*t+n},readU16LE:function(e){var t=this.bytes.b[e],n=this.bytes.b[e+1];return e+=2,256*n+t},readU32LE:function(e){var t=this.bytes.b[e],n=this.bytes.b[e+1],i=this.bytes.b[e+2],d=this.bytes.b[e+3];return e+=4,t+256*n+256*(256*i)+256*(256*(256*d))},readU32BE:function(e){var t=this.bytes.b[e],n=this.bytes.b[e+1],i=this.bytes.b[e+2],d=this.bytes.b[e+3];return e+=4,d+256*i+256*(256*n)+256*(256*(256*t))},readS16BE:function(e){var t=this.bytes.b[e],n=this.bytes.b[e+1];e+=2;var i=0==(128&t)?1:-1;return t&=127,-1==i?-32767+256*t+n:256*t+n},readS16LE:function(e){var t=this.bytes.b[e],n=this.bytes.b[e+1],i=0==(128&n)?1:-1;return n&=127,e+=2,-1==i?-32767+256*n+t:256*n+t},readS32LE:function(e){var t=this.bytes.b[e],n=this.bytes.b[e+1],i=this.bytes.b[e+2],d=this.bytes.b[e+3],a=0==(128&d)?1:-1;return d&=127,e+=4,-1==a?-2147483647+t+256*n+256*(256*i)+256*(256*(256*d)):t+256*n+256*(256*i)+256*(256*(256*d))},readS32BE:function(e){var t=this.bytes.b[e],n=this.bytes.b[e+1],i=this.bytes.b[e+2],d=this.bytes.b[e+3],a=0==(128&t)?1:-1;return t&=127,e+=4,-1==a?-2147483647+d+256*i+256*(256*n)+256*(256*(256*t)):d+256*i+256*(256*n)+256*(256*(256*t))},readF32LE:function(e){return dn.readF32(this.readS32LE(e))},readF32BE:function(e){return dn.readF32(this.readS32BE(e))},toString:function(){return this.bytes.toString()},readUtf8String:function(){return this.bytes.toString()},toBytes:function(){return this.bytes},unload:function(){this.bytes=null},__class__:dn};var an=function(e){this.renderTarget=e};s["kha.krom.Graphics"]=an,an.__name__=!0,an.__interfaces__=[Ot],an.prototype={renderTarget:null,begin:function(e){Krom.begin(this.renderTarget,e)},beginFace:function(e){Krom.beginFace(this.renderTarget,e)},beginEye:function(){},end:function(){Krom.end()},flush:function(){},vsynced:function(){return!0},refreshRate:function(){return 60},clear:function(e,t,n){var i=0;null!=e&&(i|=1),null!=t&&(i|=2),null!=n&&(i|=4),Krom.clear(i,null==e?0:e,t,n)},viewport:function(e,t,n,i){Krom.viewport(e,t,n,i)},setVertexBuffer:function(e){e.set(0)},setVertexBuffers:function(e){Krom.setVertexBuffers(e)},setIndexBuffer:function(e){e.set()},setCubeMap:function(e,t){null==t||(null==t.texture_?Krom.setRenderTarget(e,t.renderTarget_):Krom.setTexture(e,t.texture_))},setCubeMapDepth:function(e,t){null==t||Krom.setTextureDepth(e,t.renderTarget_)},setTexture:function(e,t){null==t||(null==t.texture_?Krom.setRenderTarget(e,t.renderTarget_):Krom.setTexture(e,t.texture_))},setTextureDepth:function(e,t){null==t||Krom.setTextureDepth(e,t.renderTarget_)},setTextureArray:function(){},setVideoTexture:function(){},setImageTexture:function(e,t){null==t||Krom.setImageTexture(e,t.texture_)},setTextureParameters:function(e,t,n,i,d,a){Krom.setTextureParameters(e,t,n,i,d,a)},setTexture3DParameters:function(e,t,n,i,d,a,r){Krom.setTexture3DParameters(e,t,n,i,d,a,r)},setTextureCompareMode:function(e,t){Krom.setTextureCompareMode(e,t)},setCubeMapCompareMode:function(e,t){Krom.setCubeMapCompareMode(e,t)},setPipeline:function(e){e.set()},setStencilReferenceValue:function(){},setBool:function(e,t){Krom.setBool(e,t)},setInt:function(e,t){Krom.setInt(e,t)},setInt2:function(){},setInt3:function(){},setInt4:function(){},setInts:function(){},setFloat:function(e,t){Krom.setFloat(e,t)},setFloat2:function(e,t,n){Krom.setFloat2(e,t,n)},setFloat3:function(e,t,n,i){Krom.setFloat3(e,t,n,i)},setFloat4:function(e,t,n,i,d){Krom.setFloat4(e,t,n,i,d)},setFloats:function(e,t){Krom.setFloats(e,t.buffer)},setVector2:function(e,t){Krom.setFloat2(e,t.x,t.y)},setVector3:function(e,t){Krom.setFloat3(e,t.x,t.y,t.z)},setVector4:function(e,t){Krom.setFloat4(e,t.x,t.y,t.z,t.w)},setMatrix:function(e,t){an.mat[0]=t._00,an.mat[1]=t._01,an.mat[2]=t._02,an.mat[3]=t._03,an.mat[4]=t._10,an.mat[5]=t._11,an.mat[6]=t._12,an.mat[7]=t._13,an.mat[8]=t._20,an.mat[9]=t._21,an.mat[10]=t._22,an.mat[11]=t._23,an.mat[12]=t._30,an.mat[13]=t._31,an.mat[14]=t._32,an.mat[15]=t._33,Krom.setMatrix(e,an.mat.buffer)},setMatrix3:function(e,t){an.mat[0]=t._00,an.mat[1]=t._01,an.mat[2]=t._02,an.mat[3]=t._10,an.mat[4]=t._11,an.mat[5]=t._12,an.mat[6]=t._20,an.mat[7]=t._21,an.mat[8]=t._22,Krom.setMatrix3(e,an.mat.buffer)},drawIndexedVertices:function(e,t){null==t&&(t=-1),null==e&&(e=0),Krom.drawIndexedVertices(e,t)},drawIndexedVerticesInstanced:function(e,t,n){null==n&&(n=-1),null==t&&(t=0),Krom.drawIndexedVerticesInstanced(e,t,n)},instancedRenderingAvailable:function(){return!0},scissor:function(e,t,n,i){Krom.scissor(e,t,n,i)},disableScissor:function(){Krom.disableScissor()},__class__:an};var rn=function(e){ce.call(this),this.sampleRate=44100;var t=0|e.length/4,n=new Float32Array(t);this.uncompressedData=n;for(var d=0;d<t;){var a=d++;this.uncompressedData[a]=e.getFloat(4*a)}this.compressedData=null};s["kha.krom.Sound"]=rn,rn.__name__=!0,rn.__super__=ce,rn.prototype=n(ce.prototype,{uncompress:function(e){e()},unload:function(){ce.prototype.unload.call(this)},__class__:rn});var sn=function(e,t,n,i,d,a,r,s,o){this._00=e,this._10=t,this._20=n,this._01=i,this._11=d,this._21=a,this._02=r,this._12=s,this._22=o};s["kha.math.FastMatrix3"]=sn,sn.__name__=!0,sn.fromMatrix3=function(e){return new sn(e._00,e._10,e._20,e._01,e._11,e._21,e._02,e._12,e._22)},sn.prototype={_00:null,_10:null,_20:null,_01:null,_11:null,_21:null,_02:null,_12:null,_22:null,__class__:sn};var on=function(e,t,n,i,d,a,r,s,o,A,u,l,_,f,c,g){this._00=e,this._10=t,this._20=n,this._30=i,this._01=d,this._11=a,this._21=r,this._31=s,this._02=o,this._12=A,this._22=u,this._32=l,this._03=_,this._13=f,this._23=c,this._33=g};s["kha.math.FastMatrix4"]=on,on.__name__=!0,on.fromMatrix4=function(e){return new on(e._00,e._10,e._20,e._30,e._01,e._11,e._21,e._31,e._02,e._12,e._22,e._32,e._03,e._13,e._23,e._33)},on.orthogonalProjection=function(e,t,n,i,d,a){return new on(2/(t-e),0,0,-(t+e)/(t-e),0,2/(i-n),0,-(i+n)/(i-n),0,0,-2/(a-d),-(a+d)/(a-d),0,0,0,1)},on.perspectiveProjection=function(e,t,n,i){var d=1/Math.tan(e/2);return new on(d/t,0,0,0,0,d,0,0,0,0,(i+n)/(n-i),2*i*n/(n-i),0,0,-1,0)},on.lookAt=function(e,t,n){var i=t.x-e.x,d=t.y-e.y,a=t.z-e.z;null==a&&(a=0),null==d&&(d=0),null==i&&(i=0);var r=i,s=d,o=a,A=r,u=s,l=o;null==l&&(l=0),null==u&&(u=0),null==A&&(A=0);var _=A,f=u,c=l,g=Math.sqrt(_*_+f*f+c*c);if(0!=g){var p=1/g;_*=p,f*=p,c*=p}var h=f*n.z-c*n.y,m=c*n.x-_*n.z,b=_*n.y-f*n.x,S=h,w=m,E=b;null==E&&(E=0),null==w&&(w=0),null==S&&(S=0);var T=S,C=w,I=E,B=T,k=C,v=I;null==v&&(v=0),null==k&&(k=0),null==B&&(B=0);var L=B,O=k,N=v,P=Math.sqrt(L*L+O*O+N*N);if(0!=P){var R=1/P;L*=R,O*=R,N*=R}var V=O*c-N*f,D=N*_-L*c,F=L*f-O*_,M=V,U=D,H=F;null==H&&(H=0),null==U&&(U=0),null==M&&(M=0);var W=M,G=U,Y=H;return new on(L,O,N,-(L*e.x+O*e.y+N*e.z),W,G,Y,-(W*e.x+G*e.y+Y*e.z),-_,-f,-c,_*e.x+f*e.y+c*e.z,0,0,0,1)},on.prototype={_00:null,_10:null,_20:null,_30:null,_01:null,_11:null,_21:null,_31:null,_02:null,_12:null,_22:null,_32:null,_03:null,_13:null,_23:null,_33:null,__class__:on};var An=function(e,t){null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t};s["kha.math.FastVector2"]=An,An.__name__=!0,An.fromVector2=function(e){return new An(e.x,e.y)},An.prototype={x:null,y:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},set_length:function(e){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(0==t)return 0;var n=e/t;return this.x*=n,this.y*=n,e},toString:function(){return"FastVector2("+this.x+", "+this.y+")"},__class__:An};var un=function(e,t,n){null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t,this.z=n};s["kha.math.FastVector3"]=un,un.__name__=!0,un.fromVector3=function(e){return new un(e.x,e.y,e.z)},un.prototype={x:null,y:null,z:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},set_length:function(e){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);if(0==t)return 0;var n=e/t;return this.x*=n,this.y*=n,this.z*=n,e},toString:function(){return"FastVector3("+this.x+", "+this.y+", "+this.z+")"},__class__:un};var ln=function(e,t,n,i){null==i&&(i=1),null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t,this.z=n,this.w=i};s["kha.math.FastVector4"]=ln,ln.__name__=!0,ln.fromVector4=function(e){return new ln(e.x,e.y,e.z,e.w)},ln.prototype={x:null,y:null,z:null,w:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},set_length:function(e){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);if(0==t)return 0;var n=e/t;return this.x*=n,this.y*=n,this.z*=n,this.w*=n,e},toString:function(){return"FastVector4("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},__class__:ln};var _n=function(e,t,n,i,d,a,r,s,o){this._00=e,this._10=t,this._20=n,this._01=i,this._11=d,this._21=a,this._02=r,this._12=s,this._22=o};s["kha.math.Matrix3"]=_n,_n.__name__=!0,_n.fromFastMatrix3=function(e){return new _n(e._00,e._10,e._20,e._01,e._11,e._21,e._02,e._12,e._22)},_n.prototype={_00:null,_10:null,_20:null,_01:null,_11:null,_21:null,_02:null,_12:null,_22:null,__class__:_n};var fn=function(e,t,n,i,d,a,r,s,o,A,u,l,_,f,c,g){this._00=e,this._10=t,this._20=n,this._30=i,this._01=d,this._11=a,this._21=r,this._31=s,this._02=o,this._12=A,this._22=u,this._32=l,this._03=_,this._13=f,this._23=c,this._33=g};s["kha.math.Matrix4"]=fn,fn.__name__=!0,fn.fromFastMatrix4=function(e){return new fn(e._00,e._10,e._20,e._30,e._01,e._11,e._21,e._31,e._02,e._12,e._22,e._32,e._03,e._13,e._23,e._33)},fn.orthogonalProjection=function(e,t,n,i,d,a){return new fn(2/(t-e),0,0,-(t+e)/(t-e),0,2/(i-n),0,-(i+n)/(i-n),0,0,-2/(a-d),-(a+d)/(a-d),0,0,0,1)},fn.perspectiveProjection=function(e,t,n,i){var d=1/Math.tan(e/2);return new fn(d/t,0,0,0,0,d,0,0,0,0,(i+n)/(n-i),2*i*n/(n-i),0,0,-1,0)},fn.lookAt=function(e,t,n){var i=t.x-e.x,d=t.y-e.y,a=t.z-e.z;null==a&&(a=0),null==d&&(d=0),null==i&&(i=0);var r=i,s=d,o=a,A=r,u=s,l=o;null==l&&(l=0),null==u&&(u=0),null==A&&(A=0);var _=A,f=u,c=l,g=Math.sqrt(_*_+f*f+c*c);if(0!=g){var p=1/g;_*=p,f*=p,c*=p}var h=f*n.z-c*n.y,m=c*n.x-_*n.z,b=_*n.y-f*n.x,S=h,w=m,E=b;null==E&&(E=0),null==w&&(w=0),null==S&&(S=0);var T=S,C=w,I=E,B=T,k=C,v=I;null==v&&(v=0),null==k&&(k=0),null==B&&(B=0);var L=B,O=k,N=v,P=Math.sqrt(L*L+O*O+N*N);if(0!=P){var R=1/P;L*=R,O*=R,N*=R}var V=O*c-N*f,D=N*_-L*c,F=L*f-O*_,M=V,U=D,H=F;null==H&&(H=0),null==U&&(U=0),null==M&&(M=0);var W=M,G=U,Y=H;return new fn(L,O,N,-(L*e.x+O*e.y+N*e.z),W,G,Y,-(W*e.x+G*e.y+Y*e.z),-_,-f,-c,_*e.x+f*e.y+c*e.z,0,0,0,1)},fn.prototype={_00:null,_10:null,_20:null,_30:null,_01:null,_11:null,_21:null,_31:null,_02:null,_12:null,_22:null,_32:null,_03:null,_13:null,_23:null,_33:null,__class__:fn};var cn=function(e,t){null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t};s["kha.math.Vector2"]=cn,cn.__name__=!0,cn.prototype={x:null,y:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},set_length:function(e){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(0==t)return 0;var n=e/t;return this.x*=n,this.y*=n,e},__class__:cn};var gn=function(e,t,n){null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t,this.z=n};s["kha.math.Vector3"]=gn,gn.__name__=!0,gn.prototype={x:null,y:null,z:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},set_length:function(e){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);if(0==t)return 0;var n=e/t;return this.x*=n,this.y*=n,this.z*=n,e},__class__:gn};var pn=function(e,t,n,i){null==i&&(i=1),null==n&&(n=0),null==t&&(t=0),null==e&&(e=0),this.x=e,this.y=t,this.z=n,this.w=i};s["kha.math.Vector4"]=pn,pn.__name__=!0,pn.prototype={x:null,y:null,z:null,w:null,get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},set_length:function(e){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);if(0==t)return 0;var n=e/t;return this.x*=n,this.y*=n,this.z*=n,this.w*=n,e},__class__:pn};var hn=function(){};s["kha.netsync.Client"]=hn,hn.__name__=!0,hn.__isInterface__=!0,hn.prototype={get_id:null,id:null,send:null,receive:null,onClose:null,__class__:hn};var mn=function(){};s["kha.netsync.ControllerBuilder"]=mn,mn.__name__=!0;var bn=function(){};s["kha.netsync.Entity"]=bn,bn.__name__=!0,bn.__isInterface__=!0,bn.prototype={_id:null,_size:null,_send:null,_receive:null,__class__:bn};var xn=function(e){this.myId=e};s["kha.netsync.LocalClient"]=xn,xn.__name__=!0,xn.__interfaces__=[hn],xn.prototype={myId:null,send:function(){},receive:function(){},onClose:function(){},controllers:null,get_controllers:function(){return null},id:null,get_id:function(){return this.myId},__class__:xn};var Sn=function(e,t){this.time=e,this.data=t};s["kha.netsync.State"]=Sn,Sn.__name__=!0,Sn.prototype={time:null,data:null,__class__:Sn};var yn=function(e,t,n){this.ping=1,this.currentPlayers=0,this.controllers=new C,this.entities=new C,yn.instance=this,this.maxPlayers=e,this.address=t,this.port=n};s["kha.netsync.Session"]=yn,yn.__name__=!0,yn.the=function(){return yn.instance},yn.prototype={entities:null,controllers:null,maxPlayers:null,currentPlayers:null,ping:null,address:null,port:null,startCallback:null,refusedCallback:null,resetCallback:null,localClient:null,network:null,updateTaskId:null,pingTaskId:null,me:null,get_me:function(){return this.localClient},addEntity:function(e){var t=this.entities,n=e._id();t.h[n]=e},addController:function(e){w.trace("Adding controller id "+e._id(),{fileName:"kha/netsync/Session.hx",lineNumber:88,className:"kha.netsync.Session",methodName:"addController"}),e._inputBufferIndex=0;var t=this.controllers,n=e._id();t.h[n]=e},sendControllerUpdate:function(e,t){if(this.controllers.h.hasOwnProperty(e)){if(this.controllers.h[e]._inputBuffer.length<this.controllers.h[e]._inputBufferIndex+4+t.length){var n=new L(new ArrayBuffer(this.controllers.h[e]._inputBufferIndex+4+t.length));n.blit(0,this.controllers.h[e]._inputBuffer,0,this.controllers.h[e]._inputBufferIndex),this.controllers.h[e]._inputBuffer=n}this.controllers.h[e]._inputBuffer.setInt32(this.controllers.h[e]._inputBufferIndex,t.length),this.controllers.h[e]._inputBuffer.blit(this.controllers.h[e]._inputBufferIndex+4,t,0,t.length),this.controllers.h[e]._inputBufferIndex+=4+t.length}},sendPing:function(){var e=new L(new ArrayBuffer(5));e.b[0]=4,e.setFloat(1,_e.realTime()),this.sendToServer(e)},sendPlayerUpdate:function(){},receive:function(e){switch(e.b[0]){case 0:var t=e.b[1];this.localClient=new xn(t),_e.resetTime(),this.startCallback();break;case 1:for(var n=e.getDouble(1),i=9,d=this.entities.iterator();d.hasNext();){var a=d.next();a._receive(i,e),i+=a._size()}_e.warp(n);break;case 3:switch(e.b[1]){case 0:break;case 1:this.executeRPC(e);}break;case 4:var r=e.getFloat(1);this.ping=_e.realTime()-r;break;case 5:this.refusedCallback();break;case 6:this.currentPlayers=e.getInt32(1);}},executeRPC:function(e){var t=[],n=e.getInt32(2),d=6,a=e.getUInt16(d);d+=2;for(var r="",o=0;o<a;){var A=o++,i=e.b[d];r+=String.fromCodePoint(i),++d}var u=e.getUInt16(d);d+=2;for(var l="",_=0;_<u;){var f=_++,c=e.b[d];l+=String.fromCodePoint(c),++d}for(;d<e.length;){var g=e.b[d];switch(++d,g){case 66:var h=1==e.b[d];++d,w.trace("Bool: "+(null==h?"null":""+h),{fileName:"kha/netsync/Session.hx",lineNumber:295,className:"kha.netsync.Session",methodName:"executeRPC"}),t.push(h);break;case 70:var m=e.getDouble(d);d+=8,w.trace("Float: "+m,{fileName:"kha/netsync/Session.hx",lineNumber:300,className:"kha.netsync.Session",methodName:"executeRPC"}),t.push(m);break;case 73:var b=e.getInt32(d);d+=4,w.trace("Int: "+b,{fileName:"kha/netsync/Session.hx",lineNumber:305,className:"kha.netsync.Session",methodName:"executeRPC"}),t.push(b);break;case 83:var x=e.getUInt16(d);d+=2;for(var S="",y=0;y<x;){var E=y++,T=e.b[d];S+=String.fromCodePoint(T),++d}w.trace("String: "+S,{fileName:"kha/netsync/Session.hx",lineNumber:315,className:"kha.netsync.Session",methodName:"executeRPC"}),t.push(S);break;default:w.trace("Unknown argument type.",{fileName:"kha/netsync/Session.hx",lineNumber:318,className:"kha.netsync.Session",methodName:"executeRPC"});}}-1==n?p.field(s[r],l+"_remotely").apply(null,t):p.field(wn.objects[n],l+"_remotely").apply(wn.objects[n],t)},waitForStart:function(e,t,n,i,d){var a=this;this.startCallback=e,this.refusedCallback=t,this.resetCallback=d,this.network=new kha.netsync.Network(this.address,this.port,n,function(){i(),a.reset()}),this.network.listen(function(e){a.receive(e)}),this.updateTaskId=_e.addFrameTask(r(this,this.update),0),this.ping=1,this.pingTaskId=_e.addTimeTask(r(this,this.sendPing),0,1)},reset:function(){_e.removeFrameTask(this.updateTaskId),_e.removeTimeTask(this.pingTaskId),this.currentPlayers=0,this.ping=1,this.controllers=new C,this.entities=new C,this.resetCallback()},update:function(){for(var e=this.controllers.iterator();e.hasNext();){var t=e.next();if(0<t._inputBufferIndex){var n=new L(new ArrayBuffer(22+t._inputBufferIndex));n.b[0]=2,n.setInt32(1,t._id()),n.setDouble(5,_e.time()),n.setInt32(13,pe.windowWidth(0)),n.setInt32(17,pe.windowHeight(0)),n.b[21]=0,n.blit(22,t._inputBuffer,0,t._inputBufferIndex),this.sendToServer(n),t._inputBufferIndex=0}}},sendToServer:function(e){this.network.send(e,!1)},__class__:yn};var wn=function(){};s["kha.netsync.SyncBuilder"]=wn,wn.__name__=!0;var En=function(e,t,n,i){this._0=e,this._1=t,this._2=n,this._3=i};s["kha.simd.Float32x4"]=En,En.__name__=!0,En.create=function(){return new En(0,0,0,0)},En.loadAllFast=function(e){return new En(e,e,e,e)},En.load=function(e,t,n,i){return new En(e,t,n,i)},En.loadFast=function(e,t,n,i){return new En(e,t,n,i)},En.get=function(e,t){var n=0;return 0===t?n=e._0:1===t?n=e._1:2===t?n=e._2:3===t?n=e._3:void 0,n},En.getFast=function(e,t){return 0===t?e._0:1===t?e._1:2===t?e._2:3===t?e._3:0},En.abs=function(e){return new En(Math.abs(e._0),Math.abs(e._1),Math.abs(e._2),Math.abs(e._3))},En.add=function(e,t){return new En(e._0+t._0,e._1+t._1,e._2+t._2,e._3+t._3)},En.div=function(e,t){return new En(e._0/t._0,e._1/t._1,e._2/t._2,e._3/t._3)},En.mul=function(e,t){return new En(e._0*t._0,e._1*t._1,e._2*t._2,e._3*t._3)},En.neg=function(e){return new En(-e._0,-e._1,-e._2,-e._3)},En.reciprocalApproximation=function(){return new En(0,0,0,0)},En.reciprocalSqrtApproximation=function(){return new En(0,0,0,0)},En.sub=function(e,t){return new En(e._0-t._0,e._1-t._1,e._2-t._2,e._3-t._3)},En.sqrt=function(e){return new En(Math.sqrt(e._0),Math.sqrt(e._1),Math.sqrt(e._2),Math.sqrt(e._3))},En.prototype={_0:null,_1:null,_2:null,_3:null,__class__:En};var Tn=function(e){this.changed=!1,this.dragY=0,this.dragX=0,this.dragEnabled=!1,this.dragging=!1,this.lastMaxY=0,this.lastMaxX=0,this.layout=0,this.scrollEnabled=!1,this.scrollOffset=0,this.scrolling=!1,this.redraws=2,this.texture=null,this.text="",this.value=0,this.color=-1,this.position=0,this.selected=!1,null!=e&&(null!=e.selected&&(this.selected=e.selected),null!=e.position&&(this.position=e.position),null!=e.value&&(this.value=e.value),null!=e.text&&(this.text=e.text),null!=e.color&&(this.color=e.color),null!=e.layout&&(this.layout=e.layout))};s["zui.Handle"]=Tn,Tn.__name__=!0,Tn.prototype={selected:null,position:null,color:null,value:null,text:null,texture:null,redraws:null,scrolling:null,scrollOffset:null,scrollEnabled:null,layout:null,lastMaxX:null,lastMaxY:null,dragging:null,dragEnabled:null,dragX:null,dragY:null,changed:null,children:null,nest:function(e,t){null==this.children&&(this.children=new C);var n=this.children.h[e];if(null==n){var i=this.children;n=new Tn(t),i.h[e]=n}return n},__class__:Tn};var Cn=function(){};s["zui.Canvas"]=Cn,Cn.__name__=!0,Cn.draw=function(e,t,n){Cn.screenW=pe.windowWidth(),Cn.screenH=pe.windowHeight(),Cn.events=[],Cn._ui=e,n.end(),e.begin(n),n.begin(!1),e.g=n;for(var i=0,d=t.elements,a;i<d.length;)a=d[i],++i,null==a.parent&&Cn.drawElement(e,t,a);return n.end(),e.end(),n.begin(!1),Cn.events},Cn.drawElement=function(t,n,i,d,a){if(null==a&&(a=0),null==d&&(d=0),null!=i&&!1!=i.visible){var r=0|n.width*Cn._ui.SCALE,s=0|n.height*Cn._ui.SCALE;switch(i.anchor){case 1:d-=(r-Cn.screenW)/2;break;case 2:d-=r-Cn.screenW;break;case 3:a-=(s-Cn.screenH)/2;break;case 4:d-=(r-Cn.screenW)/2,a-=(s-Cn.screenH)/2;break;case 5:d-=r-Cn.screenW,a-=(s-Cn.screenH)/2;break;case 6:a-=s-Cn.screenH;break;case 7:d-=(r-Cn.screenW)/2,a-=s-Cn.screenH;break;case 8:d-=r-Cn.screenW,a-=s-Cn.screenH;}t._x=n.x+(0|i.x*Cn._ui.SCALE)+(0|d*Cn._ui.SCALE),t._y=n.y+(0|i.y*Cn._ui.SCALE)+(0|a*Cn._ui.SCALE),t._w=0|i.width*Cn._ui.SCALE;var o=null!=i.rotation&&0!=i.rotation;switch(o&&t.g.pushRotation(i.rotation,t._x+(0|i.width*Cn._ui.SCALE)/2,t._y+(0|i.height*Cn._ui.SCALE)/2),i.type){case 0:var A=t.ops.font,u=t.fontSize,l=t.t.TEXT_COL,_=null!=i.asset&&m.endsWith(i.asset,".ttf");_&&(t.ops.font=Cn.getAsset(n,i.asset)),t.fontSize=0|i.height*Cn._ui.SCALE,t.t.TEXT_COL=i.color_text,t.text(i.text,i.alignment),t.ops.font=A,t.fontSize=u,t.t.TEXT_COL=l;break;case 1:var f=Cn.getAsset(n,i.asset),c=null!=i.asset&&m.endsWith(i.asset,".ttf");if(null!=f&&!c){t.imageScrollAlign=!1;var g=null==i.color?-1:i.color;if(3==t.image(f,g,0|i.height*Cn._ui.SCALE)){var p=i.event;null!=p&&""!=p&&Cn.events.push(p)}t.imageScrollAlign=!0}break;case 2:var e=t.t.BUTTON_H;if(t.t.BUTTON_H=0|i.height*Cn._ui.SCALE,t.t.BUTTON_COL=i.color,t.t.BUTTON_TEXT_COL=i.color_text,t.t.BUTTON_HOVER_COL=i.color_hover,t.t.BUTTON_PRESSED_COL=i.color_press,t.button(i.text,i.alignment)){var h=i.event;null!=h&&""!=h&&Cn.events.push(h)}t.t.BUTTON_H=e;break;case 3:break;case 6:t.t.TEXT_COL=i.color_text,t.t.ACCENT_COL=i.color,t.t.ACCENT_HOVER_COL=i.color_hover,t.check(Cn.h.nest(i.id),i.text);break;case 7:t.t.TEXT_COL=i.color_text,t.t.ACCENT_COL=i.color,t.t.ACCENT_HOVER_COL=i.color_hover,t.inlineRadio(Cn.h.nest(i.id),i.text.split(";"));break;case 8:t.t.TEXT_COL=i.color_text,t.t.LABEL_COL=i.color_text,t.t.ACCENT_COL=i.color,t.t.SEPARATOR_COL=i.color,t.t.ACCENT_HOVER_COL=i.color_hover,t.combo(Cn.h.nest(i.id),i.text.split(";"));break;case 9:t.t.TEXT_COL=i.color_text,t.t.LABEL_COL=i.color_text,t.t.ACCENT_COL=i.color,t.t.ACCENT_HOVER_COL=i.color_hover,t.slider(Cn.h.nest(i.id),i.text,0,1,!0,100,!0,i.alignment);break;case 10:t.t.TEXT_COL=i.color_text,t.t.LABEL_COL=i.color_text,t.t.ACCENT_COL=i.color,t.t.ACCENT_HOVER_COL=i.color_hover,t.textInput(Cn.h.nest(i.id),i.text,i.alignment);break;case 11:t.t.TEXT_COL=i.color_text,t.t.LABEL_COL=i.color_text,t.t.ACCENT_COL=i.color,t.t.ACCENT_HOVER_COL=i.color_hover,In.keyInput(t,Cn.h.nest(i.id),i.text);break;case 12:var b=t.g.get_color();t.g.set_color(i.color),t.g.fillRect(t._x,t._y,t._w,0|i.height*Cn._ui.SCALE),t.g.set_color(b);break;case 13:var x=t.g.get_color();t.g.set_color(i.color),t.g.drawRect(t._x,t._y,t._w,0|i.height*Cn._ui.SCALE,i.strength),t.g.set_color(x);break;case 14:var S=t.g.get_color();t.g.set_color(i.color),ut.fillCircle(t.g,t._x+(0|i.width*Cn._ui.SCALE)/2,t._y+(0|i.height*Cn._ui.SCALE)/2,t._w/2),t.g.set_color(S);break;case 15:var y=t.g.get_color();t.g.set_color(i.color),ut.drawCircle(t.g,t._x+(0|i.width*Cn._ui.SCALE)/2,t._y+(0|i.height*Cn._ui.SCALE)/2,t._w/2,i.strength),t.g.set_color(y);break;case 16:var w=t.g.get_color();t.g.set_color(i.color),t.g.fillTriangle(t._x+t._w/2,t._y,t._x,t._y+(0|i.height*Cn._ui.SCALE),t._x+t._w,t._y+(0|i.height*Cn._ui.SCALE)),t.g.set_color(w);break;case 17:var E=t.g.get_color();t.g.set_color(i.color),t.g.drawLine(t._x+t._w/2,t._y,t._x,t._y+(0|i.height*Cn._ui.SCALE),i.strength),t.g.drawLine(t._x,t._y+(0|i.height*Cn._ui.SCALE),t._x+t._w,t._y+(0|i.height*Cn._ui.SCALE),i.strength),t.g.drawLine(t._x+t._w,t._y+(0|i.height*Cn._ui.SCALE),t._x+t._w/2,t._y,i.strength),t.g.set_color(E);break;case 18:var T=t.g.get_color(),C=i.progress_at,I=i.progress_total;t.g.set_color(i.color_progress),t.g.fillRect(t._x,t._y,t._w/I*Math.min(C,I),0|i.height*Cn._ui.SCALE),t.g.set_color(i.color),t.g.drawRect(t._x,t._y,t._w,0|i.height*Cn._ui.SCALE,i.strength),t.g.set_color(T);break;case 19:var B=t.g.get_color(),k=i.progress_at,v=i.progress_total;t.g.set_color(i.color_progress),ut.drawArc(t.g,t._x+(0|i.width*Cn._ui.SCALE)/2,t._y+(0|i.height*Cn._ui.SCALE)/2,t._w/2,-Math.PI/2,2*Math.PI/v*k-Math.PI/2,i.strength),t.g.set_color(i.color),ut.fillCircle(t.g,t._x+(0|i.width*Cn._ui.SCALE)/2,t._y+(0|i.height*Cn._ui.SCALE)/2,t._w/2-10),t.g.set_color(B);}if(null!=i.children)for(var L=0,O=i.children,N;L<O.length;)N=O[L],++L,Cn.drawElement(t,n,Cn.elemById(n,N),i.x+d,i.y+a);o&&t.g.popTransformation()}},Cn.getText=function(t,n){return n.text},Cn.getAsset=function(e,t){for(var n=0,i=e.assets,d;n<i.length;)if(d=i[n],++n,d.name==t)return Cn.assetMap.h[d.id];return null},Cn.getElementId=function(t){if(-1==Cn.elemId)for(var n=0,i=t.elements,d;n<i.length;)d=i[n],++n,Cn.elemId<d.id&&(Cn.elemId=d.id);return++Cn.elemId},Cn.getAssetId=function(e){if(-1==Cn.assetId)for(var t=0,n=e.assets,i;t<n.length;)i=n[t],++t,Cn.assetId<i.id&&(Cn.assetId=i.id);return++Cn.assetId},Cn.elemById=function(t,n){for(var i=0,d=t.elements,a;i<d.length;)if(a=d[i],++i,a.id==n)return a;return null},Cn.scaled=function(e){return 0|e*Cn._ui.SCALE};var In=function(){};s["zui.Ext"]=In,In.__name__=!0,In.floatInput=function(e,t,n,i){null==i&&(i=0),null==n&&(n=""),t.text=null==t.value?"null":""+t.value;var d=e.textInput(t,n,i);return t.value=parseFloat(d),t.value},In.keyInput=function(e,t,n,i){if(null==i&&(i=0),null==n&&(n=""),!e.isVisible(e.t.ELEMENT_H*e.SCALE))return e.endElement(),0|t.value;var d=e.getHover();d&&null!=vn.onTextHover&&vn.onTextHover(),e.g.set_color(d?e.t.ACCENT_HOVER_COL:e.t.ACCENT_COL);var a=e.g,r=e.t.FILL_ACCENT_BG,s=e._x+e.buttonOffsetY,o=e._y+e.buttonOffsetY,A=e._w-2*e.buttonOffsetY,u=e.t.BUTTON_H*e.SCALE,l=0;0==l&&(l=e.t.LINE_STRENGTH*e.SCALE),e.enabled||e.fadeColor(),r?a.fillRect(s,o,A,u):a.drawRect(s,o,A,u,l);var _=e.getReleased()||e.tabPressed;if(e.textSelectedHandle!=t&&_&&e.startTextEdit(t),e.textSelectedHandle==t?In.listenToKey(e,t):t.changed=!1,""!=n){e.g.set_color(e.t.LABEL_COL);var f=2==i?0:2,c=0==f?7:0;e.drawString(e.g,n,c,0,f)}return t.text=In.keycodeToString(0|t.value),e.g.set_color(e.t.TEXT_COL),e.textSelectedHandle==t?e.drawString(e.g,e.textSelectedCurrentText,null,0,i):e.drawString(e.g,t.text,null,0,i),e.endElement(),0|t.value},In.listenToKey=function(e,t){e.isKeyDown?(t.value=e.key,t.changed=e.changed=!0,e.textSelectedHandle=null,e.isTyping=!1,null!=Jt.get()&&Jt.get().hide()):e.textSelectedCurrentText="Press a key..."},In.list=function(e,t,n,i){var d=0;null==i&&(i={});for(var a=null==i.addCb?function(e){n.push(e)}:i.addCb,r=null==i.removeCb?function(e){n.splice(e,1)}:i.removeCb,s=null==i.getNameCb?function(e){return n[e]}:i.getNameCb,o=null==i.setNameCb?function(e,t){n[e]=t}:i.setNameCb,A=null==i.getLabelCb?function(){return""}:i.getLabelCb,u=i.itemDrawCb,l=null!=i.showRadio&&i.showRadio,_=null==i.editable||i.editable,f=null==i.showAdd||i.showAdd,c=null==i.addLabel?"Add":i.addLabel,g=0;g<n.length;){l?(e.row([.12,.68,.2]),e.radio(t.nest(0),g,"")&&(d=g)):e.row([.8,.2]);var p=t.nest(g);p.text=s(g),_?o(g,e.textInput(p,A(g))):e.text(s(g)),e.button("X")?r(g):++g,null!=u&&u(p.nest(g),g-1)}return f&&e.button(c)&&a("untitled"),d},In.panelList=function(e,t,n,i,d,a,r,s,o,A,u){null==u&&(u="Add"),null==A&&(A=!0),null==o&&(o=!0),null==i&&(i=function(e){n.push(e)}),null==d&&(d=function(e){n.splice(e,1)}),null==a&&(a=function(e){return n[e]}),null==r&&(r=function(e,t){n[e]=t});for(var l=0;l<n.length;){e.row([.12,.68,.2]);var _=e.panel(t.nest(l),"",0),f=t.nest(l);o?r(l,e.textInput(f,a(l))):e.text(a(l)),e.button("X")?d(l):++l,null!=s&&_&&s(f.nest(l),l-1)}A&&e.button(u)&&i("untitled")},In.colorPicker=function(e,t,n){null==n&&(n=!1);var i=e.slider(t.nest(0,{value:.00392156862745098*((16711680&t.color)>>>16)}),"R",0,1,!0),d=e.slider(t.nest(1,{value:.00392156862745098*((65280&t.color)>>>8)}),"G",0,1,!0),r=e.slider(t.nest(2,{value:.00392156862745098*(255&t.color)}),"B",0,1,!0),s=.00392156862745098*(t.color>>>24);n&&(s=e.slider(t.nest(3,{value:s}),"A",0,1,!0));var o=J.fromFloats(i,d,r,s);return e.text("",2,o),o},In.initPath=function(e,t){e.text="Windows"==t?"C:\\Users":"/"},In.fileBrowser=function(e,t,n){null==n&&(n=!1);var i="/",d="ls ",a=pe.get_systemId();"Windows"==a&&(d="dir /b ",n&&(d+="/ad "),i="\\",t.text=m.replace(t.text,"\\\\","\\"),t.text=m.replace(t.text,"\r","")),""==t.text&&In.initPath(t,a);var r=Krom.getFilesLocation()+i+In.dataPath+"dir.txt";t.text!=In.lastPath&&Krom.sysCommand(d+"\""+t.text+"\" > \""+r+"\""),In.lastPath=t.text;var s=L.ofData(Krom.loadBlob(r)).toString(),o=s.split("\n"),A=t.text.indexOf("/"),u=t.text.indexOf("\\"),l=-1<A&&t.text.length-1>A||-1<u&&t.text.length-1>u;l&&e.button("..",0)&&(t.text=t.text.substring(0,t.text.lastIndexOf(i)),2==t.text.length&&":"==t.text.charAt(1)&&(t.text+=i));for(var _=0,c;_<o.length;)c=o[_],(++_,""!=c&&"."!=c.charAt(0))&&e.button(c,0)&&(t.text.charAt(t.text.length-1)!=i&&(t.text+=i),t.text+=c);return t.text},In.colorWheel=function(e,t,n,i,d){null==d&&(d=!1),null==n&&(n=!1),null==i&&(i=e._w),In.rgbToHsv(.00392156862745098*((16711680&t.color)>>>16),.00392156862745098*((65280&t.color)>>>8),.00392156862745098*(255&t.color),In.ar);var a=In.ar[0],r=In.ar[1],s=In.ar[2],o=.00392156862745098*(t.color>>>24),A=e._x,u=e._y,l=null!=e.currentWindow&&e.currentWindow.scrollEnabled;l||(i-=0|e.t.SCROLL_W*e.SCALE,A+=(0|e.t.SCROLL_W*e.SCALE)/2),e.image(e.ops.color_wheel,J.fromFloats(s,s,s));var _=e._y-u,f=A+i/2,c=u+_/2,g=.7*i,p=g/2,h=f,m=c+r*p,b=a*(2*Math.PI),x=Math.cos(b)*(h-f)-Math.sin(b)*(m-c)+f,S=Math.sin(b)*(h-f)+Math.cos(b)*(m-c)+c;h=x,m=S,e.g.set_color(-16777216),e.g.fillRect(h-3*e.SCALE,m-3*e.SCALE,6*e.SCALE,6*e.SCALE),e.g.set_color(-1),e.g.fillRect(h-2*e.SCALE,m-2*e.SCALE,4*e.SCALE,4*e.SCALE),d&&(n?e.row([.3333333333333333,.3333333333333333,.3333333333333333]):e.row([.5,.5]));var y=t.nest(0);if(y.value=Math.round(100*s)/100,s=e.slider(y,"Value",0,1,!0),y.changed&&(t.changed=e.changed=!0),n){var E=t.nest(1,{value:Math.round(100*o)/100});o=e.slider(E,"Alpha",0,1,!0),E.changed&&(t.changed=e.changed=!0)}var T=f+e._windowX,C=c+e._windowY;if(e.inputStarted&&e.getInputInRect(T-p,C-p,g,g)&&(In.wheelSelectedHande=t),e.inputReleased&&(In.wheelSelectedHande=null),e.inputDown&&In.wheelSelectedHande==t){var I=T-e.inputX,B=C-e.inputY;r=Math.min(Math.sqrt(I*I+B*B),p)/p;var k=Math.atan2(e.inputX-T,e.inputY-C);0>k&&(k=Math.PI+(Math.PI-Math.abs(k))),k=2*Math.PI-k,a=k/(2*Math.PI),t.changed=e.changed=!0}return In.hsvToRgb(a,r,s,In.ar),t.color=J.fromFloats(In.ar[0],In.ar[1],In.ar[2],o),e.text("",2,t.color),t.color},In.keycodeToString=function(e){return-1===e?"None":0===e?"Unknown":1===e?"Back":3===e?"Cancel":6===e?"Help":8===e?"Backspace":9===e?"Tab":12===e?"Clear":13===e?"Return":16===e?"Shift":17===e?"Ctrl":18===e?"Alt":19===e?"Pause":20===e?"CapsLock":21===e?"Kana":22===e?"Eisu":23===e?"Junja":24===e?"Final":25===e?"Hanja":27===e?"Esc":28===e?"Convert":29===e?"NonConvert":30===e?"Accept":31===e?"ModeChange":32===e?"Space":33===e?"PageUp":34===e?"PageDown":35===e?"End":36===e?"Home":37===e?"Left":38===e?"Up":39===e?"Right":40===e?"Down":41===e?"Select":42===e?"Print":43===e?"Execute":44===e?"PrintScreen":45===e?"Insert":46===e?"Delete":58===e?"Colon":59===e?"Semicolon":60===e?"LessThan":61===e?"Equals":62===e?"GreaterThan":63===e?"QuestionMark":64===e?"At":91===e?"Win":93===e?"ContextMenu":95===e?"Sleep":96===e?"Numpad0":97===e?"Numpad1":98===e?"Numpad2":99===e?"Numpad3":100===e?"Numpad4":101===e?"Numpad5":102===e?"Numpad6":103===e?"Numpad7":104===e?"Numpad8":105===e?"Numpad9":106===e?"Multiply":107===e?"Add":108===e?"Separator":109===e?"Subtract":110===e?"Decimal":111===e?"Divide":112===e?"F1":113===e?"F2":114===e?"F3":115===e?"F4":116===e?"F5":117===e?"F6":118===e?"F7":119===e?"F8":120===e?"F9":121===e?"F10":122===e?"F11":123===e?"F12":124===e?"F13":125===e?"F14":126===e?"F15":127===e?"F16":128===e?"F17":129===e?"F18":130===e?"F19":131===e?"F20":132===e?"F21":133===e?"F22":134===e?"F23":135===e?"F24":144===e?"NumLock":145===e?"ScrollLock":146===e?"WinOemFjJisho":147===e?"WinOemFjMasshou":148===e?"WinOemFjTouroku":149===e?"WinOemFjLoya":150===e?"WinOemFjRoya":160===e?"Circumflex":161===e?"Exclamation":162===e?"DoubleQuote":163===e?"Hash":164===e?"Dollar":165===e?"Percent":166===e?"Ampersand":167===e?"Underscore":168===e?"OpenParen":169===e?"CloseParen":170===e?"Asterisk":171===e?"Plus":172===e?"Pipe":173===e?"HyphenMinus":174===e?"OpenCurlyBracket":175===e?"CloseCurlyBracket":176===e?"Tilde":181===e?"VolumeMute":182===e?"VolumeDown":183===e?"VolumeUp":188===e?"Comma":190===e?"Period":191===e?"Slash":192===e?"BackQuote":219===e?"OpenBracket":220===e?"BackSlash":221===e?"CloseBracket":222===e?"Quote":224===e?"Meta":225===e?"AltGr":227===e?"WinIcoHelp":228===e?"WinIco00":230===e?"WinIcoClear":233===e?"WinOemReset":234===e?"WinOemJump":235===e?"WinOemPA1":236===e?"WinOemPA2":237===e?"WinOemPA3":238===e?"WinOemWSCTRL":239===e?"WinOemCUSEL":240===e?"WinOemATTN":241===e?"WinOemFinish":242===e?"WinOemCopy":243===e?"WinOemAuto":244===e?"WinOemENLW":245===e?"WinOemBackTab":246===e?"ATTN":247===e?"CRSEL":248===e?"EXSEL":249===e?"EREOF":250===e?"Play":251===e?"Zoom":253===e?"PA1":254===e?"WinOemClear":String.fromCodePoint(e)},In.dist=function(e,t,n,i){var d=e-n,a=t-i;return Math.sqrt(d*d+a*a)},In.fract=function(e){return e-(0|e)},In.mix=function(e,t,n){return e*(1-n)+t*n},In.clamp=function(e,t,n){return Math.min(Math.max(e,t),n)},In.step=function(e,t){return t<e?0:1},In.hsvToRgb=function(e,t,n,i){var d=e+1,a=Math.abs(6*(d-(0|d))-3),r=e+.6666666666666666,s=Math.abs(6*(r-(0|r))-3),o=e+.3333333333333333,A=Math.abs(6*(o-(0|o))-3);i[0]=n*(1-t+Math.min(Math.max(a-1,0),1)*t),i[1]=n*(1-t+Math.min(Math.max(s-1,0),1)*t),i[2]=n*(1-t+Math.min(Math.max(A-1,0),1)*t)},In.rgbToHsv=function(e,t,n,i){var r=t<n?0:1,a=n*(1-r)+t*r,s=t<n?0:1,o=t*(1-s)+n*s,A=t<n?0:1,u=t<n?0:1,l=e<a?0:1,_=a*(1-l)+e*l,f=e<a?0:1,c=o*(1-f)+o*f,g=e<a?0:1,p=e<a?0:1,h=e*(1-p)+a*p,m=_-Math.min(h,c);i[0]=Math.abs((.6666666666666666*(1-u)+-.3333333333333333*u)*(1-g)+(-1*(1-A)+0*A)*g+(h-c)/(6*m+1e-10)),i[1]=m/(_+1e-10),i[2]=_};var Bn=function(){};s["zui.Id"]=Bn,Bn.__name__=!0;var kn=function(){};s["zui.Themes"]=kn,kn.__name__=!0;var vn=function(e){this.restoreY=-1,this.restoreX=-1,this.checkSelectImage=null,this.elementsBaked=!1,this.tabScroll=0,this.tabHandle=null,this.tabNames=null,this.tooltipTime=0,this.tooltipWait=!1,this.tooltipShown=!1,this.tooltipY=0,this.tooltipX=0,this.tooltipInvertY=!1,this.tooltipImgMaxWidth=null,this.tooltipImg=null,this.tooltipText="",this.comboToSubmit=0,this.submitComboHandle=null,this.comboSelectedWindow=null,this.comboSelectedHandle=null,this.tabPressedHandle=null,this.tabPressed=!1,this.textToSubmit="",this.submitTextHandle=null,this.textSelectedHandle=null,this.windowHeader=0,this.scrollingHandle=null,this.windowEnded=!0,this._windowY=0,this._windowX=0,this.imageScrollAlign=!0,this.scrollAlign=0,this.curRatio=-1,this.highlightAnchor=0,this.cursorY=0,this.cursorX=0,this.key=null,this.isReturnDown=!1,this.isEscapeDown=!1,this.isDeleteDown=!1,this.isBackspaceDown=!1,this.isAltDown=!1,this.isCtrlDown=!1,this.isShiftDown=!1,this.isKeyDown=!1,this.isKeyPressed=!1,this.inputWheelDelta=0,this.inputEnabled=!0,this.inputRegistered=!1,this.alwaysRedraw=!1,this.scrollEnabled=!0,this.imageInvertY=!1,this.changed=!1,this.isReleased=!1,this.isHovered=!1,this.isPushed=!1,this.isStarted=!1,this.enabled=!0,this.isTyping=!1,this.isScrolling=!1,null==e.theme&&(e.theme=kn.dark),this.t=e.theme,null==e.khaWindowId&&(e.khaWindowId=0),null==e.scaleFactor&&(e.scaleFactor=1),null==e.scaleTexture&&(e.scaleTexture=1),null==e.autoNotifyInput&&(e.autoNotifyInput=!0),this.ops=e,this.setScale(e.scaleFactor),e.autoNotifyInput&&this.registerInput(),null==vn.copyReceiver&&(vn.copyReceiver=this,pe.notifyOnCutCopyPaste(r(this,this.onCut),r(this,this.onCopy),r(this,this.onPaste)),pe.notifyOnFrames(function(){(vn.isCopy||vn.isPaste)&&1<++vn.copyFrame&&(vn.isCopy=vn.isCut=vn.isPaste=!1,vn.copyFrame=0)}));var t=Dt.createTextVertexStructure();this.rtTextPipeline=Dt.createTextPipeline(t),this.rtTextPipeline.alphaBlendSource=1,this.rtTextPipeline.compile()};s["zui.Zui"]=vn,vn.__name__=!0,vn.prototype={isScrolling:null,isTyping:null,enabled:null,isStarted:null,isPushed:null,isHovered:null,isReleased:null,changed:null,imageInvertY:null,scrollEnabled:null,alwaysRedraw:null,inputRegistered:null,inputEnabled:null,inputX:null,inputY:null,inputInitialX:null,inputInitialY:null,inputDX:null,inputDY:null,inputWheelDelta:null,inputStarted:null,inputStartedR:null,inputReleased:null,inputReleasedR:null,inputDown:null,inputDownR:null,isKeyPressed:null,isKeyDown:null,isShiftDown:null,isCtrlDown:null,isAltDown:null,isBackspaceDown:null,isDeleteDown:null,isEscapeDown:null,isReturnDown:null,key:null,char:null,cursorX:null,cursorY:null,highlightAnchor:null,ratios:null,curRatio:null,xBeforeSplit:null,wBeforeSplit:null,g:null,globalG:null,rtTextPipeline:null,t:null,SCALE:null,ops:null,fontSize:null,fontOffsetY:null,arrowOffsetX:null,arrowOffsetY:null,titleOffsetX:null,buttonOffsetY:null,checkOffsetX:null,checkOffsetY:null,checkSelectOffsetX:null,checkSelectOffsetY:null,radioOffsetX:null,radioOffsetY:null,radioSelectOffsetX:null,radioSelectOffsetY:null,scrollAlign:null,imageScrollAlign:null,_x:null,_y:null,_w:null,_h:null,_windowX:null,_windowY:null,_windowW:null,_windowH:null,currentWindow:null,windowEnded:null,scrollingHandle:null,windowHeader:null,textSelectedHandle:null,textSelectedCurrentText:null,submitTextHandle:null,textToSubmit:null,tabPressed:null,tabPressedHandle:null,comboSelectedHandle:null,comboSelectedWindow:null,comboSelectedAlign:null,comboSelectedTexts:null,comboSelectedLabel:null,comboSelectedX:null,comboSelectedY:null,comboSelectedW:null,submitComboHandle:null,comboToSubmit:null,tooltipText:null,tooltipImg:null,tooltipImgMaxWidth:null,tooltipInvertY:null,tooltipX:null,tooltipY:null,tooltipShown:null,tooltipWait:null,tooltipTime:null,tabNames:null,tabHandle:null,tabScroll:null,elementsBaked:null,checkSelectImage:null,setScale:function(e){this.ops.scaleFactor=e,this.SCALE=this.ops.scaleFactor*this.ops.scaleTexture,this.fontSize=0|this.t.FONT_SIZE*this.ops.scaleFactor;var t=this.ops.font.height(this.fontSize);this.fontOffsetY=(this.t.ELEMENT_H*this.SCALE-t)/2,this.arrowOffsetY=(this.t.ELEMENT_H*this.SCALE-this.t.ARROW_SIZE*this.SCALE)/2,this.arrowOffsetX=this.arrowOffsetY,this.titleOffsetX=(2*this.arrowOffsetX+this.t.ARROW_SIZE*this.SCALE)/this.SCALE,this.buttonOffsetY=(this.t.ELEMENT_H*this.SCALE-this.t.BUTTON_H*this.SCALE)/2,this.checkOffsetY=(this.t.ELEMENT_H*this.SCALE-this.t.CHECK_SIZE*this.SCALE)/2,this.checkOffsetX=this.checkOffsetY,this.checkSelectOffsetY=(this.t.CHECK_SIZE*this.SCALE-this.t.CHECK_SELECT_SIZE*this.SCALE)/2,this.checkSelectOffsetX=this.checkSelectOffsetY,this.radioOffsetY=(this.t.ELEMENT_H*this.SCALE-this.t.CHECK_SIZE*this.SCALE)/2,this.radioOffsetX=this.radioOffsetY,this.radioSelectOffsetY=(this.t.CHECK_SIZE*this.SCALE-this.t.CHECK_SELECT_SIZE*this.SCALE)/2,this.radioSelectOffsetX=this.radioSelectOffsetY,this.elementsBaked=!1},bakeElements:function(){null!=this.checkSelectImage&&this.checkSelectImage.unload(),this.checkSelectImage=ae.createRenderTarget(0|this.t.CHECK_SELECT_SIZE*this.SCALE,0|this.t.CHECK_SELECT_SIZE*this.SCALE,null,0,1,this.ops.khaWindowId);var e=this.checkSelectImage.get_g2();e.begin(!0,0),e.set_color(this.t.ACCENT_SELECT_COL),e.drawLine(0,0,this.checkSelectImage.get_width(),this.checkSelectImage.get_height(),2*this.SCALE),e.drawLine(this.checkSelectImage.get_width(),0,0,this.checkSelectImage.get_height(),2*this.SCALE),e.end(),this.elementsBaked=!0},remove:function(){this.ops.autoNotifyInput&&this.unregisterInput()},registerInput:function(){$t.get().notifyWindowed(this.ops.khaWindowId,r(this,this.onMouseDown),r(this,this.onMouseUp),r(this,this.onMouseMove),r(this,this.onMouseWheel)),Jt.get().notify(r(this,this.onKeyDown),r(this,this.onKeyUp),r(this,this.onKeyPress)),this.inputRegistered=!0},unregisterInput:function(){$t.get().removeWindowed(this.ops.khaWindowId,r(this,this.onMouseDown),r(this,this.onMouseUp),r(this,this.onMouseMove),r(this,this.onMouseWheel)),Jt.get().remove(r(this,this.onKeyDown),r(this,this.onKeyUp),r(this,this.onKeyPress)),this.endInput(),this.inputX=this.inputY=0,this.inputRegistered=!1},begin:function(e){this.elementsBaked||this.bakeElements(),this.changed=!1,this.globalG=e,this._x=0,this._y=0,this._w=0,this._h=0},end:function(e){null==e&&(e=!0),this.windowEnded||this.endWindow(),null!=this.comboSelectedHandle&&this.drawCombo(),""!=this.tooltipText||null!=this.tooltipImg?(this.inputChanged()&&(this.tooltipShown=!1,this.tooltipWait=0==this.inputDX&&0==this.inputDY),!this.tooltipShown&&(this.tooltipShown=!0,this.tooltipX=this.inputX,this.tooltipTime=_e.time()),!this.tooltipWait&&1<_e.time()-this.tooltipTime&&(""==this.tooltipText?this.drawTooltipImage():this.drawTooltip())):this.tooltipShown=!1,e&&this.endInput(),this.tabPressedHandle=null},endInput:function(){this.isKeyPressed=!1,this.inputStarted=!1,this.inputStartedR=!1,this.inputReleased=!1,this.inputReleasedR=!1,this.inputDX=0,this.inputDY=0,this.inputWheelDelta=0,vn.textToPaste=""},beginLayout:function(e,t,n,i){this.elementsBaked||this.bakeElements(),this.currentWindow=null,this.g=e,this._windowX=0,this._windowY=0,this._windowW=i,this._x=t,this._y=n,this._w=i},endLayout:function(e){null==e&&(e=!0),e&&this.endInput()},inputChanged:function(){return!!(0!=this.inputDX||0!=this.inputDY||0!=this.inputWheelDelta||this.inputStarted||this.inputStartedR||this.inputReleased||this.inputReleasedR||this.inputDown||this.inputDownR)||this.isKeyPressed},windowDirty:function(e,t,n,i,d){var a=t+e.dragX,r=n+e.dragY,s=this.getInputInRect(a,r,i,d)&&this.inputChanged();return!!(this.alwaysRedraw||this.isScrolling||this.isTyping)||s},window:function(e,t,n,i,d,a){return(null==a&&(a=!1),(null==e.texture||i!=e.texture.get_width()||d!=e.texture.get_height())&&this.resize(e,i,d,this.ops.khaWindowId),this.windowEnded||this.endWindow(),this.windowEnded=!1,this.g=e.texture.get_g2(),this.currentWindow=e,this._windowX=t+e.dragX,this._windowY=n+e.dragY,this._windowW=i,this._windowH=d,this.windowHeader=0,this.windowDirty(e,t,n,i,d)&&(e.redraws=2),null!=vn.onBorderHover&&(this.getInputInRect(this._windowX-4,this._windowY,8,this._windowH)?vn.onBorderHover(e,0):this.getInputInRect(this._windowX+this._windowW-4,this._windowY,8,this._windowH)?vn.onBorderHover(e,1):this.getInputInRect(this._windowX,this._windowY-4,this._windowW,8)?vn.onBorderHover(e,2):this.getInputInRect(this._windowX,this._windowY+this._windowH-4,this._windowW,8)&&vn.onBorderHover(e,3)),!(0>=e.redraws))&&(this._x=0,this._y=e.scrollOffset,1==e.layout&&(i=0|this.t.ELEMENT_W*this.SCALE),this._w=e.scrollEnabled?i-(0|this.t.SCROLL_W*this.SCALE):i,this._h=d,this.tooltipText="",this.tooltipImg=null,this.tabNames=null,this.t.FILL_WINDOW_BG?this.g.begin(!0,this.t.WINDOW_BG_COL):(this.g.begin(!0,0),this.g.set_color(this.t.WINDOW_BG_COL),this.g.fillRect(this._x,this._y-e.scrollOffset,e.lastMaxX,e.lastMaxY)),e.dragEnabled=a,a&&(this.inputStarted&&this.getInputInRect(this._windowX,this._windowY,this._windowW,15)?e.dragging=!0:this.inputReleased&&(e.dragging=!1),e.dragging&&(e.redraws=2,e.dragX+=0|this.inputDX,e.dragY+=0|this.inputDY),this._y+=15,this.windowHeader+=15),!0)},endWindow:function(e){null==e&&(e=!0);var t=this.currentWindow;if(null!=t){if(0<t.redraws||this.isScrolling||this.isTyping){null!=this.tabNames&&this.drawTabs(),t.dragEnabled&&(this.g.set_color(this.t.SEPARATOR_COL),this.g.fillRect(0,0,this._windowW,15));var n=this._y-t.scrollOffset;if(n<this._windowH||1==t.layout||!this.scrollEnabled)t.scrollEnabled=!1,t.scrollOffset=0;else{t.scrollEnabled=!0,0>this.tabScroll&&(t.scrollOffset=this.tabScroll,this.tabScroll=0);var i=n-this._windowH,d=-t.scrollOffset,a=this._windowH*Math.abs(this._windowH/n);a=Math.max(a,this.t.ELEMENT_H*this.SCALE);var r=this._windowH-a,s=r*(d/i),o=this.getInputInRect(this._windowX+this._windowW-(0|this.t.SCROLL_W*this.SCALE),s+this._windowY,0|this.t.SCROLL_W*this.SCALE,a);this.inputStarted&&o&&(t.scrolling=!0,this.scrollingHandle=t,this.isScrolling=!0),t.scrolling?this.scroll(this.inputDY*(i/r),n):0!=this.inputWheelDelta&&null==this.comboSelectedHandle&&this.getInputInRect(this._windowX,this._windowY,this._windowW,this._windowH)&&this.scroll(this.inputWheelDelta*(this.t.ELEMENT_H*this.SCALE),n),0<t.scrollOffset?t.scrollOffset=0:n+t.scrollOffset<this._windowH&&(t.scrollOffset=this._windowH-n),this.g.set_color(this.t.WINDOW_BG_COL),this.g.fillRect(this._windowW-(0|this.t.SCROLL_W*this.SCALE),this._windowY,0|this.t.SCROLL_W*this.SCALE,this._windowH),this.g.set_color(this.t.ACCENT_COL);var A=this.getInputInRect(this._windowX+this._windowW-(0|this.t.SCROLL_W*this.SCALE),this._windowY,0|this.t.SCROLL_W*this.SCALE,this._windowH),u=A||t.scrolling?0|this.t.SCROLL_W*this.SCALE:(0|this.t.SCROLL_W*this.SCALE)/3;this.g.fillRect(this._windowW-u-this.scrollAlign,s,u,a)}t.lastMaxX=this._x,t.lastMaxY=this._y,0==t.layout?t.lastMaxX+=this._windowW:t.lastMaxY+=this._windowH,t.redraws--,this.g.end()}this.windowEnded=!0,(vn.alwaysRedrawWindow||-4<t.redraws)&&(e&&this.globalG.begin(!1),this.globalG.set_color(this.t.WINDOW_TINT_COL),this.globalG.drawScaledImage(t.texture,this._windowX,this._windowY,t.texture.get_width()/this.ops.scaleTexture,t.texture.get_height()/this.ops.scaleTexture),e&&this.globalG.end(),0>=t.redraws&&t.redraws--)}},scroll:function(e){this.currentWindow.scrollOffset-=e},restoreX:null,restoreY:null,tab:function(e,t){null==this.tabNames&&(this.tabNames=[],this.tabHandle=e,this.windowHeader+=this.buttonOffsetY+this.t.BUTTON_H*this.SCALE,this.restoreX=this.inputX,this.restoreY=this.inputY,this.getInputInRect(this._windowX,this._windowY,this._windowW,this.windowHeader)&&(this.inputX=this.inputY=-1)),this.tabNames.push(t);var n=e.position==this.tabNames.length-1;return n&&this.endElement(),n},drawTabs:function(){if(this.inputX=this.restoreX,this.inputY=this.restoreY,null!=this.currentWindow){var e=0,t=0|1.1*(this.t.BUTTON_H*this.SCALE),n=this._y;this._y=this.currentWindow.dragEnabled?15:0,this.tabHandle.changed=!1,this.g.set_color(this.t.SEPARATOR_COL),this.g.fillRect(0,this._y,this._windowW,this.buttonOffsetY+t+2),this.g.set_color(this.t.ACCENT_COL),this.g.fillRect(this.buttonOffsetY,this._y+this.buttonOffsetY+t+2,this._windowW-2*this.buttonOffsetY,this.t.LINE_STRENGTH*this.SCALE),this._y+=2;for(var d=0,a=this.tabNames.length,r;d<a;){r=d++,this._x=e,this._w=0|this.ops.font.width(this.fontSize,this.tabNames[r])+2*this.buttonOffsetY+14*this.SCALE;var s=this.getReleased(),o=this.getPushed(),A=this.getHover();if(s){var u=this.tabHandle.nest(this.tabHandle.position);u.scrollOffset=this.currentWindow.scrollOffset,u=this.tabHandle.nest(r),this.tabScroll=u.scrollOffset,this.tabHandle.position=r,this.currentWindow.redraws=3,this.tabHandle.changed=!0}var l=this.tabHandle.position==r;this.g.set_color(l?this.t.WINDOW_BG_COL:o||A?this.t.BUTTON_HOVER_COL:this.t.SEPARATOR_COL),e+=this._w+1;var _=this.g,f=this._x+this.buttonOffsetY,c=this._y+this.buttonOffsetY,g=this._w,p=0;0==p&&(p=this.t.LINE_STRENGTH*this.SCALE),this.enabled||this.fadeColor(),_.fillRect(f,c,g,t),this.g.set_color(l?this.t.BUTTON_TEXT_COL:this.t.LABEL_COL),this.drawString(this.g,this.tabNames[r],this.t.TEXT_OFFSET,0,0),l&&(this.g.set_color(this.t.WINDOW_BG_COL),this.g.fillRect(this._x+this.buttonOffsetY+1,this._y+this.buttonOffsetY+t,this._w-1,this.t.LINE_STRENGTH*this.SCALE))}this._x=0,this._y=n,this._w=0|(this.currentWindow.scrollEnabled?this._windowW-(0|this.t.SCROLL_W*this.SCALE):this._windowW)}},panel:function(e,t,n,i){return(null==i&&(i=!1),null==n&&(n=0),!this.isVisible(this.t.ELEMENT_H*this.SCALE))?(this.endElement(),e.selected):(this.getReleased()&&(e.selected=!e.selected),0<n&&(this.g.set_color(this.t.PANEL_BG_COL),this.g.fillRect(this._x,this._y,this._w,this.t.ELEMENT_H*this.SCALE)),i?this.drawTree(e.selected):this.drawArrow(e.selected),this.g.set_color(this.t.PANEL_TEXT_COL),this.g.set_opacity(1),this.drawString(this.g,t,this.titleOffsetX,0),this.endElement(),e.selected)},image:function(e,t,n,i,d,a,s){null==s&&(s=0),null==a&&(a=0),null==d&&(d=0),null==i&&(i=0),null==t&&(t=-1);var o=(0<a?a:e.get_width())*this.SCALE,A=(0<s?s:e.get_height())*this.SCALE,u=Math.min(o,this._w),l=this._x;if(this.imageScrollAlign){u=Math.min(o,this._w-2*this.buttonOffsetY),l+=this.buttonOffsetY;var _=null!=this.currentWindow&&this.currentWindow.scrollEnabled;if(!_){var f=-1==this.curRatio?1:this.ratios[this.curRatio];u-=(0|this.t.SCROLL_W*this.SCALE)*f,l+=(0|this.t.SCROLL_W*this.SCALE)*f/2}}var r=null==n?u/o:n/A;if(null==n?n=A*r:u=o*r,!this.isVisible(n))return this.endElement(n),0;var c=this.getStarted(n),g=this.getPushed(n),p=this.getReleased(n),m=this.getHover(n);this.g.set_color(t),this.enabled||this.fadeColor();var b=n;return 0<a?this.imageInvertY?this.g.drawScaledSubImage(e,i,d,a,s,l,this._y+b,u,-b):this.g.drawScaledSubImage(e,i,d,a,s,l,this._y,u,b):this.imageInvertY?this.g.drawScaledImage(e,l,this._y+b,u,-b):this.g.drawScaledImage(e,l,this._y,u,b),this.endElement(n),c?1:p?3:g?2:0},text:function(e,t,n){if(null==n&&(n=0),null==t&&(t=0),!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),0;var i=this.getStarted(),d=this.getPushed(),a=this.getReleased(),r=this.getHover();return 0!=n&&(this.g.set_color(n),this.g.fillRect(this._x+this.buttonOffsetY,this._y+this.buttonOffsetY,this._w-2*this.buttonOffsetY,this.t.BUTTON_H*this.SCALE)),this.g.set_color(this.t.TEXT_COL),this.drawString(this.g,e,this.t.TEXT_OFFSET,0,t),this.endElement(),i?1:a?3:d?2:0},startTextEdit:function(e){this.isTyping=!0,this.submitTextHandle=this.textSelectedHandle,this.textToSubmit=this.textSelectedCurrentText,this.textSelectedHandle=e,this.textSelectedCurrentText=e.text,this.tabPressed&&(this.tabPressed=!1,this.isKeyPressed=!1),this.tabPressedHandle=e,this.cursorX=e.text.length,this.cursorY=0,this.highlightAnchor=0,null!=Jt.get()&&Jt.get().show()},submitTextEdit:function(){this.submitTextHandle.text=this.textToSubmit,this.submitTextHandle.changed=this.changed=!0,this.submitTextHandle=null,this.textToSubmit="",this.textSelectedCurrentText=""},updateTextEdit:function(e){null==e&&(e=0);var t=this.textSelectedCurrentText;if(this.isKeyPressed){37==this.key?0<this.cursorX&&this.cursorX--:39==this.key?this.cursorX<t.length&&this.cursorX++:8==this.key?0<this.cursorX&&this.highlightAnchor==this.cursorX?(t=_.substr(t,0,this.cursorX-1)+_.substr(t,this.cursorX,t.length),this.cursorX--):this.highlightAnchor<this.cursorX?(t=_.substr(t,0,this.highlightAnchor)+_.substr(t,this.cursorX,t.length),this.cursorX=this.highlightAnchor):t=_.substr(t,0,this.cursorX)+_.substr(t,this.highlightAnchor,t.length):46==this.key?this.highlightAnchor==this.cursorX?t=_.substr(t,0,this.cursorX)+_.substr(t,this.cursorX+1,null):this.highlightAnchor<this.cursorX?(t=_.substr(t,0,this.highlightAnchor)+_.substr(t,this.cursorX,t.length),this.cursorX=this.highlightAnchor):t=_.substr(t,0,this.cursorX)+_.substr(t,this.highlightAnchor,t.length):13==this.key?this.deselectText():27==this.key?(this.textSelectedCurrentText=this.textSelectedHandle.text,this.deselectText()):9==this.key?(this.tabPressed=!0,this.deselectText(),this.key=null):36==this.key?this.cursorX=0:35==this.key?this.cursorX=t.length:16!=this.key&&20!=this.key&&17!=this.key&&18!=this.key&&38!=this.key&&40!=this.key&&null!=this.char&&""!=this.char&&32<=_.cca(this.char,0)&&(t=_.substr(t,0,this.highlightAnchor)+this.char+_.substr(t,this.cursorX,null),this.cursorX=this.cursorX+1>t.length?t.length:this.cursorX+1);var n=this.isShiftDown&&(37==this.key||39==this.key||16==this.key);n||this.isCtrlDown||(this.highlightAnchor=this.cursorX)}""!=vn.textToPaste&&(t=_.substr(t,0,this.highlightAnchor)+vn.textToPaste+_.substr(t,this.cursorX,null),this.cursorX+=vn.textToPaste.length,this.highlightAnchor=this.cursorX,vn.textToPaste=""),vn.textToCopy=this.highlightAnchor==this.cursorX?t:this.highlightAnchor<this.cursorX?t.substring(this.highlightAnchor,this.cursorX):t.substring(this.cursorX,this.highlightAnchor),vn.isCut&&(this.highlightAnchor==this.cursorX?t="":this.highlightAnchor<this.cursorX?(t=_.substr(t,0,this.highlightAnchor)+_.substr(t,this.cursorX,t.length),this.cursorX=this.highlightAnchor):t=_.substr(t,0,this.cursorX)+_.substr(t,this.highlightAnchor,t.length));var i=this.t.TEXT_OFFSET,d=this.t.ELEMENT_H*this.SCALE,a=d-3*this.buttonOffsetY;if(this.highlightAnchor!=this.cursorX){var r=this.cursorX,s=this.highlightAnchor;this.highlightAnchor<this.cursorX&&(r=this.highlightAnchor,s=this.cursorX);var o=_.substr(t,r,s-r),A=this.ops.font.width(this.fontSize,o),u=this.ops.font.width(this.fontSize,_.substr(t,0,r)),l=0==e?this._x+u+i:this._x+this._w-A-i;2==e&&(l-=this.ops.font.width(this.fontSize,_.substr(t,s,t.length))),this.g.set_color(this.t.ACCENT_SELECT_COL),this.g.fillRect(l,this._y+this.cursorY*d+1.5*this.buttonOffsetY,A*this.SCALE,a)}var f=_e.time();if(.5>f%1){var c=0==e?_.substr(t,0,this.cursorX):t.substring(this.cursorX,t.length),g=this.ops.font.width(this.fontSize,c),p=0==e?this._x+g+i:this._x+this._w-g-i;this.g.set_color(this.t.TEXT_COL),this.g.fillRect(p,this._y+this.cursorY*d+1.5*this.buttonOffsetY,this.SCALE,a)}this.textSelectedCurrentText=t},textInput:function(e,t,n){if(null==n&&(n=0),null==t&&(t=""),!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.text;var i=this.getHover();i&&null!=vn.onTextHover&&vn.onTextHover(),this.g.set_color(i?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var d=this.g,a=this.t.FILL_ACCENT_BG,r=this._x+this.buttonOffsetY,s=this._y+this.buttonOffsetY,o=this._w-2*this.buttonOffsetY,A=this.t.BUTTON_H*this.SCALE,u=0;0==u&&(u=this.t.LINE_STRENGTH*this.SCALE),this.enabled||this.fadeColor(),a?d.fillRect(r,s,o,A):d.drawRect(r,s,o,A,u);var l=this.getReleased()||this.tabPressed;if(this.textSelectedHandle!=e&&l&&this.startTextEdit(e),this.textSelectedHandle==e&&this.updateTextEdit(n),this.submitTextHandle==e?this.submitTextEdit():e.changed=!1,""!=t){this.g.set_color(this.t.LABEL_COL);var _=2==n?0:2,f=0==_?7:0;this.drawString(this.g,t,f,0,_)}return this.g.set_color(this.t.TEXT_COL),this.textSelectedHandle==e?this.drawString(this.g,this.textSelectedCurrentText,null,0,n):this.drawString(this.g,e.text,null,0,n),this.endElement(),e.text},deselectText:function(){this.submitTextHandle=this.textSelectedHandle,this.textToSubmit=this.textSelectedCurrentText,this.textSelectedHandle=null,this.isTyping=!1,null!=this.currentWindow&&(this.currentWindow.redraws=2),null!=Jt.get()&&Jt.get().hide(),this.highlightAnchor=this.cursorX},button:function(e,t,n){if(null==n&&(n=""),null==t&&(t=1),!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),!1;var i=this.getReleased(),d=this.getPushed(),a=this.getHover();i&&(this.changed=!0),this.g.set_color(d?this.t.BUTTON_PRESSED_COL:a?this.t.BUTTON_HOVER_COL:this.t.BUTTON_COL);var r=this.g,s=this.t.FILL_BUTTON_BG,o=this._x+this.buttonOffsetY,A=this._y+this.buttonOffsetY,u=this._w-2*this.buttonOffsetY,l=this.t.BUTTON_H*this.SCALE,_=0;return 0==_&&(_=this.t.LINE_STRENGTH*this.SCALE),this.enabled||this.fadeColor(),s?r.fillRect(o,A,u,l):r.drawRect(o,A,u,l,_),this.g.set_color(this.t.BUTTON_TEXT_COL),this.drawString(this.g,e,this.t.TEXT_OFFSET,0,t),""!=n&&(this.g.set_color(this.t.LABEL_COL),this.drawString(this.g,n,this.t.TEXT_OFFSET,0,2==t?0:2)),this.endElement(),i},check:function(e,t){if(!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.selected;this.getReleased()?(e.selected=!e.selected,e.changed=this.changed=!0):e.changed=!1;var n=this.getHover();return this.drawCheck(e.selected,n),this.g.set_color(this.t.TEXT_COL),this.drawString(this.g,t,this.titleOffsetX,0,0),this.endElement(),e.selected},radio:function(e,t,n){if(!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.position==t;this.getReleased()?(e.position=t,e.changed=this.changed=!0):e.changed=!1;var i=this.getHover();return this.drawRadio(e.position==t,i),this.g.set_color(this.t.TEXT_COL),this.drawString(this.g,n,this.titleOffsetX,0),this.endElement(),e.position==t},inlineRadio:function(e,t){if(!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.position;this.getReleased()?(++e.position>=t.length&&(e.position=0),e.changed=this.changed=!0):e.changed=!1;var n=this.getHover();return this.drawInlineRadio(t[e.position],n),this.endElement(),e.position},combo:function(e,t,n,i,d){if(null==d&&(d=0),null==i&&(i=!1),null==n&&(n=""),!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.position;this.getReleased()&&null==this.comboSelectedHandle&&(this.inputEnabled=!1,this.comboSelectedHandle=e,this.comboSelectedWindow=this.currentWindow,this.comboSelectedAlign=d,this.comboSelectedTexts=t,this.comboSelectedLabel=n,this.comboSelectedX=0|this._x+this._windowX,this.comboSelectedY=0|this._y+this._windowY+this.t.ELEMENT_H*this.SCALE,this.comboSelectedW=0|this._w),e==this.submitComboHandle?(e.position=this.comboToSubmit,this.submitComboHandle=null,e.changed=this.changed=!0):e.changed=!1;var a=this.getHover();if(a){this.g.set_color(this.t.ACCENT_HOVER_COL);var r=this.g,s=this.t.FILL_ACCENT_BG,o=this._x+this.buttonOffsetY,A=this._y+this.buttonOffsetY,u=this._w-2*this.buttonOffsetY,l=this.t.BUTTON_H*this.SCALE,_=0;0==_&&(_=this.t.LINE_STRENGTH*this.SCALE),this.enabled||this.fadeColor(),s?r.fillRect(o,A,u,l):r.drawRect(o,A,u,l,_)}else{this.g.set_color(this.t.ACCENT_COL);var f=this.g,c=this.t.FILL_ACCENT_BG,g=this._x+this.buttonOffsetY,p=this._y+this.buttonOffsetY,h=this._w-2*this.buttonOffsetY,m=this.t.BUTTON_H*this.SCALE,b=0;0==b&&(b=this.t.LINE_STRENGTH*this.SCALE),this.enabled||this.fadeColor(),c?f.fillRect(g,p,h,m):f.drawRect(g,p,h,m,b)}var x=this._x+this._w-this.arrowOffsetX-8,S=this._y+this.arrowOffsetY+3;return this.g.fillTriangle(x,S,x+this.t.ARROW_SIZE*this.SCALE,S,x+this.t.ARROW_SIZE*this.SCALE/2,S+this.t.ARROW_SIZE*this.SCALE/2),i&&""!=n&&(0==d&&(this._x-=15),this.g.set_color(this.t.LABEL_COL),this.drawString(this.g,n,null,0,0==d?2:0),0==d&&(this._x+=15)),2==d&&(this._x-=15),this.g.set_color(this.t.TEXT_COL),this.drawString(this.g,t[e.position],null,0,d),2==d&&(this._x+=15),this.endElement(),e.position},slider:function(e,t,n,i,d,a,r,s,o){if(null==o&&(o=!0),null==s&&(s=2),null==r&&(r=!0),null==a&&(a=100),null==d&&(d=!1),null==i&&(i=1),null==n&&(n=0),!this.isVisible(this.t.ELEMENT_H*this.SCALE))return this.endElement(),e.value;if(this.getStarted()&&(e.scrolling=!0,this.scrollingHandle=e,this.isScrolling=!0),e.changed=!1,e.scrolling){var A=i-n,u=this._x+this._windowX+this.buttonOffsetY,l=this._w-2*this.buttonOffsetY,_=n+(this.inputX-u)*(A/l);e.value=Math.round(_*a)/a,e.value<n?e.value=n:e.value>i&&(e.value=i),e.changed=this.changed=!0}var f=this.getHover();this.drawSlider(e.value,n,i,d,f);var c=(this.getReleased()||this.tabPressed)&&o;c&&(e.text=e.value+"",this.startTextEdit(e));var g=0==s?2:0;return this.textSelectedHandle==e&&this.updateTextEdit(g),this.submitTextHandle==e&&(this.submitTextEdit(),e.value=parseFloat(e.text)),this.g.set_color(this.t.LABEL_COL),this.drawString(this.g,t,null,0,s),r&&(this.g.set_color(this.t.TEXT_COL),this.textSelectedHandle==e?this.drawString(this.g,this.textSelectedCurrentText,null,0,g):this.drawString(this.g,e.value+"",null,0,g)),this.endElement(),e.value},separator:function(e,t){return null==t&&(t=!0),null==e&&(e=4),this.isVisible(this.t.ELEMENT_H*this.SCALE)?void(t&&(this.g.set_color(this.t.SEPARATOR_COL),this.g.fillRect(this._x,this._y,this._w,e*this.SCALE)),this._y+=e*this.SCALE):void(this._y+=e*this.SCALE)},tooltip:function(e){this.tooltipText=e,this.tooltipY=this._y+this._windowY},tooltipImage:function(e,t){this.tooltipImg=e,this.tooltipImgMaxWidth=t,this.tooltipInvertY=this.imageInvertY,this.tooltipY=this._y+this._windowY},drawArrow:function(e){var t=this._x+this.arrowOffsetX,n=this._y+this.arrowOffsetY;this.g.set_color(this.t.ARROW_COL),e?this.g.fillTriangle(t,n,t+this.t.ARROW_SIZE*this.SCALE,n,t+this.t.ARROW_SIZE*this.SCALE/2,n+this.t.ARROW_SIZE*this.SCALE):this.g.fillTriangle(t,n,t,n+this.t.ARROW_SIZE*this.SCALE,t+this.t.ARROW_SIZE*this.SCALE,n+this.t.ARROW_SIZE*this.SCALE/2)},drawTree:function(e){var t=7*this.SCALE,n=this._x+this.arrowOffsetX+1,i=this._y+this.arrowOffsetY+1;this.g.set_color(this.t.ARROW_COL),e?this.g.fillRect(n,i+t/2-1,t,t/8):(this.g.fillRect(n,i+t/2-1,t,t/8),this.g.fillRect(n+t/2-1,i,t/8,t))},drawCheck:function(e,t){var n=this._x+this.checkOffsetX,i=this._y+this.checkOffsetY;this.g.set_color(t?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var d=this.g,a=this.t.FILL_ACCENT_BG,r=this.t.CHECK_SIZE*this.SCALE,s=this.t.CHECK_SIZE*this.SCALE,o=0;if(0==o&&(o=this.t.LINE_STRENGTH*this.SCALE),this.enabled||this.fadeColor(),a?d.fillRect(n,i,r,s):d.drawRect(n,i,r,s,o),e){this.g.set_color(-1),this.enabled||this.fadeColor();var A=0|this.t.CHECK_SELECT_SIZE*this.SCALE;this.g.drawScaledImage(this.checkSelectImage,n+this.checkSelectOffsetX,i+this.checkSelectOffsetY,A,A)}},drawRadio:function(e,t){var n=this._x+this.radioOffsetX,i=this._y+this.radioOffsetY;this.g.set_color(t?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var d=this.g,a=this.t.FILL_ACCENT_BG,r=this.t.CHECK_SIZE*this.SCALE,s=this.t.CHECK_SIZE*this.SCALE,o=0;0==o&&(o=this.t.LINE_STRENGTH*this.SCALE),this.enabled||this.fadeColor(),a?d.fillRect(n,i,r,s):d.drawRect(n,i,r,s,o),e&&(this.g.set_color(this.t.ACCENT_SELECT_COL),!this.enabled&&this.fadeColor(),this.g.fillRect(n+this.radioSelectOffsetX,i+this.radioSelectOffsetY,this.t.CHECK_SELECT_SIZE*this.SCALE,this.t.CHECK_SELECT_SIZE*this.SCALE))},drawInlineRadio:function(e,t){t?(this.g.set_color(this.t.ACCENT_HOVER_COL),this.g.fillRect(this._x+this.buttonOffsetY,this._y+this.buttonOffsetY,this._w-2*this.buttonOffsetY,this.t.BUTTON_H*this.SCALE)):(this.g.set_color(this.t.ACCENT_COL),!this.enabled&&this.fadeColor(),this.g.drawRect(this._x+this.buttonOffsetY,this._y+this.buttonOffsetY,this._w-2*this.buttonOffsetY,this.t.BUTTON_H*this.SCALE)),this.g.set_color(this.t.TEXT_COL),this.drawString(this.g,e,this.titleOffsetX,0,1)},drawSlider:function(e,t,n,i,d){var a=this._x+this.buttonOffsetY,r=this._y+this.buttonOffsetY,s=this._w-2*this.buttonOffsetY;this.g.set_color(d?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var o=this.g,A=this.t.FILL_ACCENT_BG,u=this.t.BUTTON_H*this.SCALE,l=0;0==l&&(l=this.t.LINE_STRENGTH*this.SCALE),this.enabled||this.fadeColor(),A?o.fillRect(a,r,s,u):o.drawRect(a,r,s,u,l),this.g.set_color(d?this.t.ACCENT_HOVER_COL:this.t.ACCENT_COL);var _=(e-t)/(n-t),f=8*this.SCALE,c=i?a:a+(s-f)*_,g=i?s*_:f;g=Math.max(Math.min(g,s),0);var p=this.g,h=this.t.BUTTON_H*this.SCALE,m=0;0==m&&(m=this.t.LINE_STRENGTH*this.SCALE),this.enabled||this.fadeColor(),p.fillRect(c,r,g,h)},drawCombo:function(){var e=this.g;this.globalG.set_color(this.t.SEPARATOR_COL);var t=0|this.t.ELEMENT_H*this.SCALE+this.t.ELEMENT_OFFSET*this.SCALE,n=(this.comboSelectedTexts.length+1)*t;this.globalG.begin(!1);var d=this.comboSelectedY+n>pe.windowHeight(),a=d?this.comboSelectedY-n-(0|this.t.ELEMENT_H*this.SCALE):this.comboSelectedY;this.globalG.fillRect(this.comboSelectedX,a,this.comboSelectedW,n),this.beginLayout(this.globalG,this.comboSelectedX,a,this.comboSelectedW),d&&(this.g.set_color(this.t.LABEL_COL),this.drawString(this.g,this.comboSelectedLabel,null,0,2),this._y+=t,this.fill(0,0,this._w/this.SCALE,this.SCALE,this.t.ACCENT_SELECT_COL)),this.inputEnabled=!0;for(var r=this.t.BUTTON_COL,s=0,o=this.comboSelectedTexts.length;s<o;){var A=s++,i=d?this.comboSelectedTexts.length-1-A:A;if(this.t.BUTTON_COL=i==this.comboSelectedHandle.position?this.t.PANEL_BG_COL:this.t.SEPARATOR_COL,this.button(this.comboSelectedTexts[i],this.comboSelectedAlign)){this.comboToSubmit=i,this.submitComboHandle=this.comboSelectedHandle,null!=this.comboSelectedWindow&&(this.comboSelectedWindow.redraws=2);break}}this.t.BUTTON_COL=r,d||(this.fill(0,0,this._w/this.SCALE,this.SCALE,this.t.ACCENT_SELECT_COL),this.g.set_color(this.t.LABEL_COL),this.drawString(this.g,this.comboSelectedLabel,null,0,2)),(this.inputReleased||this.isEscapeDown)&&!vn.comboFirst?(this.comboSelectedHandle=null,vn.comboFirst=!0):vn.comboFirst=!1,this.inputEnabled=null==this.comboSelectedHandle,this.endLayout(!1),this.globalG.end(),this.g=e},drawTooltip:function(){this.globalG.set_color(this.t.TEXT_COL);for(var e=this.tooltipText.split("\n"),t=0,n=0;n<e.length;){var d=e[n];++n;var a=this.ops.font.width(this.fontSize,d);a>t&&(t=a)}this.tooltipX=Math.min(this.tooltipX,pe.windowWidth()-t-20),this.globalG.begin(!1),this.globalG.fillRect(this.tooltipX,this.tooltipY,t+20,.6*(this.t.ELEMENT_H*this.SCALE*e.length)),this.globalG.set_font(this.ops.font),this.globalG.set_fontSize(this.fontSize),this.globalG.set_color(this.t.ACCENT_COL);for(var r=0,s=e.length;r<s;){var o=r++;this.globalG.drawString(e[o],this.tooltipX+5,this.tooltipY+o*this.fontSize)}this.globalG.end()},drawTooltipImage:function(){var e=this.tooltipImg.get_width();null!=this.tooltipImgMaxWidth&&e>this.tooltipImgMaxWidth&&(e=this.tooltipImgMaxWidth);var t=this.tooltipImg.get_height()*(e/this.tooltipImg.get_width());this.tooltipX=Math.min(this.tooltipX,pe.windowWidth()-e-20),this.tooltipY=Math.min(this.tooltipY,pe.windowHeight()-t-20),this.globalG.set_color(-16777216),this.globalG.begin(!1),this.globalG.fillRect(this.tooltipX,this.tooltipY,e,t),this.globalG.set_color(-1),this.tooltipInvertY?this.globalG.drawScaledImage(this.tooltipImg,this.tooltipX,this.tooltipY+t,e,-t):this.globalG.drawScaledImage(this.tooltipImg,this.tooltipX,this.tooltipY,e,t),this.globalG.end()},drawString:function(e,t,n,i,d){null==d&&(d=0),null==i&&(i=0);var a=0|this._w/(0|this.fontSize/2);t.length>a&&(t=t.substring(0,a)+".."),null==n&&(n=this.t.TEXT_OFFSET),n*=this.SCALE,e.set_font(this.ops.font),e.set_fontSize(this.fontSize),1==d?n=this._w/2-this.ops.font.width(this.fontSize,t)/2:2==d&&(n=this._w-this.ops.font.width(this.fontSize,t)-this.t.TEXT_OFFSET),this.enabled||this.fadeColor(),e.set_pipeline(this.rtTextPipeline),e.drawString(t,this._x+n,this._y+this.fontOffsetY+i),e.set_pipeline(null)},endElement:function(e){return null==this.currentWindow?void(this._y+=this.t.ELEMENT_H*this.SCALE+this.t.ELEMENT_OFFSET*this.SCALE):void(0==this.currentWindow.layout?-1==this.curRatio||null!=this.ratios&&this.curRatio==this.ratios.length-1?(null==e&&(e=this.t.ELEMENT_H*this.SCALE+this.t.ELEMENT_OFFSET*this.SCALE),this._y+=e,null!=this.ratios&&this.curRatio==this.ratios.length-1&&(this.curRatio=-1,this.ratios=null,this._x=this.xBeforeSplit,this._w=this.wBeforeSplit)):(this.curRatio++,this._x+=this._w,this._w=0|this.wBeforeSplit*this.ratios[this.curRatio]):this._x+=this._w+this.t.ELEMENT_OFFSET*this.SCALE)},row:function(e){this.ratios=e,this.curRatio=0,this.xBeforeSplit=this._x,this.wBeforeSplit=this._w,this._w=0|this._w*e[this.curRatio]},indent:function(){this._x+=0|this.t.TAB_W*this.SCALE,this._w-=0|this.t.TAB_W*this.SCALE},unindent:function(){this._x-=0|this.t.TAB_W*this.SCALE,this._w+=0|this.t.TAB_W*this.SCALE},fadeColor:function(){this.g.set_color(J.fromFloats(.00392156862745098*((16711680&this.g.get_color())>>>16),.00392156862745098*((65280&this.g.get_color())>>>8),.00392156862745098*(255&this.g.get_color()),.25))},fill:function(e,t,n,i,d){this.g.set_color(d),this.enabled||this.fadeColor(),this.g.fillRect(this._x+e*this.SCALE,this._y+t*this.SCALE,n*this.SCALE,i*this.SCALE),this.g.set_color(-1)},rect:function(e,t,n,i,d,a){null==a&&(a=1),this.g.set_color(d),this.enabled||this.fadeColor(),this.g.drawRect(this._x+e*this.SCALE,this._y+t*this.SCALE,n*this.SCALE,i*this.SCALE,a),this.g.set_color(-1)},drawRect:function(e,t,n,i,d,a,r){null==r&&(r=0),0==r&&(r=this.t.LINE_STRENGTH*this.SCALE),this.enabled||this.fadeColor(),t?e.fillRect(n,i,d,a):e.drawRect(n,i,d,a,r)},isVisible:function(e){return!(null!=this.currentWindow)||!!(0<this._y+e)&&this._y<this.currentWindow.texture.get_height()},getReleased:function(e){return null==e&&(e=-1),this.isReleased=this.enabled&&this.inputEnabled&&this.inputReleased&&this.getHover(e)&&this.getInitialHover(e),this.isReleased},getPushed:function(e){return null==e&&(e=-1),this.isPushed=this.enabled&&this.inputEnabled&&this.inputDown&&this.getHover(e)&&this.getInitialHover(e),this.isPushed},getStarted:function(e){return null==e&&(e=-1),this.isStarted=this.enabled&&this.inputEnabled&&this.inputStarted&&this.getHover(e),this.isStarted},getInitialHover:function(e){return null==e&&(e=-1),-1==e&&(e=this.t.ELEMENT_H*this.SCALE),!!(this.enabled&&this.inputEnabled&&this.inputInitialX>=this._windowX+this._x&&this.inputInitialX<this._windowX+this._x+this._w&&this.inputInitialY>=this._windowY+this._y)&&this.inputInitialY<this._windowY+this._y+e},getHover:function(e){return null==e&&(e=-1),-1==e&&(e=this.t.ELEMENT_H*this.SCALE),this.isHovered=this.enabled&&this.inputEnabled&&this.inputX>=this._windowX+this._x&&this.inputX<this._windowX+this._x+this._w&&this.inputY>=this._windowY+this._y&&this.inputY<this._windowY+this._y+e,this.isHovered},getInputInRect:function(e,t,n,i,d){return null==d&&(d=1),!!(this.enabled&&this.inputEnabled&&this.inputX>=e*d&&this.inputX<(e+n)*d&&this.inputY>=t*d)&&this.inputY<(t+i)*d},onMouseDown:function(e,t,n){0==e?this.inputStarted=!0:this.inputStartedR=!0,0==e?this.inputDown=!0:this.inputDownR=!0;var i=0|t*this.ops.scaleTexture,d=0|n*this.ops.scaleTexture;this.setInputPosition(i,d),this.inputInitialX=i,this.inputInitialY=d},onMouseUp:function(e,t,n){0==e?this.isScrolling?(this.isScrolling=!1,null!=this.scrollingHandle&&(this.scrollingHandle.scrolling=!1),t==this.inputInitialX&&n==this.inputInitialY&&(this.inputReleased=!0)):this.inputReleased=!0:1==e&&(this.inputReleasedR=!0),0==e?this.inputDown=!1:this.inputDownR=!1,this.setInputPosition(0|t*this.ops.scaleTexture,0|n*this.ops.scaleTexture),this.deselectText()},onMouseMove:function(e,t){this.setInputPosition(0|e*this.ops.scaleTexture,0|t*this.ops.scaleTexture)},onMouseWheel:function(e){this.inputWheelDelta=e},setInputPosition:function(e,t){this.inputDX+=e-this.inputX,this.inputDY+=t-this.inputY,this.inputX=e,this.inputY=t},onKeyDown:function(e){switch(this.key=e,this.isKeyPressed=!0,this.isKeyDown=!0,e){case 8:this.isBackspaceDown=!0;break;case 13:this.isReturnDown=!0;break;case 16:this.isShiftDown=!0;break;case 17:this.isCtrlDown=!0;break;case 18:this.isAltDown=!0;break;case 27:this.isEscapeDown=!0;break;case 32:this.char=" ";break;case 46:this.isDeleteDown=!0;break;default:}},onKeyUp:function(e){switch(this.isKeyDown=!1,e){case 8:this.isBackspaceDown=!1;break;case 13:this.isReturnDown=!1;break;case 16:this.isShiftDown=!1;break;case 17:this.isCtrlDown=!1;break;case 18:this.isAltDown=!1;break;case 27:this.isEscapeDown=!1;break;case 46:this.isDeleteDown=!1;break;default:}},onKeyPress:function(e){this.char=e,this.isKeyPressed=!0},onCut:function(){return vn.isCut=!0,this.onCopy()},onCopy:function(){return vn.isCopy=!0,vn.textToCopy},onPaste:function(e){vn.isPaste=!0,vn.textToPaste=e},ELEMENT_W:function(){return this.t.ELEMENT_W*this.SCALE},ELEMENT_H:function(){return this.t.ELEMENT_H*this.SCALE},ELEMENT_OFFSET:function(){return this.t.ELEMENT_OFFSET*this.SCALE},ARROW_SIZE:function(){return this.t.ARROW_SIZE*this.SCALE},BUTTON_H:function(){return this.t.BUTTON_H*this.SCALE},CHECK_SIZE:function(){return this.t.CHECK_SIZE*this.SCALE},CHECK_SELECT_SIZE:function(){return this.t.CHECK_SELECT_SIZE*this.SCALE},SCROLL_W:function(){return 0|this.t.SCROLL_W*this.SCALE},TEXT_OFFSET:function(){return this.t.TEXT_OFFSET},TAB_W:function(){return 0|this.t.TAB_W*this.SCALE},LINE_STRENGTH:function(){return this.t.LINE_STRENGTH*this.SCALE},FLASH_SPEED:function(){return .5},TOOLTIP_DELAY:function(){return 1},resize:function(e,t,n,i){null==i&&(i=0),e.redraws=2,null!=e.texture&&e.texture.unload(),1>t&&(t=1),1>n&&(n=1),e.texture=ae.createRenderTarget(t,n,0,0,1,i),e.texture.get_g2().set_imageScaleQuality(1)},__class__:vn},t.$haxeUID|=0,s.Math=Math,null==String.fromCodePoint&&(String.fromCodePoint=function(e){return 65536>e?String.fromCharCode(e):String.fromCharCode((e>>10)+55232)+String.fromCharCode((1023&e)+56320)}),String.prototype.__class__=s.String=String,String.__name__=!0,s.Array=Array,Array.__name__=!0,Date.prototype.__class__=s.Date=Date,Date.__name__="Date";var Ln={},On={},Nn=Number,Pn=Boolean,Rn={},Vn={};k.count=0;var Dn={};Object.defineProperty(W.prototype,"message",{get:function(){return this.val+""}}),G.__toStr={}.toString,null==ArrayBuffer.prototype.slice&&(ArrayBuffer.prototype.slice=z.sliceImpl),u.defaultWindowW=240,u.windowW=u.defaultWindowW,u.coffX=70,u.coffY=50,u.modalW=625,u.modalH=545,u.modalHeaderH=66,u.modalRectW=625,u.modalRectH=545,u.path="/",g.cwd="",T.DEFAULT_RESOLVER=new E,T.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",U.helper=new DataView(new ArrayBuffer(8)),q.images=new Y,q.sounds=new X,q.blobs=new Q,q.fonts=new j,q.videos=new K,J.Black=-16777216,J.White=-1,J.Red=-65536,J.Blue=-16776961,J.Green=-16711936,J.Magenta=-65281,J.Yellow=-256,J.Cyan=-16711681,J.Purple=-8388480,J.Pink=-16181,J.Orange=-23296,J.Transparent=0,J.invMaxChannelValue=.00392156862745098,$.displays=[],te.Default=new te(!1,!1,!1),_e.timeWarpSaveTime=10,_e.DIF_COUNT=3,_e.maxframetime=.5,_e.startTime=0,fe.painter_colored_fragData0="s580:AAAARFhCQwKRAhCE2jyY1lWcLP2kpYQBAAAAsAEAAAUAAAA0AAAAjAAAAMAAAAD0AAAANAEAAFJERUZQAAAAAAAAAAAAAAAAAAAAHAAAAAAE::8AAQAAHAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgNi4zLjk2MDAuMTYzODQAq6tJU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAAPDwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFNWX1RhcmdldACrq1NIRFI4AAAAQAAAAA4AAABiEAAD8hAQAAAAAABlAAAD8iAQAAAAAAA2AAAF8iAQAAAAAABGHhAAAAAAAD4AAAFTVEFUdAAAAAIAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",fe.painter_colored_vertData0="s1314:AnZlcnRleENvbG9yAAB2ZXJ0ZXhQb3NpdGlvbgABASRHbG9iYWxzAAABcHJvamVjdGlvbk1hdHJpeAAAAAAAQAAAAAQERFhCQ5A:MgyGPthJiwcRz4ddIcQBAAAAlAMAAAUAAAA0AAAADAEAAFgBAACwAQAAGAMAAFJERUbQAAAAAQAAAEgAAAABAAAAHAAAAAAE:v8AAQAAnAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAJEdsb2JhbHMAq6urPAAAAAEAAABgAAAAQAAAAAAAAAAAAAAAeAAAAAAAAABAAAAAAgAAAIwAAAAAAAAAcHJvamVjdGlvbk1hdHJpeACrq6sDAAMABAAEAAAAAAAAAAAATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciA2LjMuOTYwMC4xNjM4NACrq0lTR05EAAAAAgAAAAgAAAA4AAAAAAAAAAAAAAADAAAAAAAAAA8PAAA4AAAAAQAAAAAAAAADAAAAAQAAAAcHAABURVhDT09SRACrq6tPU0dOUAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAAPAAAAQQAAAAAAAAABAAAAAwAAAAEAAAAPAAAAVEVYQ09PUkQAU1ZfUG9zaXRpb24Aq6urU0hEUmABAABAAAEAWAAAAFkAAARGjiAAAAAAAAQAAABfAAAD8hAQAAAAAABfAAADchAQAAEAAABlAAAD8iAQAAAAAABnAAAE8iAQAAEAAAABAAAAaAAAAgIAAAA2AAAF8iAQAAAAAABGHhAAAAAAADYAAAVyABAAAAAAAEYSEAABAAAANgAABYIAEAAAAAAAAUAAAAAAgD8RAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAgAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAADAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAQAAABoAEAABAAAAOAAAB0IgEAABAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAQAAAEYOEAAAAAAARo4gAAAAAAAAAAAAEQAACCIgEAABAAAARg4QAAAAAABGjiAAAAAAAAEAAAA%AAABU1RBVHQAAAALAAAAAgAAAAAAAAAEAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",fe.painter_image_fragData0="s931:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkMLuHx52DaqoPgbxVgoLcgLAQAAAKQCAAAFAAAANAAAANwAAAAoAQAAXAEAACgCAABSREVGoAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAAMAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDYuMy45NjAwLjE2Mzg0AKtJU0dORAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAAPDwAAOAAAAAEAAAAAAAAAAwAAAAEAAAADAwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFNWX1RhcmdldACrq1NIRFLEAAAAQAAAADEAAABaAAADAGAQAAAAAABYGAAEAHAQAAAAAABVVQAAYhAAA:IQEAAAAAAAYhAAAzIQEAABAAAAZQAAA:IgEAAAAAAAaAAAAgEAAABFAAAJ8gAQAAAAAABGEBAAAQAAAEZ%EAAAAAAAAGAQAAAAAAA4AAAH8gAQAAAAAABGDhAAAAAAAEYeEAAAAAAAOAAAB3IgEAAAAAAARgIQAAAAAAD2HxAAAAAAADYAAAWCIBAAAAAAADoAEAAAAAAAPgAAAVNUQVR0AAAABQAAAAEAAAAAAAAAAwAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",fe.painter_image_vertData0="s1454:A3RleFBvc2l0aW9uAAB2ZXJ0ZXhDb2xvcgABdmVydGV4UG9zaXRpb24AAgEkR2xvYmFscwAAAXByb2plY3Rpb25NYXRyaXgAAAAAAEAAAAAEBERYQkMYRgMBQiEp1Ksh8UKJ6SuGAQAAAPADAAAFAAAANAAAAAwBAABwAQAA4AEAAHQDAABSREVG0AAAAAEAAABIAAAAAQAAABwAAAAABP7:AAEAAJwAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAACRHbG9iYWxzAKurqzwAAAABAAAAYAAAAEAAAAAAAAAAAAAAAHgAAAAAAAAAQAAAAAIAAACMAAAAAAAAAHByb2plY3Rpb25NYXRyaXgAq6urAwADAAQABAAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgNi4zLjk2MDAuMTYzODQAq6tJU0dOXAAAAAMAAAAIAAAAUAAAAAAAAAAAAAAAAwAAAAAAAAADAwAAUAAAAAEAAAAAAAAAAwAAAAEAAAAPDwAAUAAAAAIAAAAAAAAAAwAAAAIAAAAHBwAAVEVYQ09PUkQAq6urT1NHTmgAAAADAAAACAAAAFAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFAAAAABAAAAAAAAAAMAAAABAAAAAwwAAFkAAAAAAAAAAQAAAAMAAAACAAAADwAAAFRFWENPT1JEAFNWX1Bvc2l0aW9uAKurq1NIRFKMAQAAQAABAGMAAABZAAAERo4gAAAAAAAEAAAAXwAAAzIQEAAAAAAAXwAAA:IQEAABAAAAXwAAA3IQEAACAAAAZQAAA:IgEAAAAAAAZQAAAzIgEAABAAAAZwAABPIgEAACAAAAAQAAAGgAAAICAAAANgAABfIgEAAAAAAARh4QAAEAAAA2AAAFMiAQAAEAAABGEBAAAAAAADYAAAVyABAAAAAAAEYSEAACAAAANgAABYIAEAAAAAAAAUAAAAAAgD8RAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAgAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAADAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAgAAABoAEAABAAAAOAAAB0IgEAACAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAgAAAEYOEAAAAAAARo4gAAAAAAAAAAAAEQAACCIgEAACAAAARg4QAAAAAABGjiAAAAAAAAEAAAA%AAABU1RBVHQAAAAMAAAAAgAAAAAAAAAGAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",fe.painter_text_fragData0="s894:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkN4eKkSkOMyc:NS8ppPD1BYAQAAAIgCAAAFAAAANAAAANwAAAAoAQAAXAEAAAwCAABSREVGoAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAAMAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDYuMy45NjAwLjE2Mzg0AKtJU0dORAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAAPDwAAOAAAAAEAAAAAAAAAAwAAAAEAAAADAwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFNWX1RhcmdldACrq1NIRFKoAAAAQAAAACoAAABaAAADAGAQAAAAAABYGAAEAHAQAAAAAABVVQAAYhAAA:IQEAAAAAAAYhAAAzIQEAABAAAAZQAAA:IgEAAAAAAAaAAAAgEAAABFAAAJ8gAQAAAAAABGEBAAAQAAAEZ%EAAAAAAAAGAQAAAAAAA4AAAHgiAQAAAAAAAKABAAAAAAADoQEAAAAAAANgAABXIgEAAAAAAARhIQAAAAAAA%AAABU1RBVHQAAAAEAAAAAQAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",fe.painter_text_vertData0="s1454:A3RleFBvc2l0aW9uAAB2ZXJ0ZXhDb2xvcgABdmVydGV4UG9zaXRpb24AAgEkR2xvYmFscwAAAXByb2plY3Rpb25NYXRyaXgAAAAAAEAAAAAEBERYQkMYRgMBQiEp1Ksh8UKJ6SuGAQAAAPADAAAFAAAANAAAAAwBAABwAQAA4AEAAHQDAABSREVG0AAAAAEAAABIAAAAAQAAABwAAAAABP7:AAEAAJwAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAACRHbG9iYWxzAKurqzwAAAABAAAAYAAAAEAAAAAAAAAAAAAAAHgAAAAAAAAAQAAAAAIAAACMAAAAAAAAAHByb2plY3Rpb25NYXRyaXgAq6urAwADAAQABAAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgNi4zLjk2MDAuMTYzODQAq6tJU0dOXAAAAAMAAAAIAAAAUAAAAAAAAAAAAAAAAwAAAAAAAAADAwAAUAAAAAEAAAAAAAAAAwAAAAEAAAAPDwAAUAAAAAIAAAAAAAAAAwAAAAIAAAAHBwAAVEVYQ09PUkQAq6urT1NHTmgAAAADAAAACAAAAFAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFAAAAABAAAAAAAAAAMAAAABAAAAAwwAAFkAAAAAAAAAAQAAAAMAAAACAAAADwAAAFRFWENPT1JEAFNWX1Bvc2l0aW9uAKurq1NIRFKMAQAAQAABAGMAAABZAAAERo4gAAAAAAAEAAAAXwAAAzIQEAAAAAAAXwAAA:IQEAABAAAAXwAAA3IQEAACAAAAZQAAA:IgEAAAAAAAZQAAAzIgEAABAAAAZwAABPIgEAACAAAAAQAAAGgAAAICAAAANgAABfIgEAAAAAAARh4QAAEAAAA2AAAFMiAQAAEAAABGEBAAAAAAADYAAAVyABAAAAAAAEYSEAACAAAANgAABYIAEAAAAAAAAUAAAAAAgD8RAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAgAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAADAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAgAAABoAEAABAAAAOAAAB0IgEAACAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAgAAAEYOEAAAAAAARo4gAAAAAAAAAAAAEQAACCIgEAACAAAARg4QAAAAAABGjiAAAAAAAAEAAAA%AAABU1RBVHQAAAAMAAAAAgAAAAAAAAAGAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",fe.painter_video_fragData0="s931:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkMLuHx52DaqoPgbxVgoLcgLAQAAAKQCAAAFAAAANAAAANwAAAAoAQAAXAEAACgCAABSREVGoAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAAMAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDYuMy45NjAwLjE2Mzg0AKtJU0dORAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAAPDwAAOAAAAAEAAAAAAAAAAwAAAAEAAAADAwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFNWX1RhcmdldACrq1NIRFLEAAAAQAAAADEAAABaAAADAGAQAAAAAABYGAAEAHAQAAAAAABVVQAAYhAAA:IQEAAAAAAAYhAAAzIQEAABAAAAZQAAA:IgEAAAAAAAaAAAAgEAAABFAAAJ8gAQAAAAAABGEBAAAQAAAEZ%EAAAAAAAAGAQAAAAAAA4AAAH8gAQAAAAAABGDhAAAAAAAEYeEAAAAAAAOAAAB3IgEAAAAAAARgIQAAAAAAD2HxAAAAAAADYAAAWCIBAAAAAAADoAEAAAAAAAPgAAAVNUQVR0AAAABQAAAAEAAAAAAAAAAwAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",fe.painter_video_vertData0="s1454:A3RleFBvc2l0aW9uAAB2ZXJ0ZXhDb2xvcgABdmVydGV4UG9zaXRpb24AAgEkR2xvYmFscwAAAXByb2plY3Rpb25NYXRyaXgAAAAAAEAAAAAEBERYQkMYRgMBQiEp1Ksh8UKJ6SuGAQAAAPADAAAFAAAANAAAAAwBAABwAQAA4AEAAHQDAABSREVG0AAAAAEAAABIAAAAAQAAABwAAAAABP7:AAEAAJwAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAACRHbG9iYWxzAKurqzwAAAABAAAAYAAAAEAAAAAAAAAAAAAAAHgAAAAAAAAAQAAAAAIAAACMAAAAAAAAAHByb2plY3Rpb25NYXRyaXgAq6urAwADAAQABAAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgNi4zLjk2MDAuMTYzODQAq6tJU0dOXAAAAAMAAAAIAAAAUAAAAAAAAAAAAAAAAwAAAAAAAAADAwAAUAAAAAEAAAAAAAAAAwAAAAEAAAAPDwAAUAAAAAIAAAAAAAAAAwAAAAIAAAAHBwAAVEVYQ09PUkQAq6urT1NHTmgAAAADAAAACAAAAFAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFAAAAABAAAAAAAAAAMAAAABAAAAAwwAAFkAAAAAAAAAAQAAAAMAAAACAAAADwAAAFRFWENPT1JEAFNWX1Bvc2l0aW9uAKurq1NIRFKMAQAAQAABAGMAAABZAAAERo4gAAAAAAAEAAAAXwAAAzIQEAAAAAAAXwAAA:IQEAABAAAAXwAAA3IQEAACAAAAZQAAA:IgEAAAAAAAZQAAAzIgEAABAAAAZwAABPIgEAACAAAAAQAAAGgAAAICAAAANgAABfIgEAAAAAAARh4QAAEAAAA2AAAFMiAQAAEAAABGEBAAAAAAADYAAAVyABAAAAAAAEYSEAACAAAANgAABYIAEAAAAAAAAUAAAAAAgD8RAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAgAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAADAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAgAAABoAEAABAAAAOAAAB0IgEAACAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAgAAAEYOEAAAAAAARo4gAAAAAAAAAAAAEQAACCIgEAACAAAARg4QAAAAAABGjiAAAAAAAAEAAAA%AAABU1RBVHQAAAAMAAAAAgAAAAAAAAAGAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",pe.renderListeners=[],pe.foregroundListeners=[],pe.resumeListeners=[],pe.pauseListeners=[],pe.backgroundListeners=[],pe.shutdownListeners=[],pe.dropFilesListeners=[],he.maxGamepads=4,he.mouseLockListeners=[],be.windows=[],xe.None=0,xe.FeatureResizable=1,xe.FeatureMinimizable=2,xe.FeatureMaximizable=4,xe.FeatureBorderless=8,xe.FeatureOnTop=16,Be.disableGcInteractions=!1,Be.intBox=new Ie(0),ke.channelCount=32,ke.lastAllocationCount=0,Pe.POLY=79764919,Fe.INVALID_BITS=-1,He.EOP=-1,He.M__PI=3.141592653589793,He.DIVTAB_NUMER=32,He.DIVTAB_DENOM=64,He.INVERSE_DB_TABLE=[1.0649863e-7,1.1341951e-7,1.2079015e-7,1.2863978e-7,1.3699951e-7,1.4590251e-7,1.5538408e-7,1.6548181e-7,1.7623575e-7,1.8768855e-7,1.9988561e-7,2.128753e-7,2.2670913e-7,2.4144197e-7,2.5713223e-7,2.7384213e-7,2.9163793e-7,3.1059021e-7,3.3077411e-7,3.5226968e-7,3.7516214e-7,3.9954229e-7,4.255068e-7,4.5315863e-7,4.8260743e-7,5.1396998e-7,5.4737065e-7,5.8294187e-7,6.2082472e-7,6.6116941e-7,7.0413592e-7,7.4989464e-7,7.9862701e-7,8.505263e-7,9.0579828e-7,9.6466216e-7,10273513e-13,10941144e-13,11652161e-13,12409384e-13,13215816e-13,14074654e-13,14989305e-13,15963394e-13,17000785e-13,18105592e-13,19282195e-13,20535261e-13,21869758e-13,23290978e-13,24804557e-13,26416497e-13,2813319e-12,29961443e-13,31908506e-13,33982101e-13,36190449e-13,38542308e-13,41047004e-13,4371447e-12,46555282e-13,49580707e-13,5280274e-12,5623416e-12,59888572e-13,63780469e-13,67925283e-13,72339451e-13,77040476e-13,82047e-10,87378876e-13,93057248e-13,99104632e-13,10554501e-12,11240392e-12,11970856e-12,12748789e-12,13577278e-12,14459606e-12,15399272e-12,16400004e-12,17465768e-12,18600792e-12,19809576e-12,21096914e-12,22467911e-12,23928002e-12,25482978e-12,27139006e-12,28902651e-12,30780908e-12,32781225e-12,34911534e-12,37180282e-12,39596466e-12,42169667e-12,4491009e-11,47828601e-12,50936773e-12,54246931e-12,57772202e-12,61526565e-12,65524908e-12,69783085e-12,74317983e-12,79147585e-12,8429104e-11,89768747e-12,95602426e-12,.00010181521,.00010843174,.00011547824,.00012298267,.00013097477,.00013948625,.00014855085,.00015820453,.00016848555,.00017943469,.00019109536,.00020351382,.00021673929,.00023082423,.00024582449,.00026179955,.00027881276,.00029693158,.00031622787,.00033677814,.00035866388,.00038197188,.00040679456,.00043323036,.00046138411,.00049136745,.00052329927,.00055730621,.00059352311,.00063209358,.00067317058,716917e-9,.0007635063,.00081312324,.00086596457,.00092223983,.00098217216,.0010459992,.0011139742,.0011863665,.0012634633,.0013455702,.0014330129,.0015261382,.0016253153,.0017309374,.0018434235,.0019632195,.0020908006,.0022266726,.0023713743,.0025254795,.0026895994,.0028643847,.0030505286,.0032487691,.0034598925,.0036847358,.0039241906,.0041792066,.004450795,.0047400328,.0050480668,.0053761186,.0057254891,.0060975636,.0064938176,.0069158225,.0073652516,.0078438871,.0083536271,.0088964928,.009474637,.010090352,.01074608,.011444421,.012188144,.012980198,.013823725,.014722068,.015678791,.016697687,.017782797,.018938423,.020169149,.021479854,.022875735,.02436233,.025945531,.027631618,.029427276,.031339626,.033376252,.035545228,.037855157,.040315199,.042935108,.045725273,.048696758,.051861348,.055231591,.05882085,.062643361,.066714279,.071049749,.075666962,.080584227,.085821044,.091398179,.097337747,.1036633,.11039993,.11757434,.12521498,.13335215,.14201813,.15124727,.16107617,.1715438,.18269168,.19456402,.20720788,.22067342,.23501402,.25028656,.26655159,.28387361,.30232132,.32196786,.34289114,.36517414,.38890521,.41417847,.44109412,.4697589,.50028648,.53279791,.56742212,.6042964,.64356699,.68538959,.72993007,.77736504,.8278826,.88168307,.9389798,1],We.NO_CODE=255,We.delay=0,Qe.PACKET_ID=1,Qe.PACKET_COMMENT=3,Qe.PACKET_SETUP=5,$e.CONTINUED_PACKET=1,$e.FIRST_PAGE=2,$e.LAST_PAGE=4,dt.MAX_CHANNELS=16,dt.PUSHDATA_CRC_COUNT=4,dt.FAST_HUFFMAN_LENGTH=10,dt.FAST_HUFFMAN_TABLE_SIZE=1024,dt.FAST_HUFFMAN_TABLE_MASK=1023,ot.fontGlyphs=function(){for(var e=[],t=32,n,d;256>t;)d=t++,e.push(d);return n=e,n}(this),It.STBTT_vmove=1,It.STBTT_vline=2,It.STBTT_vcurve=3,It.STBTT_MACSTYLE_DONTCARE=0,It.STBTT_MACSTYLE_BOLD=1,It.STBTT_MACSTYLE_ITALIC=2,It.STBTT_MACSTYLE_UNDERSCORE=4,It.STBTT_MACSTYLE_NONE=8,It.STBTT_PLATFORM_ID_UNICODE=0,It.STBTT_PLATFORM_ID_MAC=1,It.STBTT_PLATFORM_ID_ISO=2,It.STBTT_PLATFORM_ID_MICROSOFT=3,It.STBTT_UNICODE_EID_UNICODE_1_0=0,It.STBTT_UNICODE_EID_UNICODE_1_1=1,It.STBTT_UNICODE_EID_ISO_10646=2,It.STBTT_UNICODE_EID_UNICODE_2_0_BMP=3,It.STBTT_UNICODE_EID_UNICODE_2_0_FULL=4,It.STBTT_MS_EID_SYMBOL=0,It.STBTT_MS_EID_UNICODE_BMP=1,It.STBTT_MS_EID_SHIFTJIS=2,It.STBTT_MS_EID_UNICODE_FULL=10,It.STBTT_MAC_EID_ROMAN=0,It.STBTT_MAC_EID_ARABIC=4,It.STBTT_MAC_EID_JAPANESE=1,It.STBTT_MAC_EID_HEBREW=5,It.STBTT_MAC_EID_CHINESE_TRAD=2,It.STBTT_MAC_EID_GREEK=6,It.STBTT_MAC_EID_KOREAN=3,It.STBTT_MAC_EID_RUSSIAN=7,It.STBTT_MS_LANG_ENGLISH=1033,It.STBTT_MS_LANG_ITALIAN=1040,It.STBTT_MS_LANG_CHINESE=2052,It.STBTT_MS_LANG_JAPANESE=1041,It.STBTT_MS_LANG_DUTCH=1043,It.STBTT_MS_LANG_KOREAN=1042,It.STBTT_MS_LANG_FRENCH=1036,It.STBTT_MS_LANG_RUSSIAN=1049,It.STBTT_MS_LANG_GERMAN=1031,It.STBTT_MS_LANG_SPANISH=1033,It.STBTT_MS_LANG_HEBREW=1037,It.STBTT_MS_LANG_SWEDISH=1053,It.STBTT_MAC_LANG_ENGLISH=0,It.STBTT_MAC_LANG_JAPANESE=11,It.STBTT_MAC_LANG_ARABIC=12,It.STBTT_MAC_LANG_KOREAN=23,It.STBTT_MAC_LANG_DUTCH=4,It.STBTT_MAC_LANG_RUSSIAN=32,It.STBTT_MAC_LANG_FRENCH=1,It.STBTT_MAC_LANG_SPANISH=6,It.STBTT_MAC_LANG_GERMAN=2,It.STBTT_MAC_LANG_SWEDISH=5,It.STBTT_MAC_LANG_HEBREW=10,It.STBTT_MAC_LANG_CHINESE_SIMPLIFIED=33,It.STBTT_MAC_LANG_ITALIAN=3,It.STBTT_MAC_LANG_CHINESE_TRAD=19,It.STBTT_MAX_OVERSAMPLE=8,It.STBTT_RASTERIZER_VERSION=2,Pt.bufferSize=1500,Pt.vertexSize=9,Rt.bufferSize=1e3,Rt.triangleBufferSize=1e3,Vt.bufferSize=1e3,Kt.__meta__={statics:{sendConnectEvent:{input:null},sendDisconnectEvent:{input:null}},fields:{sendAxisEvent:{input:null},sendButtonEvent:{input:null}}},Kt.instances=[],Kt.connectListeners=[],Kt.disconnectListeners=[],Jt.__meta__={fields:{sendDownEvent:{input:null},sendUpEvent:{input:null},sendPressEvent:{input:null}}},Jt.keyBehavior=qt.Default,$t.__meta__={fields:{sendLeaveEvent:{input:null},sendDownEvent:{input:null},sendUpEvent:{input:null},sendMoveEvent:{input:null},sendWheelEvent:{input:null}}},dn.bufferSize=2e3,an.mat=function(){var e=new Float32Array(16),t;return t=e,t}(this),sn.width=3,sn.height=3,on.width=4,on.height=4,_n.width=3,_n.height=3,fn.width=4,fn.height=4,mn.nextId=0,yn.START=0,yn.ENTITY_UPDATES=1,yn.CONTROLLER_UPDATES=2,yn.REMOTE_CALL=3,yn.PING=4,yn.SESSION_ERROR=5,yn.PLAYER_UPDATES=6,yn.RPC_SERVER=0,yn.RPC_ALL=1,wn.nextId=0,wn.objects=[],Tn.global=new Tn,Cn.assetMap=new C,Cn.events=[],Cn.screenW=-1,Cn.screenH=-1,Cn.locale="en",Cn.h=new Tn,Cn.elemId=-1,Cn.assetId=-1,In.dataPath="",In.lastPath="",In.kx=1,In.ky=.6666666666666666,In.kz=.3333333333333333,In.kw=3,In.ar=[0,0,0],In.Kx=0,In.Ky=-.3333333333333333,In.Kz=.6666666666666666,In.Kw=-1,In.e=1e-10,Bn.i=0,kn.dark={FONT_SIZE:13,ELEMENT_W:100,ELEMENT_H:22,ELEMENT_OFFSET:4,ARROW_SIZE:5,BUTTON_H:17,CHECK_SIZE:15,CHECK_SELECT_SIZE:8,SCROLL_W:6,TEXT_OFFSET:8,TAB_W:12,LINE_STRENGTH:1,FILL_WINDOW_BG:!1,FILL_BUTTON_BG:!0,FILL_ACCENT_BG:!1,WINDOW_BG_COL:-13421773,WINDOW_TINT_COL:-1,ACCENT_COL:-12303292,ACCENT_HOVER_COL:-12040120,ACCENT_SELECT_COL:-10461088,PANEL_BG_COL:-13421773,PANEL_TEXT_COL:-1513499,BUTTON_COL:-12040120,BUTTON_TEXT_COL:-1513499,BUTTON_HOVER_COL:-12895429,BUTTON_PRESSED_COL:-15000805,TEXT_COL:-1513499,LABEL_COL:-3618616,ARROW_COL:-1513499,SEPARATOR_COL:-14211289,HIGHLIGHT_COL:-14656100},kn.light={FONT_SIZE:26,ELEMENT_W:200,ELEMENT_H:44,ELEMENT_OFFSET:4,ARROW_SIZE:10,BUTTON_H:34,CHECK_SIZE:30,CHECK_SELECT_SIZE:16,SCROLL_W:12,TEXT_OFFSET:16,TAB_W:24,LINE_STRENGTH:2,FILL_WINDOW_BG:!1,FILL_BUTTON_BG:!0,FILL_ACCENT_BG:!1,WINDOW_BG_COL:-1052689,WINDOW_TINT_COL:-14540254,ACCENT_COL:-1118482,ACCENT_HOVER_COL:-4473925,ACCENT_SELECT_COL:-5592406,PANEL_BG_COL:-1,PANEL_TEXT_COL:-14540254,BUTTON_COL:-3355444,BUTTON_TEXT_COL:-14540254,BUTTON_HOVER_COL:-5000269,BUTTON_PRESSED_COL:-5131855,TEXT_COL:-6710887,LABEL_COL:-5592406,ARROW_COL:-3487289,SEPARATOR_COL:-6710887,HIGHLIGHT_COL:-14656100},vn.alwaysRedrawWindow=!0,vn.textToPaste="",vn.textToCopy="",vn.isCut=!1,vn.isCopy=!1,vn.isPaste=!1,vn.copyFrame=0,vn.comboFirst=!0,g.main()})("undefined"==typeof exports?"undefined"==typeof window?"undefined"==typeof self?this:self:window:exports,"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window);